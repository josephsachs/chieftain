{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"text-",
				"text-orientation"
			],
			[
				"ali",
				"vertical-align"
			],
			[
				"address",
				"address_line_2"
			],
			[
				"inline",
				"inline-block"
			],
			[
				"Patient",
				"PatientSexChoice"
			]
		]
	},
	"buffers":
	[
		{
			"file": "package.json",
			"settings":
			{
				"buffer_size": 1057,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					9,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAIQQAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "src/index.css",
			"settings":
			{
				"buffer_size": 425,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAqQEAAAAAAAAAAAAA",
					"BQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"file": "src/App.tsx",
			"settings":
			{
				"buffer_size": 185,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			}
		},
		{
			"file": "src/index.tsx",
			"settings":
			{
				"buffer_size": 273,
				"line_ending": "Unix"
			}
		},
		{
			"file": "src/components/GameArea.tsx",
			"settings":
			{
				"buffer_size": 6830,
				"encoding": "UTF-8",
				"line_ending": "Unix",
				"name": "import { useState, useEffect, useRef } from 'react"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAA2BcAAAAAAAAAAAAA",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAnBkAAAAAAAAAAAAAnBkAAAAAAACcGQAAAAAAANgXAABpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7Cgpjb25zdCBHYW1lQXJlYSA9ICgpID0+IHsKICBjb25zdCBbY29ubmVjdGlvblN0YXR1cywgc2V0Q29ubmVjdGlvblN0YXR1c10gPSB1c2VTdGF0ZSgnZGlzY29ubmVjdGVkJyk7CiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZShbXSk7CiAgY29uc3QgW2Nvbm5lY3Rpb25JZCwgc2V0Q29ubmVjdGlvbklkXSA9IHVzZVN0YXRlKG51bGwpOwogIGNvbnN0IFt1cFNvY2tldCwgc2V0VXBTb2NrZXRdID0gdXNlU3RhdGUobnVsbCk7CiAgY29uc3QgW2Rvd25Tb2NrZXQsIHNldERvd25Tb2NrZXRdID0gdXNlU3RhdGUobnVsbCk7CiAgY29uc3QgW21hcERhdGEsIHNldE1hcERhdGFdID0gdXNlU3RhdGUoW10pOwoKICBjb25zdCBtZXNzYWdlc0VuZFJlZiA9IHVzZVJlZihudWxsKTsKCiAgY29uc3Qgc2Nyb2xsVG9Cb3R0b20gPSAoKSA9PiB7CiAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAic21vb3RoIiB9KTsKICB9OwoKICB1c2VFZmZlY3QoKCkgPT4gewogICAgc2Nyb2xsVG9Cb3R0b20oKTsKICB9LCBbbWVzc2FnZXNdKTsKCiAgY29uc3QgYWRkTWVzc2FnZSA9IChtZXNzYWdlKSA9PiB7CiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpOwogICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldi5zbGljZSgtMTkpLCB7IHRpbWVzdGFtcCwgbWVzc2FnZSB9XSk7IC8vIEtlZXAgbGFzdCAyMCBtZXNzYWdlcwogIH07CgogIGNvbnN0IGNvbm5lY3RVcFNvY2tldCA9IGFzeW5jICgpID0+IHsKICAgIHRyeSB7CiAgICAgIGFkZE1lc3NhZ2UoJ0Nvbm5lY3RpbmcgdG8gdXAgc29ja2V0Li4uJyk7CiAgICAgIGNvbnN0IHdzID0gbmV3IFdlYlNvY2tldCgnd3M6Ly9sb2NhbGhvc3Q6NDIyNS9jb21tYW5kJyk7CiAgICAgIAogICAgICB3cy5vbm9wZW4gPSAoKSA9PiB7CiAgICAgICAgYWRkTWVzc2FnZSgnQ29ubmVjdGVkIHRvIHVwIHNvY2tldCcpOwogICAgICAgIHNldFVwU29ja2V0KHdzKTsKICAgICAgICBzZXRDb25uZWN0aW9uU3RhdHVzKCdjb25uZWN0ZWQtdXAnKTsKICAgICAgfTsKCiAgICAgIHdzLm9ubWVzc2FnZSA9IChldmVudCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTsKICAgICAgICAgIGFkZE1lc3NhZ2UoYFVQOiAke0pTT04uc3RyaW5naWZ5KG1lc3NhZ2UpfWApOwogICAgICAgICAgCiAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSAnY29ubmVjdGlvbl9jb25maXJtJykgewogICAgICAgICAgICBjb25zdCBjb25uSWQgPSBtZXNzYWdlLmNvbm5lY3Rpb25JZDsKICAgICAgICAgICAgc2V0Q29ubmVjdGlvbklkKGNvbm5JZCk7CiAgICAgICAgICAgIGFkZE1lc3NhZ2UoYEdvdCBjb25uZWN0aW9uIElEOiAke2Nvbm5JZH1gKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFNlbmQgc3luYyByZXF1ZXN0CiAgICAgICAgICAgIGNvbnN0IHN5bmNSZXF1ZXN0ID0gewogICAgICAgICAgICAgIGNvbW1hbmQ6ICJzeW5jIiwKICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShzeW5jUmVxdWVzdCkpOwogICAgICAgICAgICBhZGRNZXNzYWdlKCdTZW50IHN5bmMgcmVxdWVzdCcpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gTm93IGNvbm5lY3QgZG93biBzb2NrZXQKICAgICAgICAgICAgY29ubmVjdERvd25Tb2NrZXQoY29ubklkKTsKICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSAnc3luYycgJiYgbWVzc2FnZS5kYXRhKSB7CiAgICAgICAgICAgIGlmIChtZXNzYWdlLmRhdGEuZW50aXRpZXMpIHsKICAgICAgICAgICAgICBhZGRNZXNzYWdlKGBSZWNlaXZlZCAke21lc3NhZ2UuZGF0YS5lbnRpdGllcy5sZW5ndGh9IGVudGl0aWVzIGZyb20gc3luY2ApOwogICAgICAgICAgICAgIC8vIEZpbHRlciBmb3IgTWFwVGlsZSBlbnRpdGllcwogICAgICAgICAgICAgIGNvbnN0IG1hcFRpbGVzID0gbWVzc2FnZS5kYXRhLmVudGl0aWVzLmZpbHRlcihlID0+IGUudHlwZSA9PT0gJ01hcFRpbGUnKTsKICAgICAgICAgICAgICBzZXRNYXBEYXRhKG1hcFRpbGVzKTsKICAgICAgICAgICAgICBhZGRNZXNzYWdlKGBGb3VuZCAke21hcFRpbGVzLmxlbmd0aH0gbWFwIHRpbGVzYCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBhZGRNZXNzYWdlKGBFcnJvciBwYXJzaW5nIHVwIHNvY2tldCBtZXNzYWdlOiAke2UubWVzc2FnZX1gKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB3cy5vbmNsb3NlID0gKCkgPT4gewogICAgICAgIGFkZE1lc3NhZ2UoJ1VwIHNvY2tldCBjbG9zZWQnKTsKICAgICAgICBzZXRDb25uZWN0aW9uU3RhdHVzKCdkaXNjb25uZWN0ZWQnKTsKICAgICAgICBzZXRVcFNvY2tldChudWxsKTsKICAgICAgfTsKCiAgICAgIHdzLm9uZXJyb3IgPSAoZXJyb3IpID0+IHsKICAgICAgICBhZGRNZXNzYWdlKGBVcCBzb2NrZXQgZXJyb3I6ICR7ZXJyb3J9YCk7CiAgICAgIH07CgogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgYWRkTWVzc2FnZShgRmFpbGVkIHRvIGNvbm5lY3QgdXAgc29ja2V0OiAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgICB9CiAgfTsKCiAgY29uc3QgY29ubmVjdERvd25Tb2NrZXQgPSBhc3luYyAoY29ubklkKSA9PiB7CiAgICB0cnkgewogICAgICBhZGRNZXNzYWdlKCdDb25uZWN0aW5nIHRvIGRvd24gc29ja2V0Li4uJyk7CiAgICAgIGNvbnN0IHdzID0gbmV3IFdlYlNvY2tldCgnd3M6Ly9sb2NhbGhvc3Q6NDIyNi91cGRhdGUnKTsKICAgICAgCiAgICAgIHdzLm9ub3BlbiA9ICgpID0+IHsKICAgICAgICBhZGRNZXNzYWdlKCdDb25uZWN0ZWQgdG8gZG93biBzb2NrZXQnKTsKICAgICAgICBzZXREb3duU29ja2V0KHdzKTsKICAgICAgICBzZXRDb25uZWN0aW9uU3RhdHVzKCdmdWxseS1jb25uZWN0ZWQnKTsKICAgICAgICAKICAgICAgICAvLyBTZW5kIGNvbm5lY3Rpb24gSUQKICAgICAgICBjb25zdCBjb25uZWN0aW9uTWVzc2FnZSA9IHsgY29ubmVjdGlvbklkOiBjb25uSWQgfTsKICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KGNvbm5lY3Rpb25NZXNzYWdlKSk7CiAgICAgICAgYWRkTWVzc2FnZSgnU2VudCBjb25uZWN0aW9uIElEIHRvIGRvd24gc29ja2V0Jyk7CiAgICAgIH07CgogICAgICB3cy5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgICAgICBhZGRNZXNzYWdlKGBET1dOOiAke0pTT04uc3RyaW5naWZ5KG1lc3NhZ2UpfWApOwogICAgICAgICAgCiAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSAnZG93bl9zb2NrZXRfY29uZmlybScpIHsKICAgICAgICAgICAgYWRkTWVzc2FnZSgnRG93biBzb2NrZXQgY29uZmlybWVkJyk7CiAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ3VwZGF0ZV9iYXRjaCcgJiYgbWVzc2FnZS51cGRhdGVzKSB7CiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUNvdW50ID0gT2JqZWN0LmtleXMobWVzc2FnZS51cGRhdGVzKS5sZW5ndGg7CiAgICAgICAgICAgIGFkZE1lc3NhZ2UoYFJlY2VpdmVkIGJhdGNoIHVwZGF0ZSB3aXRoICR7dXBkYXRlQ291bnR9IGVudGl0aWVzYCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBVcGRhdGUgbWFwIGRhdGEgd2l0aCBhbnkgTWFwVGlsZSB1cGRhdGVzCiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMobWVzc2FnZS51cGRhdGVzKS5mb3JFYWNoKHVwZGF0ZSA9PiB7CiAgICAgICAgICAgICAgaWYgKHVwZGF0ZS50eXBlID09PSAnTWFwVGlsZScpIHsKICAgICAgICAgICAgICAgIHNldE1hcERhdGEocHJldiA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0RhdGEgPSBbLi4ucHJldl07CiAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbmV3RGF0YS5maW5kSW5kZXgodGlsZSA9PiB0aWxlLl9pZCA9PT0gdXBkYXRlLl9pZCk7CiAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgbmV3RGF0YVtpbmRleF0gPSB1cGRhdGU7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbmV3RGF0YS5wdXNoKHVwZGF0ZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0RhdGE7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGFkZE1lc3NhZ2UoYEVycm9yIHBhcnNpbmcgZG93biBzb2NrZXQgbWVzc2FnZTogJHtlLm1lc3NhZ2V9YCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgd3Mub25jbG9zZSA9ICgpID0+IHsKICAgICAgICBhZGRNZXNzYWdlKCdEb3duIHNvY2tldCBjbG9zZWQnKTsKICAgICAgICBzZXRDb25uZWN0aW9uU3RhdHVzKCdjb25uZWN0ZWQtdXAnKTsKICAgICAgICBzZXREb3duU29ja2V0KG51bGwpOwogICAgICB9OwoKICAgICAgd3Mub25lcnJvciA9IChlcnJvcikgPT4gewogICAgICAgIGFkZE1lc3NhZ2UoYERvd24gc29ja2V0IGVycm9yOiAke2Vycm9yfWApOwogICAgICB9OwoKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGFkZE1lc3NhZ2UoYEZhaWxlZCB0byBjb25uZWN0IGRvd24gc29ja2V0OiAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgICB9CiAgfTsKCiAgLy8gQXV0by1jb25uZWN0IG9uIG1vdW50CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGNvbm5lY3RVcFNvY2tldCgpOwogIH0sIFtdKTsKCiAgcmV0dXJuICgKICAgIDxkaXYgY2xhc3NOYW1lPSJoLXNjcmVlbiB3LXNjcmVlbiBiZy1ncmF5LTkwMCBmbGV4IGZsZXgtY29sIj4KICAgICAgey8qIERlYnVnIE1lc3NhZ2VzIC0gaW5saW5lIG9uIHBhZ2UgKi99CiAgICAgIDxkaXYgY2xhc3NOYW1lPSJwLTIiPgogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWdyZWVuLTQwMCBmb250LW1vbm8gdGV4dC14cyBtYi0xIj4KICAgICAgICAgIFN0YXR1czoge2Nvbm5lY3Rpb25TdGF0dXN9CiAgICAgICAgPC9kaXY+CiAgICAgICAge21lc3NhZ2VzLnNsaWNlKC01KS5tYXAoKG1zZywgaW5kZXgpID0+ICgKICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPSJ0ZXh0LWdyZWVuLTQwMCBmb250LW1vbm8gdGV4dC14cyBsZWFkaW5nLXRpZ2h0IG9wYWNpdHktNjAiPgogICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtZ3JheS01MDAiPnttc2cudGltZXN0YW1wfTwvc3Bhbj4ge21zZy5tZXNzYWdlfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgKSl9CiAgICAgIDwvZGl2PgoKICAgICAgey8qIEdhbWUgTWFwICovfQogICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIj4KICAgICAgICB7Y29ubmVjdGlvblN0YXR1cyA9PT0gJ2Z1bGx5LWNvbm5lY3RlZCcgJiYgKAogICAgICAgICAgPEdhbWVNYXAgbWFwRGF0YT17bWFwRGF0YX0gLz4KICAgICAgICApfQogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn07CgovLyBQbGFjZWhvbGRlciBHYW1lTWFwIGNvbXBvbmVudApjb25zdCBHYW1lTWFwID0gKHsgbWFwRGF0YSB9KSA9PiB7CiAgcmV0dXJuICgKICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgaC1mdWxsIGJnLWdyYXktODAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIj4KICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtd2hpdGUgZm9udC1tb25vIj4KICAgICAgICA8ZGl2Pk1hcCBsb2FkZWQgd2l0aCB7bWFwRGF0YS5sZW5ndGh9IHRpbGVzPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtc20gdGV4dC1ncmF5LTQwMCBtdC0yIj4KICAgICAgICAgIENhbnZhcyByZW5kZXJpbmcgd2lsbCBnbyBoZXJlCiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfTsKCmV4cG9ydCBkZWZhdWx0IEdhbWVBcmVhOw",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAADYFwAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAbhsAAAAAAAAAAAAAbhsAAAAAAABuGwAAAAAAAJwZAABpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7CgppbnRlcmZhY2UgTG9nTWVzc2FnZSB7CiAgdGltZXN0YW1wOiBzdHJpbmc7CiAgbWVzc2FnZTogc3RyaW5nOwp9CgppbnRlcmZhY2UgTWFwVGlsZSB7CiAgX2lkOiBzdHJpbmc7CiAgdHlwZTogc3RyaW5nOwogIFtrZXk6IHN0cmluZ106IGFueTsKfQoKY29uc3QgR2FtZUFyZWEgPSAoKSA9PiB7CiAgY29uc3QgW2Nvbm5lY3Rpb25TdGF0dXMsIHNldENvbm5lY3Rpb25TdGF0dXNdID0gdXNlU3RhdGUoJ2Rpc2Nvbm5lY3RlZCcpOwogIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TG9nTWVzc2FnZVtdPihbXSk7CiAgY29uc3QgW2Nvbm5lY3Rpb25JZCwgc2V0Q29ubmVjdGlvbklkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpOwogIGNvbnN0IFt1cFNvY2tldCwgc2V0VXBTb2NrZXRdID0gdXNlU3RhdGU8V2ViU29ja2V0IHwgbnVsbD4obnVsbCk7CiAgY29uc3QgW2Rvd25Tb2NrZXQsIHNldERvd25Tb2NrZXRdID0gdXNlU3RhdGU8V2ViU29ja2V0IHwgbnVsbD4obnVsbCk7CiAgY29uc3QgW21hcERhdGEsIHNldE1hcERhdGFdID0gdXNlU3RhdGU8TWFwVGlsZVtdPihbXSk7CgogIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTsKCiAgY29uc3Qgc2Nyb2xsVG9Cb3R0b20gPSAoKSA9PiB7CiAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAic21vb3RoIiB9KTsKICB9OwoKICB1c2VFZmZlY3QoKCkgPT4gewogICAgc2Nyb2xsVG9Cb3R0b20oKTsKICB9LCBbbWVzc2FnZXNdKTsKCiAgY29uc3QgYWRkTWVzc2FnZSA9IChtZXNzYWdlOiBzdHJpbmcpID0+IHsKICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7CiAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LnNsaWNlKC0xOSksIHsgdGltZXN0YW1wLCBtZXNzYWdlIH1dKTsgLy8gS2VlcCBsYXN0IDIwIG1lc3NhZ2VzCiAgfTsKCiAgY29uc3QgY29ubmVjdFVwU29ja2V0ID0gYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgYWRkTWVzc2FnZSgnQ29ubmVjdGluZyB0byB1cCBzb2NrZXQuLi4nKTsKICAgICAgY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KCd3czovL2xvY2FsaG9zdDo0MjI1L2NvbW1hbmQnKTsKICAgICAgCiAgICAgIHdzLm9ub3BlbiA9ICgpID0+IHsKICAgICAgICBhZGRNZXNzYWdlKCdDb25uZWN0ZWQgdG8gdXAgc29ja2V0Jyk7CiAgICAgICAgc2V0VXBTb2NrZXQod3MpOwogICAgICAgIHNldENvbm5lY3Rpb25TdGF0dXMoJ2Nvbm5lY3RlZC11cCcpOwogICAgICB9OwoKICAgICAgd3Mub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpOwogICAgICAgICAgYWRkTWVzc2FnZShgVVA6ICR7SlNPTi5zdHJpbmdpZnkobWVzc2FnZSl9YCk7CiAgICAgICAgICAKICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09ICdjb25uZWN0aW9uX2NvbmZpcm0nKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbm5JZCA9IG1lc3NhZ2UuY29ubmVjdGlvbklkOwogICAgICAgICAgICBzZXRDb25uZWN0aW9uSWQoY29ubklkKTsKICAgICAgICAgICAgYWRkTWVzc2FnZShgR290IGNvbm5lY3Rpb24gSUQ6ICR7Y29ubklkfWApOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gU2VuZCBzeW5jIHJlcXVlc3QKICAgICAgICAgICAgY29uc3Qgc3luY1JlcXVlc3QgPSB7CiAgICAgICAgICAgICAgY29tbWFuZDogInN5bmMiLAogICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKQogICAgICAgICAgICB9OwogICAgICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHN5bmNSZXF1ZXN0KSk7CiAgICAgICAgICAgIGFkZE1lc3NhZ2UoJ1NlbnQgc3luYyByZXF1ZXN0Jyk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBOb3cgY29ubmVjdCBkb3duIHNvY2tldAogICAgICAgICAgICBjb25uZWN0RG93blNvY2tldChjb25uSWQpOwogICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09ICdzeW5jJyAmJiBtZXNzYWdlLmRhdGEpIHsKICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGF0YS5lbnRpdGllcykgewogICAgICAgICAgICAgIGFkZE1lc3NhZ2UoYFJlY2VpdmVkICR7bWVzc2FnZS5kYXRhLmVudGl0aWVzLmxlbmd0aH0gZW50aXRpZXMgZnJvbSBzeW5jYCk7CiAgICAgICAgICAgICAgLy8gRmlsdGVyIGZvciBNYXBUaWxlIGVudGl0aWVzCiAgICAgICAgICAgICAgY29uc3QgbWFwVGlsZXMgPSBtZXNzYWdlLmRhdGEuZW50aXRpZXMuZmlsdGVyKChlOiBhbnkpID0+IGUudHlwZSA9PT0gJ01hcFRpbGUnKTsKICAgICAgICAgICAgICBzZXRNYXBEYXRhKG1hcFRpbGVzKTsKICAgICAgICAgICAgICBhZGRNZXNzYWdlKGBGb3VuZCAke21hcFRpbGVzLmxlbmd0aH0gbWFwIHRpbGVzYCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBhZGRNZXNzYWdlKGBFcnJvciBwYXJzaW5nIHVwIHNvY2tldCBtZXNzYWdlOiAke2UgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB3cy5vbmNsb3NlID0gKCkgPT4gewogICAgICAgIGFkZE1lc3NhZ2UoJ1VwIHNvY2tldCBjbG9zZWQnKTsKICAgICAgICBzZXRDb25uZWN0aW9uU3RhdHVzKCdkaXNjb25uZWN0ZWQnKTsKICAgICAgICBzZXRVcFNvY2tldChudWxsKTsKICAgICAgfTsKCiAgICAgIHdzLm9uZXJyb3IgPSAoZXJyb3IpID0+IHsKICAgICAgICBhZGRNZXNzYWdlKGBVcCBzb2NrZXQgZXJyb3I6ICR7ZXJyb3J9YCk7CiAgICAgIH07CgogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgYWRkTWVzc2FnZShgRmFpbGVkIHRvIGNvbm5lY3QgdXAgc29ja2V0OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApOwogICAgfQogIH07CgogIGNvbnN0IGNvbm5lY3REb3duU29ja2V0ID0gYXN5bmMgKGNvbm5JZDogc3RyaW5nKSA9PiB7CiAgICB0cnkgewogICAgICBhZGRNZXNzYWdlKCdDb25uZWN0aW5nIHRvIGRvd24gc29ja2V0Li4uJyk7CiAgICAgIGNvbnN0IHdzID0gbmV3IFdlYlNvY2tldCgnd3M6Ly9sb2NhbGhvc3Q6NDIyNi91cGRhdGUnKTsKICAgICAgCiAgICAgIHdzLm9ub3BlbiA9ICgpID0+IHsKICAgICAgICBhZGRNZXNzYWdlKCdDb25uZWN0ZWQgdG8gZG93biBzb2NrZXQnKTsKICAgICAgICBzZXREb3duU29ja2V0KHdzKTsKICAgICAgICBzZXRDb25uZWN0aW9uU3RhdHVzKCdmdWxseS1jb25uZWN0ZWQnKTsKICAgICAgICAKICAgICAgICAvLyBTZW5kIGNvbm5lY3Rpb24gSUQKICAgICAgICBjb25zdCBjb25uZWN0aW9uTWVzc2FnZSA9IHsgY29ubmVjdGlvbklkOiBjb25uSWQgfTsKICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KGNvbm5lY3Rpb25NZXNzYWdlKSk7CiAgICAgICAgYWRkTWVzc2FnZSgnU2VudCBjb25uZWN0aW9uIElEIHRvIGRvd24gc29ja2V0Jyk7CiAgICAgIH07CgogICAgICB3cy5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgICAgICBhZGRNZXNzYWdlKGBET1dOOiAke0pTT04uc3RyaW5naWZ5KG1lc3NhZ2UpfWApOwogICAgICAgICAgCiAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSAnZG93bl9zb2NrZXRfY29uZmlybScpIHsKICAgICAgICAgICAgYWRkTWVzc2FnZSgnRG93biBzb2NrZXQgY29uZmlybWVkJyk7CiAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ3VwZGF0ZV9iYXRjaCcgJiYgbWVzc2FnZS51cGRhdGVzKSB7CiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUNvdW50ID0gT2JqZWN0LmtleXMobWVzc2FnZS51cGRhdGVzKS5sZW5ndGg7CiAgICAgICAgICAgIGFkZE1lc3NhZ2UoYFJlY2VpdmVkIGJhdGNoIHVwZGF0ZSB3aXRoICR7dXBkYXRlQ291bnR9IGVudGl0aWVzYCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBVcGRhdGUgbWFwIGRhdGEgd2l0aCBhbnkgTWFwVGlsZSB1cGRhdGVzCiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMobWVzc2FnZS51cGRhdGVzKS5mb3JFYWNoKCh1cGRhdGU6IGFueSkgPT4gewogICAgICAgICAgICAgIGlmICh1cGRhdGUudHlwZSA9PT0gJ01hcFRpbGUnKSB7CiAgICAgICAgICAgICAgICBzZXRNYXBEYXRhKHByZXYgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBuZXdEYXRhID0gWy4uLnByZXZdOwogICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IG5ld0RhdGEuZmluZEluZGV4KHRpbGUgPT4gdGlsZS5faWQgPT09IHVwZGF0ZS5faWQpOwogICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkgewogICAgICAgICAgICAgICAgICAgIG5ld0RhdGFbaW5kZXhdID0gdXBkYXRlOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG5ld0RhdGEucHVzaCh1cGRhdGUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdEYXRhOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBhZGRNZXNzYWdlKGBFcnJvciBwYXJzaW5nIGRvd24gc29ja2V0IG1lc3NhZ2U6ICR7ZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHdzLm9uY2xvc2UgPSAoKSA9PiB7CiAgICAgICAgYWRkTWVzc2FnZSgnRG93biBzb2NrZXQgY2xvc2VkJyk7CiAgICAgICAgc2V0Q29ubmVjdGlvblN0YXR1cygnY29ubmVjdGVkLXVwJyk7CiAgICAgICAgc2V0RG93blNvY2tldChudWxsKTsKICAgICAgfTsKCiAgICAgIHdzLm9uZXJyb3IgPSAoZXJyb3IpID0+IHsKICAgICAgICBhZGRNZXNzYWdlKGBEb3duIHNvY2tldCBlcnJvcjogJHtlcnJvcn1gKTsKICAgICAgfTsKCiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBhZGRNZXNzYWdlKGBGYWlsZWQgdG8gY29ubmVjdCBkb3duIHNvY2tldDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTsKICAgIH0KICB9OwoKICAvLyBBdXRvLWNvbm5lY3Qgb24gbW91bnQKICB1c2VFZmZlY3QoKCkgPT4gewogICAgY29ubmVjdFVwU29ja2V0KCk7CiAgfSwgW10pOwoKICByZXR1cm4gKAogICAgPGRpdiBjbGFzc05hbWU9Imgtc2NyZWVuIHctc2NyZWVuIGJnLWdyYXktOTAwIGZsZXggZmxleC1jb2wiPgogICAgICB7LyogRGVidWcgTWVzc2FnZXMgLSBpbmxpbmUgb24gcGFnZSAqL30KICAgICAgPGRpdiBjbGFzc05hbWU9InAtMiI+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtZ3JlZW4tNDAwIGZvbnQtbW9ubyB0ZXh0LXhzIG1iLTEiPgogICAgICAgICAgU3RhdHVzOiB7Y29ubmVjdGlvblN0YXR1c30KICAgICAgICA8L2Rpdj4KICAgICAgICB7bWVzc2FnZXMuc2xpY2UoLTUpLm1hcCgobXNnLCBpbmRleCkgPT4gKAogICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9InRleHQtZ3JlZW4tNDAwIGZvbnQtbW9ubyB0ZXh0LXhzIGxlYWRpbmctdGlnaHQgb3BhY2l0eS02MCI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1ncmF5LTUwMCI+e21zZy50aW1lc3RhbXB9PC9zcGFuPiB7bXNnLm1lc3NhZ2V9CiAgICAgICAgICA8L2Rpdj4KICAgICAgICApKX0KICAgICAgPC9kaXY+CgogICAgICB7LyogR2FtZSBNYXAgKi99CiAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LTEiPgogICAgICAgIHtjb25uZWN0aW9uU3RhdHVzID09PSAnZnVsbHktY29ubmVjdGVkJyAmJiAoCiAgICAgICAgICA8R2FtZU1hcCBtYXBEYXRhPXttYXBEYXRhfSAvPgogICAgICAgICl9CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfTsKCi8vIFBsYWNlaG9sZGVyIEdhbWVNYXAgY29tcG9uZW50CmNvbnN0IEdhbWVNYXAgPSAoeyBtYXBEYXRhIH06IHsgbWFwRGF0YTogTWFwVGlsZVtdIH0pID0+IHsKICByZXR1cm4gKAogICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBoLWZ1bGwgYmctZ3JheS04MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIiPgogICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC13aGl0ZSBmb250LW1vbm8iPgogICAgICAgIDxkaXY+TWFwIGxvYWRlZCB3aXRoIHttYXBEYXRhLmxlbmd0aH0gdGlsZXM8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWdyYXktNDAwIG10LTIiPgogICAgICAgICAgQ2FudmFzIHJlbmRlcmluZyB3aWxsIGdvIGhlcmUKICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9OwoKZXhwb3J0IGRlZmF1bHQgR2FtZUFyZWE7",
					"BAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvwAAAAABAAAAAAAAAAAAAACcGQAAAAAAAAAAAAAAAPC/"
				],
				[
					4,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAQhoAAAAAAAAAAAAAQhoAAAAAAABCGgAAAAAAAG4bAABpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7CgppbnRlcmZhY2UgTG9nTWVzc2FnZSB7CiAgdGltZXN0YW1wOiBzdHJpbmc7CiAgbWVzc2FnZTogc3RyaW5nOwp9CgppbnRlcmZhY2UgTWFwVGlsZSB7CiAgX2lkOiBzdHJpbmc7CiAgdHlwZTogc3RyaW5nOwogIFtrZXk6IHN0cmluZ106IGFueTsKfQoKY29uc3QgR2FtZUFyZWEgPSAoKSA9PiB7CiAgY29uc3QgW2Nvbm5lY3Rpb25TdGF0dXMsIHNldENvbm5lY3Rpb25TdGF0dXNdID0gdXNlU3RhdGUoJ2Rpc2Nvbm5lY3RlZCcpOwogIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TG9nTWVzc2FnZVtdPihbXSk7CiAgY29uc3QgW2Nvbm5lY3Rpb25JZCwgc2V0Q29ubmVjdGlvbklkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpOwogIGNvbnN0IFt1cFNvY2tldCwgc2V0VXBTb2NrZXRdID0gdXNlU3RhdGU8V2ViU29ja2V0IHwgbnVsbD4obnVsbCk7CiAgY29uc3QgW2Rvd25Tb2NrZXQsIHNldERvd25Tb2NrZXRdID0gdXNlU3RhdGU8V2ViU29ja2V0IHwgbnVsbD4obnVsbCk7CiAgY29uc3QgW21hcERhdGEsIHNldE1hcERhdGFdID0gdXNlU3RhdGU8TWFwVGlsZVtdPihbXSk7CgogIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTsKCiAgY29uc3Qgc2Nyb2xsVG9Cb3R0b20gPSAoKSA9PiB7CiAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAic21vb3RoIiB9KTsKICB9OwoKICB1c2VFZmZlY3QoKCkgPT4gewogICAgc2Nyb2xsVG9Cb3R0b20oKTsKICB9LCBbbWVzc2FnZXNdKTsKCiAgY29uc3QgYWRkTWVzc2FnZSA9IChtZXNzYWdlOiBzdHJpbmcpID0+IHsKICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7CiAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LnNsaWNlKC0xOSksIHsgdGltZXN0YW1wLCBtZXNzYWdlIH1dKTsgLy8gS2VlcCBsYXN0IDIwIG1lc3NhZ2VzCiAgfTsKCiAgY29uc3QgY29ubmVjdFVwU29ja2V0ID0gYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgYWRkTWVzc2FnZSgnQ29ubmVjdGluZyB0byB1cCBzb2NrZXQuLi4nKTsKICAgICAgLy8gQ29ubmVjdCB0byB0aGUgSFRUUCBlbmRwb2ludCB0aGF0IGdldHMgdXBncmFkZWQgdG8gV2ViU29ja2V0CiAgICAgIGNvbnN0IHdzID0gbmV3IFdlYlNvY2tldCgnd3M6Ly9sb2NhbGhvc3Q6NDIyNS9jb21tYW5kJyk7CiAgICAgIAogICAgICB3cy5vbm9wZW4gPSAoKSA9PiB7CiAgICAgICAgYWRkTWVzc2FnZSgnQ29ubmVjdGVkIHRvIHVwIHNvY2tldCcpOwogICAgICAgIHNldFVwU29ja2V0KHdzKTsKICAgICAgICBzZXRDb25uZWN0aW9uU3RhdHVzKCdjb25uZWN0ZWQtdXAnKTsKICAgICAgfTsKCiAgICAgIHdzLm9ubWVzc2FnZSA9IChldmVudCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTsKICAgICAgICAgIGFkZE1lc3NhZ2UoYFVQOiAke0pTT04uc3RyaW5naWZ5KG1lc3NhZ2UpfWApOwogICAgICAgICAgCiAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSAnY29ubmVjdGlvbl9jb25maXJtJykgewogICAgICAgICAgICBjb25zdCBjb25uSWQgPSBtZXNzYWdlLmNvbm5lY3Rpb25JZDsKICAgICAgICAgICAgc2V0Q29ubmVjdGlvbklkKGNvbm5JZCk7CiAgICAgICAgICAgIGFkZE1lc3NhZ2UoYEdvdCBjb25uZWN0aW9uIElEOiAke2Nvbm5JZH1gKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFNlbmQgc3luYyByZXF1ZXN0CiAgICAgICAgICAgIGNvbnN0IHN5bmNSZXF1ZXN0ID0gewogICAgICAgICAgICAgIGNvbW1hbmQ6ICJzeW5jIiwKICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShzeW5jUmVxdWVzdCkpOwogICAgICAgICAgICBhZGRNZXNzYWdlKCdTZW50IHN5bmMgcmVxdWVzdCcpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gTm93IGNvbm5lY3QgZG93biBzb2NrZXQKICAgICAgICAgICAgY29ubmVjdERvd25Tb2NrZXQoY29ubklkKTsKICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSAnc3luYycgJiYgbWVzc2FnZS5kYXRhKSB7CiAgICAgICAgICAgIGlmIChtZXNzYWdlLmRhdGEuZW50aXRpZXMpIHsKICAgICAgICAgICAgICBhZGRNZXNzYWdlKGBSZWNlaXZlZCAke21lc3NhZ2UuZGF0YS5lbnRpdGllcy5sZW5ndGh9IGVudGl0aWVzIGZyb20gc3luY2ApOwogICAgICAgICAgICAgIC8vIEZpbHRlciBmb3IgTWFwVGlsZSBlbnRpdGllcwogICAgICAgICAgICAgIGNvbnN0IG1hcFRpbGVzID0gbWVzc2FnZS5kYXRhLmVudGl0aWVzLmZpbHRlcigoZTogYW55KSA9PiBlLnR5cGUgPT09ICdNYXBUaWxlJyk7CiAgICAgICAgICAgICAgc2V0TWFwRGF0YShtYXBUaWxlcyk7CiAgICAgICAgICAgICAgYWRkTWVzc2FnZShgRm91bmQgJHttYXBUaWxlcy5sZW5ndGh9IG1hcCB0aWxlc2ApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgYWRkTWVzc2FnZShgRXJyb3IgcGFyc2luZyB1cCBzb2NrZXQgbWVzc2FnZTogJHtlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgd3Mub25jbG9zZSA9ICgpID0+IHsKICAgICAgICBhZGRNZXNzYWdlKCdVcCBzb2NrZXQgY2xvc2VkJyk7CiAgICAgICAgc2V0Q29ubmVjdGlvblN0YXR1cygnZGlzY29ubmVjdGVkJyk7CiAgICAgICAgc2V0VXBTb2NrZXQobnVsbCk7CiAgICAgIH07CgogICAgICB3cy5vbmVycm9yID0gKGVycm9yKSA9PiB7CiAgICAgICAgYWRkTWVzc2FnZShgVXAgc29ja2V0IGVycm9yOiAke2Vycm9yfWApOwogICAgICB9OwoKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGFkZE1lc3NhZ2UoYEZhaWxlZCB0byBjb25uZWN0IHVwIHNvY2tldDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTsKICAgIH0KICB9OwoKICBjb25zdCBjb25uZWN0RG93blNvY2tldCA9IGFzeW5jIChjb25uSWQ6IHN0cmluZykgPT4gewogICAgdHJ5IHsKICAgICAgYWRkTWVzc2FnZSgnQ29ubmVjdGluZyB0byBkb3duIHNvY2tldC4uLicpOwogICAgICAvLyBDb25uZWN0IHRvIHRoZSBIVFRQIGVuZHBvaW50IHRoYXQgZ2V0cyB1cGdyYWRlZCB0byBXZWJTb2NrZXQgIAogICAgICBjb25zdCB3cyA9IG5ldyBXZWJTb2NrZXQoJ3dzOi8vbG9jYWxob3N0OjQyMjYvdXBkYXRlJyk7CiAgICAgIAogICAgICB3cy5vbm9wZW4gPSAoKSA9PiB7CiAgICAgICAgYWRkTWVzc2FnZSgnQ29ubmVjdGVkIHRvIGRvd24gc29ja2V0Jyk7CiAgICAgICAgc2V0RG93blNvY2tldCh3cyk7CiAgICAgICAgc2V0Q29ubmVjdGlvblN0YXR1cygnZnVsbHktY29ubmVjdGVkJyk7CiAgICAgICAgCiAgICAgICAgLy8gU2VuZCBjb25uZWN0aW9uIElECiAgICAgICAgY29uc3QgY29ubmVjdGlvbk1lc3NhZ2UgPSB7IGNvbm5lY3Rpb25JZDogY29ubklkIH07CiAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShjb25uZWN0aW9uTWVzc2FnZSkpOwogICAgICAgIGFkZE1lc3NhZ2UoJ1NlbnQgY29ubmVjdGlvbiBJRCB0byBkb3duIHNvY2tldCcpOwogICAgICB9OwoKICAgICAgd3Mub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpOwogICAgICAgICAgYWRkTWVzc2FnZShgRE9XTjogJHtKU09OLnN0cmluZ2lmeShtZXNzYWdlKX1gKTsKICAgICAgICAgIAogICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ2Rvd25fc29ja2V0X2NvbmZpcm0nKSB7CiAgICAgICAgICAgIGFkZE1lc3NhZ2UoJ0Rvd24gc29ja2V0IGNvbmZpcm1lZCcpOwogICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09ICd1cGRhdGVfYmF0Y2gnICYmIG1lc3NhZ2UudXBkYXRlcykgewogICAgICAgICAgICBjb25zdCB1cGRhdGVDb3VudCA9IE9iamVjdC5rZXlzKG1lc3NhZ2UudXBkYXRlcykubGVuZ3RoOwogICAgICAgICAgICBhZGRNZXNzYWdlKGBSZWNlaXZlZCBiYXRjaCB1cGRhdGUgd2l0aCAke3VwZGF0ZUNvdW50fSBlbnRpdGllc2ApOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gVXBkYXRlIG1hcCBkYXRhIHdpdGggYW55IE1hcFRpbGUgdXBkYXRlcwogICAgICAgICAgICBPYmplY3QudmFsdWVzKG1lc3NhZ2UudXBkYXRlcykuZm9yRWFjaCgodXBkYXRlOiBhbnkpID0+IHsKICAgICAgICAgICAgICBpZiAodXBkYXRlLnR5cGUgPT09ICdNYXBUaWxlJykgewogICAgICAgICAgICAgICAgc2V0TWFwRGF0YShwcmV2ID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RGF0YSA9IFsuLi5wcmV2XTsKICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBuZXdEYXRhLmZpbmRJbmRleCh0aWxlID0+IHRpbGUuX2lkID09PSB1cGRhdGUuX2lkKTsKICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHsKICAgICAgICAgICAgICAgICAgICBuZXdEYXRhW2luZGV4XSA9IHVwZGF0ZTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBuZXdEYXRhLnB1c2godXBkYXRlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXR1cm4gbmV3RGF0YTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgYWRkTWVzc2FnZShgRXJyb3IgcGFyc2luZyBkb3duIHNvY2tldCBtZXNzYWdlOiAke2UgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB3cy5vbmNsb3NlID0gKCkgPT4gewogICAgICAgIGFkZE1lc3NhZ2UoJ0Rvd24gc29ja2V0IGNsb3NlZCcpOwogICAgICAgIHNldENvbm5lY3Rpb25TdGF0dXMoJ2Nvbm5lY3RlZC11cCcpOwogICAgICAgIHNldERvd25Tb2NrZXQobnVsbCk7CiAgICAgIH07CgogICAgICB3cy5vbmVycm9yID0gKGVycm9yKSA9PiB7CiAgICAgICAgYWRkTWVzc2FnZShgRG93biBzb2NrZXQgZXJyb3I6ICR7ZXJyb3J9YCk7CiAgICAgIH07CgogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgYWRkTWVzc2FnZShgRmFpbGVkIHRvIGNvbm5lY3QgZG93biBzb2NrZXQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7CiAgICB9CiAgfTsKCiAgLy8gQXV0by1jb25uZWN0IG9uIG1vdW50CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGxldCBjYW5jZWxsZWQgPSBmYWxzZTsKICAgIAogICAgY29uc3QgY29ubmVjdCA9IGFzeW5jICgpID0+IHsKICAgICAgaWYgKCFjYW5jZWxsZWQpIHsKICAgICAgICBjb25uZWN0VXBTb2NrZXQoKTsKICAgICAgfQogICAgfTsKICAgIAogICAgY29ubmVjdCgpOwogICAgCiAgICAvLyBDbGVhbnVwIGZ1bmN0aW9uCiAgICByZXR1cm4gKCkgPT4gewogICAgICBjYW5jZWxsZWQgPSB0cnVlOwogICAgICBpZiAodXBTb2NrZXQpIHsKICAgICAgICB1cFNvY2tldC5jbG9zZSgpOwogICAgICB9CiAgICAgIGlmIChkb3duU29ja2V0KSB7CiAgICAgICAgZG93blNvY2tldC5jbG9zZSgpOwogICAgICB9CiAgICB9OwogIH0sIFtdKTsKCiAgcmV0dXJuICgKICAgIDxkaXYgY2xhc3NOYW1lPSJoLXNjcmVlbiB3LXNjcmVlbiBiZy1ncmF5LTkwMCBmbGV4IGZsZXgtY29sIj4KICAgICAgey8qIERlYnVnIE1lc3NhZ2VzIC0gaW5saW5lIG9uIHBhZ2UgKi99CiAgICAgIDxkaXYgY2xhc3NOYW1lPSJwLTIiPgogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWdyZWVuLTQwMCBmb250LW1vbm8gdGV4dC14cyBtYi0xIj4KICAgICAgICAgIFN0YXR1czoge2Nvbm5lY3Rpb25TdGF0dXN9CiAgICAgICAgPC9kaXY+CiAgICAgICAge21lc3NhZ2VzLnNsaWNlKC01KS5tYXAoKG1zZywgaW5kZXgpID0+ICgKICAgICAgICAgIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPSJ0ZXh0LWdyZWVuLTQwMCBmb250LW1vbm8gdGV4dC14cyBsZWFkaW5nLXRpZ2h0IG9wYWNpdHktNjAiPgogICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtZ3JheS01MDAiPnttc2cudGltZXN0YW1wfTwvc3Bhbj4ge21zZy5tZXNzYWdlfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgKSl9CiAgICAgIDwvZGl2PgoKICAgICAgey8qIEdhbWUgTWFwICovfQogICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIj4KICAgICAgICB7Y29ubmVjdGlvblN0YXR1cyA9PT0gJ2Z1bGx5LWNvbm5lY3RlZCcgJiYgKAogICAgICAgICAgPEdhbWVNYXAgbWFwRGF0YT17bWFwRGF0YX0gLz4KICAgICAgICApfQogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn07CgovLyBQbGFjZWhvbGRlciBHYW1lTWFwIGNvbXBvbmVudApjb25zdCBHYW1lTWFwID0gKHsgbWFwRGF0YSB9OiB7IG1hcERhdGE6IE1hcFRpbGVbXSB9KSA9PiB7CiAgcmV0dXJuICgKICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgaC1mdWxsIGJnLWdyYXktODAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIj4KICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtd2hpdGUgZm9udC1tb25vIj4KICAgICAgICA8ZGl2Pk1hcCBsb2FkZWQgd2l0aCB7bWFwRGF0YS5sZW5ndGh9IHRpbGVzPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtc20gdGV4dC1ncmF5LTQwMCBtdC0yIj4KICAgICAgICAgIENhbnZhcyByZW5kZXJpbmcgd2lsbCBnbyBoZXJlCiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfTsKCmV4cG9ydCBkZWZhdWx0IEdhbWVBcmVhOw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAbhsAAAAAAAAAAAAAAADwvw"
				],
				[
					8,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAArxoAAAAAAAAAAAAArxoAAAAAAACvGgAAAAAAAEIaAABpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7CmltcG9ydCBHYW1lTWFwIGZyb20gJy4vR2FtZU1hcCc7CgppbnRlcmZhY2UgTG9nTWVzc2FnZSB7CiAgdGltZXN0YW1wOiBzdHJpbmc7CiAgbWVzc2FnZTogc3RyaW5nOwp9CgppbnRlcmZhY2UgTWFwWm9uZSB7CiAgX2lkOiBzdHJpbmc7CiAgdHlwZTogc3RyaW5nOwogIHN0YXRlPzogewogICAgeD86IG51bWJlcjsKICAgIHk/OiBudW1iZXI7CiAgICB0ZXJyYWluPzogc3RyaW5nOwogICAgW2tleTogc3RyaW5nXTogYW55OwogIH07CiAgW2tleTogc3RyaW5nXTogYW55Owp9Cgpjb25zdCBHYW1lQXJlYSA9ICgpID0+IHsKICBjb25zdCBbY29ubmVjdGlvblN0YXR1cywgc2V0Q29ubmVjdGlvblN0YXR1c10gPSB1c2VTdGF0ZSgnZGlzY29ubmVjdGVkJyk7CiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxMb2dNZXNzYWdlW10+KFtdKTsKICBjb25zdCBbY29ubmVjdGlvbklkLCBzZXRDb25uZWN0aW9uSWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7CiAgY29uc3QgW3VwU29ja2V0LCBzZXRVcFNvY2tldF0gPSB1c2VTdGF0ZTxXZWJTb2NrZXQgfCBudWxsPihudWxsKTsKICBjb25zdCBbZG93blNvY2tldCwgc2V0RG93blNvY2tldF0gPSB1c2VTdGF0ZTxXZWJTb2NrZXQgfCBudWxsPihudWxsKTsKICBjb25zdCBbbWFwRGF0YSwgc2V0TWFwRGF0YV0gPSB1c2VTdGF0ZTxNYXBab25lW10+KFtdKTsKCiAgY29uc3QgbWVzc2FnZXNFbmRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpOwoKICBjb25zdCBzY3JvbGxUb0JvdHRvbSA9ICgpID0+IHsKICAgIG1lc3NhZ2VzRW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICJzbW9vdGgiIH0pOwogIH07CgogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBzY3JvbGxUb0JvdHRvbSgpOwogIH0sIFttZXNzYWdlc10pOwoKICBjb25zdCBhZGRNZXNzYWdlID0gKG1lc3NhZ2U6IHN0cmluZykgPT4gewogICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKTsKICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYuc2xpY2UoLTE5KSwgeyB0aW1lc3RhbXAsIG1lc3NhZ2UgfV0pOyAvLyBLZWVwIGxhc3QgMjAgbWVzc2FnZXMKICB9OwoKICBjb25zdCBjb25uZWN0VXBTb2NrZXQgPSBhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICBhZGRNZXNzYWdlKCdDb25uZWN0aW5nIHRvIHVwIHNvY2tldC4uLicpOwogICAgICAvLyBDb25uZWN0IHRvIHRoZSBIVFRQIGVuZHBvaW50IHRoYXQgZ2V0cyB1cGdyYWRlZCB0byBXZWJTb2NrZXQKICAgICAgY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KCd3czovL2xvY2FsaG9zdDo0MjI1L2NvbW1hbmQnKTsKICAgICAgCiAgICAgIHdzLm9ub3BlbiA9ICgpID0+IHsKICAgICAgICBhZGRNZXNzYWdlKCdDb25uZWN0ZWQgdG8gdXAgc29ja2V0Jyk7CiAgICAgICAgc2V0VXBTb2NrZXQod3MpOwogICAgICAgIHNldENvbm5lY3Rpb25TdGF0dXMoJ2Nvbm5lY3RlZC11cCcpOwogICAgICB9OwoKICAgICAgd3Mub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpOwogICAgICAgICAgYWRkTWVzc2FnZShgVVA6ICR7SlNPTi5zdHJpbmdpZnkobWVzc2FnZSl9YCk7CiAgICAgICAgICAKICAgICAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09ICdjb25uZWN0aW9uX2NvbmZpcm0nKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbm5JZCA9IG1lc3NhZ2UuY29ubmVjdGlvbklkOwogICAgICAgICAgICBzZXRDb25uZWN0aW9uSWQoY29ubklkKTsKICAgICAgICAgICAgYWRkTWVzc2FnZShgR290IGNvbm5lY3Rpb24gSUQ6ICR7Y29ubklkfWApOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gU2VuZCBzeW5jIHJlcXVlc3QKICAgICAgICAgICAgY29uc3Qgc3luY1JlcXVlc3QgPSB7CiAgICAgICAgICAgICAgY29tbWFuZDogInN5bmMiLAogICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKQogICAgICAgICAgICB9OwogICAgICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHN5bmNSZXF1ZXN0KSk7CiAgICAgICAgICAgIGFkZE1lc3NhZ2UoJ1NlbnQgc3luYyByZXF1ZXN0Jyk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBOb3cgY29ubmVjdCBkb3duIHNvY2tldAogICAgICAgICAgICBjb25uZWN0RG93blNvY2tldChjb25uSWQpOwogICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09ICdzeW5jJyAmJiBtZXNzYWdlLmRhdGEpIHsKICAgICAgICAgICAgaWYgKG1lc3NhZ2UuZGF0YS5lbnRpdGllcykgewogICAgICAgICAgICAgIGFkZE1lc3NhZ2UoYFJlY2VpdmVkICR7bWVzc2FnZS5kYXRhLmVudGl0aWVzLmxlbmd0aH0gZW50aXRpZXMgZnJvbSBzeW5jYCk7CiAgICAgICAgICAgICAgLy8gRmlsdGVyIGZvciBNYXBab25lIGVudGl0aWVzCiAgICAgICAgICAgICAgY29uc3QgbWFwWm9uZXMgPSBtZXNzYWdlLmRhdGEuZW50aXRpZXMuZmlsdGVyKChlOiBhbnkpID0+IGUudHlwZSA9PT0gJ01hcFpvbmUnKTsKICAgICAgICAgICAgICBzZXRNYXBEYXRhKG1hcFpvbmVzKTsKICAgICAgICAgICAgICBhZGRNZXNzYWdlKGBGb3VuZCAke21hcFpvbmVzLmxlbmd0aH0gbWFwIHpvbmVzYCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBhZGRNZXNzYWdlKGBFcnJvciBwYXJzaW5nIHVwIHNvY2tldCBtZXNzYWdlOiAke2UgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB3cy5vbmNsb3NlID0gKCkgPT4gewogICAgICAgIGFkZE1lc3NhZ2UoJ1VwIHNvY2tldCBjbG9zZWQnKTsKICAgICAgICBzZXRDb25uZWN0aW9uU3RhdHVzKCdkaXNjb25uZWN0ZWQnKTsKICAgICAgICBzZXRVcFNvY2tldChudWxsKTsKICAgICAgfTsKCiAgICAgIHdzLm9uZXJyb3IgPSAoZXJyb3IpID0+IHsKICAgICAgICBhZGRNZXNzYWdlKGBVcCBzb2NrZXQgZXJyb3I6ICR7ZXJyb3J9YCk7CiAgICAgIH07CgogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgYWRkTWVzc2FnZShgRmFpbGVkIHRvIGNvbm5lY3QgdXAgc29ja2V0OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApOwogICAgfQogIH07CgogIGNvbnN0IGNvbm5lY3REb3duU29ja2V0ID0gYXN5bmMgKGNvbm5JZDogc3RyaW5nKSA9PiB7CiAgICB0cnkgewogICAgICBhZGRNZXNzYWdlKCdDb25uZWN0aW5nIHRvIGRvd24gc29ja2V0Li4uJyk7CiAgICAgIC8vIENvbm5lY3QgdG8gdGhlIEhUVFAgZW5kcG9pbnQgdGhhdCBnZXRzIHVwZ3JhZGVkIHRvIFdlYlNvY2tldCAgCiAgICAgIGNvbnN0IHdzID0gbmV3IFdlYlNvY2tldCgnd3M6Ly9sb2NhbGhvc3Q6NDIyNi91cGRhdGUnKTsKICAgICAgCiAgICAgIHdzLm9ub3BlbiA9ICgpID0+IHsKICAgICAgICBhZGRNZXNzYWdlKCdDb25uZWN0ZWQgdG8gZG93biBzb2NrZXQnKTsKICAgICAgICBzZXREb3duU29ja2V0KHdzKTsKICAgICAgICBzZXRDb25uZWN0aW9uU3RhdHVzKCdmdWxseS1jb25uZWN0ZWQnKTsKICAgICAgICAKICAgICAgICAvLyBTZW5kIGNvbm5lY3Rpb24gSUQKICAgICAgICBjb25zdCBjb25uZWN0aW9uTWVzc2FnZSA9IHsgY29ubmVjdGlvbklkOiBjb25uSWQgfTsKICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KGNvbm5lY3Rpb25NZXNzYWdlKSk7CiAgICAgICAgYWRkTWVzc2FnZSgnU2VudCBjb25uZWN0aW9uIElEIHRvIGRvd24gc29ja2V0Jyk7CiAgICAgIH07CgogICAgICB3cy5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgICAgICBhZGRNZXNzYWdlKGBET1dOOiAke0pTT04uc3RyaW5naWZ5KG1lc3NhZ2UpfWApOwogICAgICAgICAgCiAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSAnZG93bl9zb2NrZXRfY29uZmlybScpIHsKICAgICAgICAgICAgYWRkTWVzc2FnZSgnRG93biBzb2NrZXQgY29uZmlybWVkJyk7CiAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ3VwZGF0ZV9iYXRjaCcgJiYgbWVzc2FnZS51cGRhdGVzKSB7CiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUNvdW50ID0gT2JqZWN0LmtleXMobWVzc2FnZS51cGRhdGVzKS5sZW5ndGg7CiAgICAgICAgICAgIGFkZE1lc3NhZ2UoYFJlY2VpdmVkIGJhdGNoIHVwZGF0ZSB3aXRoICR7dXBkYXRlQ291bnR9IGVudGl0aWVzYCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBVcGRhdGUgbWFwIGRhdGEgd2l0aCBhbnkgTWFwWm9uZSB1cGRhdGVzCiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMobWVzc2FnZS51cGRhdGVzKS5mb3JFYWNoKCh1cGRhdGU6IGFueSkgPT4gewogICAgICAgICAgICAgIGlmICh1cGRhdGUudHlwZSA9PT0gJ01hcFpvbmUnKSB7CiAgICAgICAgICAgICAgICBzZXRNYXBEYXRhKHByZXYgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBuZXdEYXRhID0gWy4uLnByZXZdOwogICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IG5ld0RhdGEuZmluZEluZGV4KHpvbmUgPT4gem9uZS5faWQgPT09IHVwZGF0ZS5faWQpOwogICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkgewogICAgICAgICAgICAgICAgICAgIG5ld0RhdGFbaW5kZXhdID0gdXBkYXRlOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG5ld0RhdGEucHVzaCh1cGRhdGUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdEYXRhOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBhZGRNZXNzYWdlKGBFcnJvciBwYXJzaW5nIGRvd24gc29ja2V0IG1lc3NhZ2U6ICR7ZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHdzLm9uY2xvc2UgPSAoKSA9PiB7CiAgICAgICAgYWRkTWVzc2FnZSgnRG93biBzb2NrZXQgY2xvc2VkJyk7CiAgICAgICAgc2V0Q29ubmVjdGlvblN0YXR1cygnY29ubmVjdGVkLXVwJyk7CiAgICAgICAgc2V0RG93blNvY2tldChudWxsKTsKICAgICAgfTsKCiAgICAgIHdzLm9uZXJyb3IgPSAoZXJyb3IpID0+IHsKICAgICAgICBhZGRNZXNzYWdlKGBEb3duIHNvY2tldCBlcnJvcjogJHtlcnJvcn1gKTsKICAgICAgfTsKCiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBhZGRNZXNzYWdlKGBGYWlsZWQgdG8gY29ubmVjdCBkb3duIHNvY2tldDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTsKICAgIH0KICB9OwoKICAvLyBBdXRvLWNvbm5lY3Qgb24gbW91bnQKICB1c2VFZmZlY3QoKCkgPT4gewogICAgbGV0IGNhbmNlbGxlZCA9IGZhbHNlOwogICAgCiAgICBjb25zdCBjb25uZWN0ID0gYXN5bmMgKCkgPT4gewogICAgICBpZiAoIWNhbmNlbGxlZCkgewogICAgICAgIGNvbm5lY3RVcFNvY2tldCgpOwogICAgICB9CiAgICB9OwogICAgCiAgICBjb25uZWN0KCk7CiAgICAKICAgIC8vIENsZWFudXAgZnVuY3Rpb24KICAgIHJldHVybiAoKSA9PiB7CiAgICAgIGNhbmNlbGxlZCA9IHRydWU7CiAgICAgIGlmICh1cFNvY2tldCkgewogICAgICAgIHVwU29ja2V0LmNsb3NlKCk7CiAgICAgIH0KICAgICAgaWYgKGRvd25Tb2NrZXQpIHsKICAgICAgICBkb3duU29ja2V0LmNsb3NlKCk7CiAgICAgIH0KICAgIH07CiAgfSwgW10pOwoKICByZXR1cm4gKAogICAgPGRpdiBjbGFzc05hbWU9Imgtc2NyZWVuIHctc2NyZWVuIGJnLWdyYXktOTAwIGZsZXggZmxleC1jb2wiPgogICAgICB7LyogRGVidWcgTWVzc2FnZXMgLSBpbmxpbmUgb24gcGFnZSAqL30KICAgICAgPGRpdiBjbGFzc05hbWU9InAtMiI+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtZ3JlZW4tNDAwIGZvbnQtbW9ubyB0ZXh0LXhzIG1iLTEiPgogICAgICAgICAgU3RhdHVzOiB7Y29ubmVjdGlvblN0YXR1c30KICAgICAgICA8L2Rpdj4KICAgICAgICB7bWVzc2FnZXMuc2xpY2UoLTUpLm1hcCgobXNnLCBpbmRleCkgPT4gKAogICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9InRleHQtZ3JlZW4tNDAwIGZvbnQtbW9ubyB0ZXh0LXhzIGxlYWRpbmctdGlnaHQgb3BhY2l0eS02MCI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1ncmF5LTUwMCI+e21zZy50aW1lc3RhbXB9PC9zcGFuPiB7bXNnLm1lc3NhZ2V9CiAgICAgICAgICA8L2Rpdj4KICAgICAgICApKX0KICAgICAgPC9kaXY+CgogICAgICB7LyogR2FtZSBNYXAgKi99CiAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LTEiPgogICAgICAgIHtjb25uZWN0aW9uU3RhdHVzID09PSAnZnVsbHktY29ubmVjdGVkJyAmJiAoCiAgICAgICAgICA8R2FtZU1hcCBtYXBEYXRhPXttYXBEYXRhfSAvPgogICAgICAgICl9CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfTsKCmV4cG9ydCBkZWZhdWx0IEdhbWVBcmVhOw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAQhoAAAAAAAAAAAAAAADwvw"
				],
				[
					9,
					1,
					"insert",
					{
						"characters": "MapZone"
					},
					"CAAAAC8KAAAAAAAAMAoAAAAAAAAAAAAAMAoAAAAAAAAwCgAAAAAAAAgAAABtYXBfem9uZTAKAAAAAAAAMQoAAAAAAAAAAAAAMQoAAAAAAAAyCgAAAAAAAAAAAAAyCgAAAAAAADMKAAAAAAAAAAAAADMKAAAAAAAANAoAAAAAAAAAAAAANAoAAAAAAAA1CgAAAAAAAAAAAAA1CgAAAAAAADYKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALwoAAAAAAAA3CgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/components/GameMap.tsx",
			"settings":
			{
				"buffer_size": 8486,
				"encoding": "UTF-8",
				"line_ending": "Unix",
				"name": "import { useRef, useEffect, useState, useCallback"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAxxkAAAAAAAAAAAAA",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwvw"
				],
				[
					5,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAExoAAAAAAAAAAAAAExoAAAAAAAATGgAAAAAAAMcZAABpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwoKaW50ZXJmYWNlIE1hcFpvbmUgewogIF9pZDogc3RyaW5nOwogIHR5cGU6IHN0cmluZzsKICBzdGF0ZT86IHsKICAgIHg/OiBudW1iZXI7CiAgICB5PzogbnVtYmVyOwogICAgdGVycmFpbj86IHN0cmluZzsKICAgIFtrZXk6IHN0cmluZ106IGFueTsKICB9OwogIFtrZXk6IHN0cmluZ106IGFueTsKfQoKaW50ZXJmYWNlIEdhbWVNYXBQcm9wcyB7CiAgbWFwRGF0YTogTWFwWm9uZVtdOwp9Cgpjb25zdCBURVJSQUlOX0NPTE9SUzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHsKICBncmFzczogJyM0Q0FGNTAnLAogIHdhdGVyOiAnIzIxOTZGMycsCiAgZGVzZXJ0OiAnI0ZGQzEwNycsCiAgbW91bnRhaW46ICcjNzk1NTQ4JywKICBmb3Jlc3Q6ICcjMkU3RDMyJywKICBzd2FtcDogJyM2ODlGMzgnLAogIGljZTogJyNFM0YyRkQnLAogIGxhdmE6ICcjRjQ0MzM2JywKICAvLyBBZGQgbW9yZSB0ZXJyYWluIHR5cGVzIGFzIG5lZWRlZAp9OwoKY29uc3QgREVGQVVMVF9DT0xPUiA9ICcjOUU5RTlFJzsKCmNvbnN0IEdhbWVNYXA6IFJlYWN0LkZDPEdhbWVNYXBQcm9wcz4gPSAoeyBtYXBEYXRhIH0pID0+IHsKICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpOwogIGNvbnN0IFtwYW4sIHNldFBhbl0gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CiAgY29uc3QgW2lzRHJhZ2dpbmcsIHNldElzRHJhZ2dpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtsYXN0TW91c2VQb3MsIHNldExhc3RNb3VzZVBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CgogIC8vIEhleCBncmlkIGNvbnN0YW50cwogIGNvbnN0IEhFWF9XSURUSCA9IDMyOwogIGNvbnN0IEhFWF9IRUlHSFQgPSAzMjsKICBjb25zdCBIRVhfUkFESVVTID0gMTY7CiAgY29uc3QgR1JJRF9TSVpFID0gMTI7IC8vIDAtMTEgaW5kZXhlZAogIGNvbnN0IEJPUkRFUl9QQURESU5HID0gNTA7CgogIC8vIENhbGN1bGF0ZSBoZXggdmVydGljZXMgZm9yIGZsYXQtdG9wIGhleGFnb24KICBjb25zdCBnZXRIZXhWZXJ0aWNlcyA9IChjZW50ZXJYOiBudW1iZXIsIGNlbnRlclk6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl1bXSA9PiB7CiAgICBjb25zdCB2ZXJ0aWNlczogW251bWJlciwgbnVtYmVyXVtdID0gW107CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykgewogICAgICBjb25zdCBhbmdsZSA9IChNYXRoLlBJIC8gMykgKiBpOwogICAgICBjb25zdCB4ID0gY2VudGVyWCArIEhFWF9SQURJVVMgKiBNYXRoLmNvcyhhbmdsZSk7CiAgICAgIGNvbnN0IHkgPSBjZW50ZXJZICsgSEVYX1JBRElVUyAqIE1hdGguc2luKGFuZ2xlKTsKICAgICAgdmVydGljZXMucHVzaChbeCwgeV0pOwogICAgfQogICAgcmV0dXJuIHZlcnRpY2VzOwogIH07CgogIC8vIENvbnZlcnQgZ3JpZCBjb29yZGluYXRlcyB0byBwaXhlbCBjb29yZGluYXRlcwogIGNvbnN0IGdyaWRUb1BpeGVsID0gKGdyaWRYOiBudW1iZXIsIGdyaWRZOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdID0+IHsKICAgIGNvbnN0IGhleFdpZHRoID0gSEVYX1JBRElVUyAqIDI7CiAgICBjb25zdCBoZXhIZWlnaHQgPSBIRVhfUkFESVVTICogTWF0aC5zcXJ0KDMpOwogICAgCiAgICBsZXQgcGl4ZWxYID0gZ3JpZFggKiBoZXhXaWR0aCAqIDAuNzU7CiAgICBsZXQgcGl4ZWxZID0gZ3JpZFkgKiBoZXhIZWlnaHQ7CiAgICAKICAgIC8vIE9mZnNldCBvZGQgcm93cwogICAgaWYgKGdyaWRZICUgMiA9PT0gMSkgewogICAgICBwaXhlbFggKz0gaGV4V2lkdGggKiAwLjM3NTsgLy8gSGFsZiBvZiAwLjc1CiAgICB9CiAgICAKICAgIC8vIEFkZCBib3JkZXIgcGFkZGluZwogICAgcGl4ZWxYICs9IEJPUkRFUl9QQURESU5HOwogICAgcGl4ZWxZICs9IEJPUkRFUl9QQURESU5HOwogICAgCiAgICByZXR1cm4gW3BpeGVsWCwgcGl4ZWxZXTsKICB9OwoKICAvLyBEcmF3IGEgc2luZ2xlIGhleGFnb24KICBjb25zdCBkcmF3SGV4ID0gKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjZW50ZXJYOiBudW1iZXIsIGNlbnRlclk6IG51bWJlciwgY29sb3I6IHN0cmluZykgPT4gewogICAgY29uc3QgdmVydGljZXMgPSBnZXRIZXhWZXJ0aWNlcyhjZW50ZXJYLCBjZW50ZXJZKTsKICAgIAogICAgY3R4LmJlZ2luUGF0aCgpOwogICAgY3R4Lm1vdmVUbyh2ZXJ0aWNlc1swXVswXSwgdmVydGljZXNbMF1bMV0pOwogICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykgewogICAgICBjdHgubGluZVRvKHZlcnRpY2VzW2ldWzBdLCB2ZXJ0aWNlc1tpXVsxXSk7CiAgICB9CiAgICBjdHguY2xvc2VQYXRoKCk7CiAgICAKICAgIC8vIEZpbGwgaGV4CiAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7CiAgICBjdHguZmlsbCgpOwogICAgCiAgICAvLyBEcmF3IGJvcmRlcgogICAgY3R4LnN0cm9rZVN0eWxlID0gJyMzMzMnOwogICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICBjdHguc3Ryb2tlKCk7CiAgfTsKCiAgLy8gUmVuZGVyIHRoZSBtYXAKICBjb25zdCByZW5kZXJNYXAgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDsKICAgIGlmICghY2FudmFzKSByZXR1cm47CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKCFjdHgpIHJldHVybjsKICAgIAogICAgLy8gQ2xlYXIgY2FudmFzCiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAKICAgIC8vIEFwcGx5IHBhbm5pbmcgdHJhbnNmb3JtCiAgICBjdHguc2F2ZSgpOwogICAgY3R4LnRyYW5zbGF0ZShwYW4ueCwgcGFuLnkpOwogICAgCiAgICAvLyBDcmVhdGUgYSBtYXAgb2YgZ3JpZCBwb3NpdGlvbnMgdG8gTWFwWm9uZXMKICAgIGNvbnN0IHpvbmVNYXAgPSBuZXcgTWFwPHN0cmluZywgTWFwWm9uZT4oKTsKICAgIG1hcERhdGEuZm9yRWFjaCh6b25lID0+IHsKICAgICAgaWYgKHpvbmUuc3RhdGU/LnggIT09IHVuZGVmaW5lZCAmJiB6b25lLnN0YXRlPy55ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zdCBrZXkgPSBgJHt6b25lLnN0YXRlLnh9LCR7em9uZS5zdGF0ZS55fWA7CiAgICAgICAgem9uZU1hcC5zZXQoa2V5LCB6b25lKTsKICAgICAgfQogICAgfSk7CiAgICAKICAgIC8vIFJlbmRlciBhbGwgZ3JpZCBwb3NpdGlvbnMgKDAtMTEgeCAwLTExKQogICAgZm9yIChsZXQgeSA9IDA7IHkgPCBHUklEX1NJWkU7IHkrKykgewogICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IEdSSURfU0laRTsgeCsrKSB7CiAgICAgICAgY29uc3QgW3BpeGVsWCwgcGl4ZWxZXSA9IGdyaWRUb1BpeGVsKHgsIHkpOwogICAgICAgIGNvbnN0IGtleSA9IGAke3h9LCR7eX1gOwogICAgICAgIGNvbnN0IHpvbmUgPSB6b25lTWFwLmdldChrZXkpOwogICAgICAgIAogICAgICAgIGxldCBjb2xvciA9IERFRkFVTFRfQ09MT1I7CiAgICAgICAgaWYgKHpvbmU/LnN0YXRlPy50ZXJyYWluKSB7CiAgICAgICAgICBjb2xvciA9IFRFUlJBSU5fQ09MT1JTW3pvbmUuc3RhdGUudGVycmFpbl0gfHwgREVGQVVMVF9DT0xPUjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZHJhd0hleChjdHgsIHBpeGVsWCwgcGl4ZWxZLCBjb2xvcik7CiAgICAgIH0KICAgIH0KICAgIAogICAgY3R4LnJlc3RvcmUoKTsKICB9LCBbbWFwRGF0YSwgcGFuXSk7CgogIC8vIEhhbmRsZSBjYW52YXMgcmVzaXplCiAgY29uc3QgcmVzaXplQ2FudmFzID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgY2FudmFzLndpZHRoID0gcmVjdC53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvOwogICAgY2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKGN0eCkgewogICAgICBjdHguc2NhbGUod2luZG93LmRldmljZVBpeGVsUmF0aW8sIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTsKICAgIH0KICAgIAogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICAvLyBNb3VzZSBldmVudCBoYW5kbGVycyBmb3IgcGFubmluZwogIGNvbnN0IGhhbmRsZU1vdXNlRG93biA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7CiAgICBzZXRJc0RyYWdnaW5nKHRydWUpOwogICAgc2V0TGFzdE1vdXNlUG9zKHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfSk7CiAgfTsKCiAgY29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuOwogICAgCiAgICBjb25zdCBkZWx0YVggPSBlLmNsaWVudFggLSBsYXN0TW91c2VQb3MueDsKICAgIGNvbnN0IGRlbHRhWSA9IGUuY2xpZW50WSAtIGxhc3RNb3VzZVBvcy55OwogICAgCiAgICBzZXRQYW4ocHJldiA9PiAoewogICAgICB4OiBwcmV2LnggKyBkZWx0YVgsCiAgICAgIHk6IHByZXYueSArIGRlbHRhWQogICAgfSkpOwogICAgCiAgICBzZXRMYXN0TW91c2VQb3MoeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KTsKICB9OwoKICBjb25zdCBoYW5kbGVNb3VzZVVwID0gKCkgPT4gewogICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7CiAgfTsKCiAgLy8gS2V5Ym9hcmQgcGFubmluZwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHsKICAgICAgY29uc3QgcGFuU3BlZWQgPSAyMDsKICAgICAgCiAgICAgIHN3aXRjaCAoZS5rZXkpIHsKICAgICAgICBjYXNlICdBcnJvd1VwJzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHk6IHByZXYueSArIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93RG93bic6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB5OiBwcmV2LnkgLSBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBcnJvd0xlZnQnOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeDogcHJldi54ICsgcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB4OiBwcmV2LnggLSBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pOwogICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7CiAgfSwgW10pOwoKICAvLyBTZXR1cCBjYW52YXMgYW5kIHJlc2l6ZSBoYW5kbGluZwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICByZXNpemVDYW52YXMoKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMpOwogICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMpOwogIH0sIFtyZXNpemVDYW52YXNdKTsKCiAgLy8gUmUtcmVuZGVyIHdoZW4gbWFwIGRhdGEgb3IgcGFuIGNoYW5nZXMKICB1c2VFZmZlY3QoKCkgPT4gewogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICByZXR1cm4gKAogICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBoLWZ1bGwgcmVsYXRpdmUiPgogICAgICA8Y2FudmFzCiAgICAgICAgcmVmPXtjYW52YXNSZWZ9CiAgICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgaC1mdWxsIGN1cnNvci1ncmFiIGFjdGl2ZTpjdXJzb3ItZ3JhYmJpbmciCiAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiBpc0RyYWdnaW5nID8gJ2dyYWJiaW5nJyA6ICdncmFiJyB9fQogICAgICAgIG9uTW91c2VEb3duPXtoYW5kbGVNb3VzZURvd259CiAgICAgICAgb25Nb3VzZU1vdmU9e2hhbmRsZU1vdXNlTW92ZX0KICAgICAgICBvbk1vdXNlVXA9e2hhbmRsZU1vdXNlVXB9CiAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZVVwfQogICAgICAvPgogICAgICAKICAgICAgey8qIERlYnVnIGluZm8gKi99CiAgICAgIDxkaXYgY2xhc3NOYW1lPSJhYnNvbHV0ZSB0b3AtMiByaWdodC0yIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgdGV4dC13aGl0ZSB0ZXh0LXhzIHAtMiByb3VuZGVkIj4KICAgICAgICA8ZGl2Pk1hcFpvbmVzOiB7bWFwRGF0YS5sZW5ndGh9PC9kaXY+CiAgICAgICAgPGRpdj5QYW46IHtwYW4ueC50b0ZpeGVkKDApfSwge3Bhbi55LnRvRml4ZWQoMCl9PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtZ3JheS0zMDAgbXQtMSI+QXJyb3cga2V5cyBvciBkcmFnIHRvIHBhbjwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn07CgpleHBvcnQgZGVmYXVsdCBHYW1lTWFwOw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAxxkAAAAAAAAAAAAAAADwvw"
				],
				[
					9,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAfRsAAAAAAAAAAAAAfRsAAAAAAAB9GwAAAAAAABMaAABpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwoKaW50ZXJmYWNlIE1hcFpvbmUgewogIF9pZDogc3RyaW5nOwogIHR5cGU6IHN0cmluZzsKICBzdGF0ZT86IHsKICAgIGxvY2F0aW9uPzogewogICAgICBmaXJzdD86IG51bWJlcjsKICAgICAgc2Vjb25kPzogbnVtYmVyOwogICAgfTsKICAgIHRlcnJhaW5UeXBlPzogc3RyaW5nOwogICAgW2tleTogc3RyaW5nXTogYW55OwogIH07CiAgW2tleTogc3RyaW5nXTogYW55Owp9CgppbnRlcmZhY2UgR2FtZU1hcFByb3BzIHsKICBtYXBEYXRhOiBNYXBab25lW107Cn0KCmNvbnN0IFRFUlJBSU5fQ09MT1JTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0gewogIEdSQVNTTEFORDogJyM0Q0FGNTAnLAogIE1FQURPVzogJyM4QkMzNEEnLAogIFNDUlVCOiAnI0NEREMzOScsCiAgV09PRExBTkQ6ICcjMkU3RDMyJywKICBST0NLTEFORDogJyM3OTU1NDgnLAogIERSWUxBTkQ6ICcjRkZDMTA3JywKICAvLyBBZGQgbW9yZSB0ZXJyYWluIHR5cGVzIGFzIG5lZWRlZAp9OwoKY29uc3QgREVGQVVMVF9DT0xPUiA9ICcjOUU5RTlFJzsKCmNvbnN0IEdhbWVNYXA6IFJlYWN0LkZDPEdhbWVNYXBQcm9wcz4gPSAoeyBtYXBEYXRhIH0pID0+IHsKICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpOwogIGNvbnN0IFtwYW4sIHNldFBhbl0gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CiAgY29uc3QgW2lzRHJhZ2dpbmcsIHNldElzRHJhZ2dpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtsYXN0TW91c2VQb3MsIHNldExhc3RNb3VzZVBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CgogIC8vIEhleCBncmlkIGNvbnN0YW50cwogIGNvbnN0IEhFWF9XSURUSCA9IDMyOwogIGNvbnN0IEhFWF9IRUlHSFQgPSAzMjsKICBjb25zdCBIRVhfUkFESVVTID0gMTY7CiAgY29uc3QgR1JJRF9TSVpFID0gMTI7IC8vIDAtMTEgaW5kZXhlZAogIGNvbnN0IEJPUkRFUl9QQURESU5HID0gNTA7CgogIC8vIENhbGN1bGF0ZSBoZXggdmVydGljZXMgZm9yIGZsYXQtdG9wIGhleGFnb24KICBjb25zdCBnZXRIZXhWZXJ0aWNlcyA9IChjZW50ZXJYOiBudW1iZXIsIGNlbnRlclk6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl1bXSA9PiB7CiAgICBjb25zdCB2ZXJ0aWNlczogW251bWJlciwgbnVtYmVyXVtdID0gW107CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykgewogICAgICBjb25zdCBhbmdsZSA9IChNYXRoLlBJIC8gMykgKiBpOwogICAgICBjb25zdCB4ID0gY2VudGVyWCArIEhFWF9SQURJVVMgKiBNYXRoLmNvcyhhbmdsZSk7CiAgICAgIGNvbnN0IHkgPSBjZW50ZXJZICsgSEVYX1JBRElVUyAqIE1hdGguc2luKGFuZ2xlKTsKICAgICAgdmVydGljZXMucHVzaChbeCwgeV0pOwogICAgfQogICAgcmV0dXJuIHZlcnRpY2VzOwogIH07CgogIC8vIENvbnZlcnQgZ3JpZCBjb29yZGluYXRlcyB0byBwaXhlbCBjb29yZGluYXRlcwogIGNvbnN0IGdyaWRUb1BpeGVsID0gKGdyaWRYOiBudW1iZXIsIGdyaWRZOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdID0+IHsKICAgIGNvbnN0IGhleFdpZHRoID0gSEVYX1JBRElVUyAqIDI7CiAgICBjb25zdCBoZXhIZWlnaHQgPSBIRVhfUkFESVVTICogTWF0aC5zcXJ0KDMpOwogICAgCiAgICBsZXQgcGl4ZWxYID0gZ3JpZFggKiBoZXhXaWR0aCAqIDAuNzU7CiAgICBsZXQgcGl4ZWxZID0gZ3JpZFkgKiBoZXhIZWlnaHQ7CiAgICAKICAgIC8vIE9mZnNldCBvZGQgcm93cwogICAgaWYgKGdyaWRZICUgMiA9PT0gMSkgewogICAgICBwaXhlbFggKz0gaGV4V2lkdGggKiAwLjM3NTsgLy8gSGFsZiBvZiAwLjc1CiAgICB9CiAgICAKICAgIC8vIEFkZCBib3JkZXIgcGFkZGluZwogICAgcGl4ZWxYICs9IEJPUkRFUl9QQURESU5HOwogICAgcGl4ZWxZICs9IEJPUkRFUl9QQURESU5HOwogICAgCiAgICByZXR1cm4gW3BpeGVsWCwgcGl4ZWxZXTsKICB9OwoKICAvLyBEcmF3IGEgc2luZ2xlIGhleGFnb24KICBjb25zdCBkcmF3SGV4ID0gKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjZW50ZXJYOiBudW1iZXIsIGNlbnRlclk6IG51bWJlciwgY29sb3I6IHN0cmluZykgPT4gewogICAgY29uc3QgdmVydGljZXMgPSBnZXRIZXhWZXJ0aWNlcyhjZW50ZXJYLCBjZW50ZXJZKTsKICAgIAogICAgY3R4LmJlZ2luUGF0aCgpOwogICAgY3R4Lm1vdmVUbyh2ZXJ0aWNlc1swXVswXSwgdmVydGljZXNbMF1bMV0pOwogICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykgewogICAgICBjdHgubGluZVRvKHZlcnRpY2VzW2ldWzBdLCB2ZXJ0aWNlc1tpXVsxXSk7CiAgICB9CiAgICBjdHguY2xvc2VQYXRoKCk7CiAgICAKICAgIC8vIEZpbGwgaGV4CiAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7CiAgICBjdHguZmlsbCgpOwogICAgCiAgICAvLyBEcmF3IGJvcmRlcgogICAgY3R4LnN0cm9rZVN0eWxlID0gJyMzMzMnOwogICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICBjdHguc3Ryb2tlKCk7CiAgfTsKCiAgLy8gUmVuZGVyIHRoZSBtYXAKICBjb25zdCByZW5kZXJNYXAgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDsKICAgIGlmICghY2FudmFzKSByZXR1cm47CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKCFjdHgpIHJldHVybjsKICAgIAogICAgLy8gQ2xlYXIgY2FudmFzCiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAKICAgIC8vIEFwcGx5IHBhbm5pbmcgdHJhbnNmb3JtCiAgICBjdHguc2F2ZSgpOwogICAgY3R4LnRyYW5zbGF0ZShwYW4ueCwgcGFuLnkpOwogICAgCiAgICAvLyBDcmVhdGUgYSBtYXAgb2YgZ3JpZCBwb3NpdGlvbnMgdG8gTWFwWm9uZXMKICAgIGNvbnN0IHpvbmVNYXAgPSBuZXcgTWFwPHN0cmluZywgTWFwWm9uZT4oKTsKICAgIG1hcERhdGEuZm9yRWFjaCh6b25lID0+IHsKICAgICAgaWYgKHpvbmUuc3RhdGU/LmxvY2F0aW9uPy5maXJzdCAhPT0gdW5kZWZpbmVkICYmIHpvbmUuc3RhdGU/LmxvY2F0aW9uPy5zZWNvbmQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGNvbnN0IGtleSA9IGAke3pvbmUuc3RhdGUubG9jYXRpb24uZmlyc3R9LCR7em9uZS5zdGF0ZS5sb2NhdGlvbi5zZWNvbmR9YDsKICAgICAgICB6b25lTWFwLnNldChrZXksIHpvbmUpOwogICAgICB9CiAgICB9KTsKICAgIAogICAgLy8gUmVuZGVyIGFsbCBncmlkIHBvc2l0aW9ucyAoMC0xMSB4IDAtMTEpCiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IEdSSURfU0laRTsgeSsrKSB7CiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgR1JJRF9TSVpFOyB4KyspIHsKICAgICAgICBjb25zdCBbcGl4ZWxYLCBwaXhlbFldID0gZ3JpZFRvUGl4ZWwoeCwgeSk7CiAgICAgICAgY29uc3Qga2V5ID0gYCR7eH0sJHt5fWA7CiAgICAgICAgY29uc3Qgem9uZSA9IHpvbmVNYXAuZ2V0KGtleSk7CiAgICAgICAgCiAgICAgICAgbGV0IGNvbG9yID0gREVGQVVMVF9DT0xPUjsKICAgICAgICBpZiAoem9uZT8uc3RhdGU/LnRlcnJhaW5UeXBlKSB7CiAgICAgICAgICBjb2xvciA9IFRFUlJBSU5fQ09MT1JTW3pvbmUuc3RhdGUudGVycmFpblR5cGVdIHx8IERFRkFVTFRfQ09MT1I7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGRyYXdIZXgoY3R4LCBwaXhlbFgsIHBpeGVsWSwgY29sb3IpOwogICAgICB9CiAgICB9CiAgICAKICAgIGN0eC5yZXN0b3JlKCk7CiAgfSwgW21hcERhdGEsIHBhbl0pOwoKICAvLyBIYW5kbGUgY2FudmFzIHJlc2l6ZQogIGNvbnN0IHJlc2l6ZUNhbnZhcyA9IHVzZUNhbGxiYWNrKCgpID0+IHsKICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50OwogICAgaWYgKCFjYW52YXMpIHJldHVybjsKICAgIAogICAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgIGNhbnZhcy53aWR0aCA9IHJlY3Qud2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbzsKICAgIGNhbnZhcy5oZWlnaHQgPSByZWN0LmhlaWdodCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvOwogICAgCiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgIGlmIChjdHgpIHsKICAgICAgY3R4LnNjYWxlKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7CiAgICB9CiAgICAKICAgIHJlbmRlck1hcCgpOwogIH0sIFtyZW5kZXJNYXBdKTsKCiAgLy8gTW91c2UgZXZlbnQgaGFuZGxlcnMgZm9yIHBhbm5pbmcKICBjb25zdCBoYW5kbGVNb3VzZURvd24gPSAoZTogUmVhY3QuTW91c2VFdmVudCkgPT4gewogICAgc2V0SXNEcmFnZ2luZyh0cnVlKTsKICAgIHNldExhc3RNb3VzZVBvcyh7IHg6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZIH0pOwogIH07CgogIGNvbnN0IGhhbmRsZU1vdXNlTW92ZSA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7CiAgICBpZiAoIWlzRHJhZ2dpbmcpIHJldHVybjsKICAgIAogICAgY29uc3QgZGVsdGFYID0gZS5jbGllbnRYIC0gbGFzdE1vdXNlUG9zLng7CiAgICBjb25zdCBkZWx0YVkgPSBlLmNsaWVudFkgLSBsYXN0TW91c2VQb3MueTsKICAgIAogICAgc2V0UGFuKHByZXYgPT4gKHsKICAgICAgeDogcHJldi54ICsgZGVsdGFYLAogICAgICB5OiBwcmV2LnkgKyBkZWx0YVkKICAgIH0pKTsKICAgIAogICAgc2V0TGFzdE1vdXNlUG9zKHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfSk7CiAgfTsKCiAgY29uc3QgaGFuZGxlTW91c2VVcCA9ICgpID0+IHsKICAgIHNldElzRHJhZ2dpbmcoZmFsc2UpOwogIH07CgogIC8vIEtleWJvYXJkIHBhbm5pbmcKICB1c2VFZmZlY3QoKCkgPT4gewogICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHBhblNwZWVkID0gMjA7CiAgICAgIAogICAgICBzd2l0Y2ggKGUua2V5KSB7CiAgICAgICAgY2FzZSAnQXJyb3dVcCc6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB5OiBwcmV2LnkgKyBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBcnJvd0Rvd24nOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeTogcHJldi55IC0gcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHg6IHByZXYueCArIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeDogcHJldi54IC0gcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH07CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTsKICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pOwogIH0sIFtdKTsKCiAgLy8gU2V0dXAgY2FudmFzIGFuZCByZXNpemUgaGFuZGxpbmcKICB1c2VFZmZlY3QoKCkgPT4gewogICAgcmVzaXplQ2FudmFzKCk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplQ2FudmFzKTsKICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplQ2FudmFzKTsKICB9LCBbcmVzaXplQ2FudmFzXSk7CgogIC8vIFJlLXJlbmRlciB3aGVuIG1hcCBkYXRhIG9yIHBhbiBjaGFuZ2VzCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIHJlbmRlck1hcCgpOwogIH0sIFtyZW5kZXJNYXBdKTsKCiAgcmV0dXJuICgKICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgaC1mdWxsIHJlbGF0aXZlIj4KICAgICAgPGNhbnZhcwogICAgICAgIHJlZj17Y2FudmFzUmVmfQogICAgICAgIGNsYXNzTmFtZT0idy1mdWxsIGgtZnVsbCBjdXJzb3ItZ3JhYiBhY3RpdmU6Y3Vyc29yLWdyYWJiaW5nIgogICAgICAgIHN0eWxlPXt7IGN1cnNvcjogaXNEcmFnZ2luZyA/ICdncmFiYmluZycgOiAnZ3JhYicgfX0KICAgICAgICBvbk1vdXNlRG93bj17aGFuZGxlTW91c2VEb3dufQogICAgICAgIG9uTW91c2VNb3ZlPXtoYW5kbGVNb3VzZU1vdmV9CiAgICAgICAgb25Nb3VzZVVwPXtoYW5kbGVNb3VzZVVwfQogICAgICAgIG9uTW91c2VMZWF2ZT17aGFuZGxlTW91c2VVcH0KICAgICAgLz4KICAgICAgCiAgICAgIHsvKiBEZWJ1ZyBpbmZvICovfQogICAgICA8ZGl2IGNsYXNzTmFtZT0iYWJzb2x1dGUgdG9wLTIgcmlnaHQtMiBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIHRleHQtd2hpdGUgdGV4dC14cyBwLTIgcm91bmRlZCI+CiAgICAgICAgPGRpdj5NYXBab25lczoge21hcERhdGEubGVuZ3RofTwvZGl2PgogICAgICAgIDxkaXY+UGFuOiB7cGFuLngudG9GaXhlZCgwKX0sIHtwYW4ueS50b0ZpeGVkKDApfTwvZGl2PgogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWdyYXktMzAwIG10LTEiPkFycm93IGtleXMgb3IgZHJhZyB0byBwYW48L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9OwoKZXhwb3J0IGRlZmF1bHQgR2FtZU1hcDs",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAExoAAAAAAAAAAAAAAADwvw"
				],
				[
					13,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAFxoAAAAAAAAAAAAAFxoAAAAAAAAXGgAAAAAAAH0bAABpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwoKaW50ZXJmYWNlIE1hcFpvbmUgewogIF9pZDogc3RyaW5nOwogIHR5cGU6IHN0cmluZzsKICBzdGF0ZT86IHsKICAgIGxvY2F0aW9uPzogewogICAgICBmaXJzdD86IG51bWJlcjsKICAgICAgc2Vjb25kPzogbnVtYmVyOwogICAgfTsKICAgIHRlcnJhaW5UeXBlPzogc3RyaW5nOwogICAgW2tleTogc3RyaW5nXTogYW55OwogIH07CiAgW2tleTogc3RyaW5nXTogYW55Owp9CgppbnRlcmZhY2UgR2FtZU1hcFByb3BzIHsKICBtYXBEYXRhOiBNYXBab25lW107Cn0KCmNvbnN0IFRFUlJBSU5fQ09MT1JTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0gewogIEdSQVNTTEFORDogJyM0Q0FGNTAnLAogIE1FQURPVzogJyM4QkMzNEEnLAogIFNDUlVCOiAnI0NEREMzOScsCiAgV09PRExBTkQ6ICcjMkU3RDMyJywKICBST0NLTEFORDogJyM3OTU1NDgnLAogIERSWUxBTkQ6ICcjRkZDMTA3JywKICAvLyBBZGQgbW9yZSB0ZXJyYWluIHR5cGVzIGFzIG5lZWRlZAp9OwoKY29uc3QgREVGQVVMVF9DT0xPUiA9ICcjOUU5RTlFJzsKCmNvbnN0IEdhbWVNYXA6IFJlYWN0LkZDPEdhbWVNYXBQcm9wcz4gPSAoeyBtYXBEYXRhIH0pID0+IHsKICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpOwogIGNvbnN0IFtwYW4sIHNldFBhbl0gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CiAgY29uc3QgW2lzRHJhZ2dpbmcsIHNldElzRHJhZ2dpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtsYXN0TW91c2VQb3MsIHNldExhc3RNb3VzZVBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CgogIC8vIEhleCBncmlkIGNvbnN0YW50cwogIGNvbnN0IEhFWF9XSURUSCA9IDQ4OwogIGNvbnN0IEhFWF9IRUlHSFQgPSA0ODsKICBjb25zdCBIRVhfUkFESVVTID0gMjQ7CiAgY29uc3QgR1JJRF9TSVpFID0gMTI7IC8vIDAtMTEgaW5kZXhlZAogIGNvbnN0IEJPUkRFUl9QQURESU5HID0gNTA7CgogIC8vIENhbGN1bGF0ZSBoZXggdmVydGljZXMgZm9yIGZsYXQtdG9wIGhleGFnb24KICBjb25zdCBnZXRIZXhWZXJ0aWNlcyA9IChjZW50ZXJYOiBudW1iZXIsIGNlbnRlclk6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl1bXSA9PiB7CiAgICBjb25zdCB2ZXJ0aWNlczogW251bWJlciwgbnVtYmVyXVtdID0gW107CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykgewogICAgICBjb25zdCBhbmdsZSA9IChNYXRoLlBJIC8gMykgKiBpOwogICAgICBjb25zdCB4ID0gY2VudGVyWCArIEhFWF9SQURJVVMgKiBNYXRoLmNvcyhhbmdsZSk7CiAgICAgIGNvbnN0IHkgPSBjZW50ZXJZICsgSEVYX1JBRElVUyAqIE1hdGguc2luKGFuZ2xlKTsKICAgICAgdmVydGljZXMucHVzaChbeCwgeV0pOwogICAgfQogICAgcmV0dXJuIHZlcnRpY2VzOwogIH07CgogIC8vIENvbnZlcnQgZ3JpZCBjb29yZGluYXRlcyB0byBwaXhlbCBjb29yZGluYXRlcwogIGNvbnN0IGdyaWRUb1BpeGVsID0gKGdyaWRYOiBudW1iZXIsIGdyaWRZOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdID0+IHsKICAgIGNvbnN0IGhleFdpZHRoID0gSEVYX1JBRElVUyAqIDI7CiAgICBjb25zdCBoZXhIZWlnaHQgPSBIRVhfUkFESVVTICogTWF0aC5zcXJ0KDMpOwogICAgCiAgICBsZXQgcGl4ZWxYID0gZ3JpZFggKiBoZXhXaWR0aCAqIDAuNzU7CiAgICBsZXQgcGl4ZWxZID0gZ3JpZFkgKiBoZXhIZWlnaHQ7CiAgICAKICAgIC8vIE9mZnNldCBvZGQgY29sdW1ucyAodmVydGljYWwgb2Zmc2V0KQogICAgaWYgKGdyaWRYICUgMiA9PT0gMSkgewogICAgICBwaXhlbFkgKz0gaGV4SGVpZ2h0ICogMC41OwogICAgfQogICAgCiAgICAvLyBBZGQgYm9yZGVyIHBhZGRpbmcKICAgIHBpeGVsWCArPSBCT1JERVJfUEFERElORzsKICAgIHBpeGVsWSArPSBCT1JERVJfUEFERElORzsKICAgIAogICAgcmV0dXJuIFtwaXhlbFgsIHBpeGVsWV07CiAgfTsKCiAgLy8gRHJhdyBhIHNpbmdsZSBoZXhhZ29uCiAgY29uc3QgZHJhd0hleCA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY2VudGVyWDogbnVtYmVyLCBjZW50ZXJZOiBudW1iZXIsIGNvbG9yOiBzdHJpbmcpID0+IHsKICAgIGNvbnN0IHZlcnRpY2VzID0gZ2V0SGV4VmVydGljZXMoY2VudGVyWCwgY2VudGVyWSk7CiAgICAKICAgIGN0eC5iZWdpblBhdGgoKTsKICAgIGN0eC5tb3ZlVG8odmVydGljZXNbMF1bMF0sIHZlcnRpY2VzWzBdWzFdKTsKICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgY3R4LmxpbmVUbyh2ZXJ0aWNlc1tpXVswXSwgdmVydGljZXNbaV1bMV0pOwogICAgfQogICAgY3R4LmNsb3NlUGF0aCgpOwogICAgCiAgICAvLyBGaWxsIGhleAogICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yOwogICAgY3R4LmZpbGwoKTsKICAgIAogICAgLy8gRHJhdyBib3JkZXIKICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMzMzJzsKICAgIGN0eC5saW5lV2lkdGggPSAxOwogICAgY3R4LnN0cm9rZSgpOwogIH07CgogIC8vIFJlbmRlciB0aGUgbWFwCiAgY29uc3QgcmVuZGVyTWFwID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgIGlmICghY3R4KSByZXR1cm47CiAgICAKICAgIC8vIENsZWFyIGNhbnZhcwogICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgCiAgICAvLyBBcHBseSBwYW5uaW5nIHRyYW5zZm9ybQogICAgY3R4LnNhdmUoKTsKICAgIGN0eC50cmFuc2xhdGUocGFuLngsIHBhbi55KTsKICAgIAogICAgLy8gQ3JlYXRlIGEgbWFwIG9mIGdyaWQgcG9zaXRpb25zIHRvIE1hcFpvbmVzCiAgICBjb25zdCB6b25lTWFwID0gbmV3IE1hcDxzdHJpbmcsIE1hcFpvbmU+KCk7CiAgICBtYXBEYXRhLmZvckVhY2goem9uZSA9PiB7CiAgICAgIGlmICh6b25lLnN0YXRlPy5sb2NhdGlvbj8uZmlyc3QgIT09IHVuZGVmaW5lZCAmJiB6b25lLnN0YXRlPy5sb2NhdGlvbj8uc2Vjb25kICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zdCBrZXkgPSBgJHt6b25lLnN0YXRlLmxvY2F0aW9uLmZpcnN0fSwke3pvbmUuc3RhdGUubG9jYXRpb24uc2Vjb25kfWA7CiAgICAgICAgem9uZU1hcC5zZXQoa2V5LCB6b25lKTsKICAgICAgICAKICAgICAgICAvLyBEZWJ1ZyBsb2dnaW5nIC0gcmVtb3ZlIGFmdGVyIGl0IHdvcmtzCiAgICAgICAgaWYgKHpvbmUuc3RhdGUubG9jYXRpb24uZmlyc3QgPT09IDAgJiYgem9uZS5zdGF0ZS5sb2NhdGlvbi5zZWNvbmQgPT09IDApIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdab25lIGF0IDAsMDonLCB6b25lKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCdUZXJyYWluIHR5cGU6Jywgem9uZS5zdGF0ZS50ZXJyYWluVHlwZSk7CiAgICAgICAgICBjb25zb2xlLmxvZygnQ29sb3Igd2lsbCBiZTonLCBURVJSQUlOX0NPTE9SU1t6b25lLnN0YXRlLnRlcnJhaW5UeXBlXSB8fCBERUZBVUxUX0NPTE9SKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgCiAgICAvLyBSZW5kZXIgYWxsIGdyaWQgcG9zaXRpb25zICgwLTExIHggMC0xMSkKICAgIGZvciAobGV0IHkgPSAwOyB5IDwgR1JJRF9TSVpFOyB5KyspIHsKICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBHUklEX1NJWkU7IHgrKykgewogICAgICAgIGNvbnN0IFtwaXhlbFgsIHBpeGVsWV0gPSBncmlkVG9QaXhlbCh4LCB5KTsKICAgICAgICBjb25zdCBrZXkgPSBgJHt4fSwke3l9YDsKICAgICAgICBjb25zdCB6b25lID0gem9uZU1hcC5nZXQoa2V5KTsKICAgICAgICAKICAgICAgICBsZXQgY29sb3IgPSBERUZBVUxUX0NPTE9SOwogICAgICAgIGlmICh6b25lPy5zdGF0ZT8udGVycmFpblR5cGUpIHsKICAgICAgICAgIGNvbG9yID0gVEVSUkFJTl9DT0xPUlNbem9uZS5zdGF0ZS50ZXJyYWluVHlwZV0gfHwgREVGQVVMVF9DT0xPUjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZHJhd0hleChjdHgsIHBpeGVsWCwgcGl4ZWxZLCBjb2xvcik7CiAgICAgIH0KICAgIH0KICAgIAogICAgY3R4LnJlc3RvcmUoKTsKICB9LCBbbWFwRGF0YSwgcGFuXSk7CgogIC8vIEhhbmRsZSBjYW52YXMgcmVzaXplCiAgY29uc3QgcmVzaXplQ2FudmFzID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgY2FudmFzLndpZHRoID0gcmVjdC53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvOwogICAgY2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKGN0eCkgewogICAgICBjdHguc2NhbGUod2luZG93LmRldmljZVBpeGVsUmF0aW8sIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTsKICAgIH0KICAgIAogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICAvLyBNb3VzZSBldmVudCBoYW5kbGVycyBmb3IgcGFubmluZwogIGNvbnN0IGhhbmRsZU1vdXNlRG93biA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7CiAgICBzZXRJc0RyYWdnaW5nKHRydWUpOwogICAgc2V0TGFzdE1vdXNlUG9zKHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfSk7CiAgfTsKCiAgY29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuOwogICAgCiAgICBjb25zdCBkZWx0YVggPSBlLmNsaWVudFggLSBsYXN0TW91c2VQb3MueDsKICAgIGNvbnN0IGRlbHRhWSA9IGUuY2xpZW50WSAtIGxhc3RNb3VzZVBvcy55OwogICAgCiAgICBzZXRQYW4ocHJldiA9PiAoewogICAgICB4OiBwcmV2LnggKyBkZWx0YVgsCiAgICAgIHk6IHByZXYueSArIGRlbHRhWQogICAgfSkpOwogICAgCiAgICBzZXRMYXN0TW91c2VQb3MoeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KTsKICB9OwoKICBjb25zdCBoYW5kbGVNb3VzZVVwID0gKCkgPT4gewogICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7CiAgfTsKCiAgLy8gS2V5Ym9hcmQgcGFubmluZwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHsKICAgICAgY29uc3QgcGFuU3BlZWQgPSAyMDsKICAgICAgCiAgICAgIHN3aXRjaCAoZS5rZXkpIHsKICAgICAgICBjYXNlICdBcnJvd1VwJzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHk6IHByZXYueSArIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93RG93bic6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB5OiBwcmV2LnkgLSBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBcnJvd0xlZnQnOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeDogcHJldi54ICsgcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB4OiBwcmV2LnggLSBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pOwogICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7CiAgfSwgW10pOwoKICAvLyBTZXR1cCBjYW52YXMgYW5kIHJlc2l6ZSBoYW5kbGluZwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICByZXNpemVDYW52YXMoKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMpOwogICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMpOwogIH0sIFtyZXNpemVDYW52YXNdKTsKCiAgLy8gUmUtcmVuZGVyIHdoZW4gbWFwIGRhdGEgb3IgcGFuIGNoYW5nZXMKICB1c2VFZmZlY3QoKCkgPT4gewogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICByZXR1cm4gKAogICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBoLWZ1bGwgcmVsYXRpdmUiPgogICAgICA8Y2FudmFzCiAgICAgICAgcmVmPXtjYW52YXNSZWZ9CiAgICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgaC1mdWxsIGN1cnNvci1ncmFiIGFjdGl2ZTpjdXJzb3ItZ3JhYmJpbmciCiAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiBpc0RyYWdnaW5nID8gJ2dyYWJiaW5nJyA6ICdncmFiJyB9fQogICAgICAgIG9uTW91c2VEb3duPXtoYW5kbGVNb3VzZURvd259CiAgICAgICAgb25Nb3VzZU1vdmU9e2hhbmRsZU1vdXNlTW92ZX0KICAgICAgICBvbk1vdXNlVXA9e2hhbmRsZU1vdXNlVXB9CiAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZVVwfQogICAgICAvPgogICAgICAKICAgICAgey8qIERlYnVnIGluZm8gKi99CiAgICAgIDxkaXYgY2xhc3NOYW1lPSJhYnNvbHV0ZSB0b3AtMiByaWdodC0yIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgdGV4dC13aGl0ZSB0ZXh0LXhzIHAtMiByb3VuZGVkIj4KICAgICAgICA8ZGl2Pk1hcFpvbmVzOiB7bWFwRGF0YS5sZW5ndGh9PC9kaXY+CiAgICAgICAgPGRpdj5QYW46IHtwYW4ueC50b0ZpeGVkKDApfSwge3Bhbi55LnRvRml4ZWQoMCl9PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtZ3JheS0zMDAgbXQtMSI+QXJyb3cga2V5cyBvciBkcmFnIHRvIHBhbjwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn07CgpleHBvcnQgZGVmYXVsdCBHYW1lTWFwOw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAfRsAAAAAAAAAAAAAAADwvw"
				],
				[
					17,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAXRoAAAAAAAAAAAAAXRoAAAAAAABdGgAAAAAAABcaAABpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwoKaW50ZXJmYWNlIE1hcFpvbmUgewogIF9pZDogc3RyaW5nOwogIHR5cGU6IHN0cmluZzsKICBzdGF0ZT86IHsKICAgIGxvY2F0aW9uPzogewogICAgICBmaXJzdD86IG51bWJlcjsKICAgICAgc2Vjb25kPzogbnVtYmVyOwogICAgfTsKICAgIHRlcnJhaW5UeXBlPzogc3RyaW5nOwogICAgW2tleTogc3RyaW5nXTogYW55OwogIH07CiAgW2tleTogc3RyaW5nXTogYW55Owp9CgppbnRlcmZhY2UgR2FtZU1hcFByb3BzIHsKICBtYXBEYXRhOiBNYXBab25lW107Cn0KCmNvbnN0IFRFUlJBSU5fQ09MT1JTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0gewogIEdSQVNTTEFORDogJyM0Q0FGNTAnLAogIE1FQURPVzogJyM4QkMzNEEnLAogIFNDUlVCOiAnI0NEREMzOScsCiAgV09PRExBTkQ6ICcjMkU3RDMyJywKICBST0NLTEFORDogJyM3OTU1NDgnLAogIERSWUxBTkQ6ICcjRkZDMTA3JywKICAvLyBBZGQgbW9yZSB0ZXJyYWluIHR5cGVzIGFzIG5lZWRlZAp9OwoKY29uc3QgREVGQVVMVF9DT0xPUiA9ICcjOUU5RTlFJzsKCmNvbnN0IEdhbWVNYXA6IFJlYWN0LkZDPEdhbWVNYXBQcm9wcz4gPSAoeyBtYXBEYXRhIH0pID0+IHsKICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpOwogIGNvbnN0IFtwYW4sIHNldFBhbl0gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CiAgY29uc3QgW2lzRHJhZ2dpbmcsIHNldElzRHJhZ2dpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtsYXN0TW91c2VQb3MsIHNldExhc3RNb3VzZVBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CgogIC8vIEhleCBncmlkIGNvbnN0YW50cwogIGNvbnN0IEhFWF9XSURUSCA9IDQ4OwogIGNvbnN0IEhFWF9IRUlHSFQgPSA0ODsKICBjb25zdCBIRVhfUkFESVVTID0gMjQ7CiAgY29uc3QgR1JJRF9TSVpFID0gMTI7IC8vIDAtMTEgaW5kZXhlZAogIGNvbnN0IEJPUkRFUl9QQURESU5HID0gNTA7CgogIC8vIENhbGN1bGF0ZSBoZXggdmVydGljZXMgZm9yIGZsYXQtdG9wIGhleGFnb24KICBjb25zdCBnZXRIZXhWZXJ0aWNlcyA9IChjZW50ZXJYOiBudW1iZXIsIGNlbnRlclk6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl1bXSA9PiB7CiAgICBjb25zdCB2ZXJ0aWNlczogW251bWJlciwgbnVtYmVyXVtdID0gW107CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykgewogICAgICBjb25zdCBhbmdsZSA9IChNYXRoLlBJIC8gMykgKiBpOwogICAgICBjb25zdCB4ID0gY2VudGVyWCArIEhFWF9SQURJVVMgKiBNYXRoLmNvcyhhbmdsZSk7CiAgICAgIGNvbnN0IHkgPSBjZW50ZXJZICsgSEVYX1JBRElVUyAqIE1hdGguc2luKGFuZ2xlKTsKICAgICAgdmVydGljZXMucHVzaChbeCwgeV0pOwogICAgfQogICAgcmV0dXJuIHZlcnRpY2VzOwogIH07CgogIC8vIENvbnZlcnQgZ3JpZCBjb29yZGluYXRlcyB0byBwaXhlbCBjb29yZGluYXRlcwogIGNvbnN0IGdyaWRUb1BpeGVsID0gKGdyaWRYOiBudW1iZXIsIGdyaWRZOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdID0+IHsKICAgIGNvbnN0IGhleFdpZHRoID0gSEVYX1JBRElVUyAqIDI7CiAgICBjb25zdCBoZXhIZWlnaHQgPSBIRVhfUkFESVVTICogTWF0aC5zcXJ0KDMpOwogICAgCiAgICBsZXQgcGl4ZWxYID0gZ3JpZFggKiBoZXhXaWR0aCAqIDAuNzU7CiAgICBsZXQgcGl4ZWxZID0gZ3JpZFkgKiBoZXhIZWlnaHQ7CiAgICAKICAgIC8vIE9mZnNldCBvZGQgY29sdW1ucyAodmVydGljYWwgb2Zmc2V0KQogICAgaWYgKGdyaWRYICUgMiA9PT0gMSkgewogICAgICBwaXhlbFkgKz0gaGV4SGVpZ2h0ICogMC41OwogICAgfQogICAgCiAgICAvLyBBZGQgYm9yZGVyIHBhZGRpbmcKICAgIHBpeGVsWCArPSBCT1JERVJfUEFERElORzsKICAgIHBpeGVsWSArPSBCT1JERVJfUEFERElORzsKICAgIAogICAgcmV0dXJuIFtwaXhlbFgsIHBpeGVsWV07CiAgfTsKCiAgLy8gRHJhdyBhIHNpbmdsZSBoZXhhZ29uCiAgY29uc3QgZHJhd0hleCA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY2VudGVyWDogbnVtYmVyLCBjZW50ZXJZOiBudW1iZXIsIGNvbG9yOiBzdHJpbmcpID0+IHsKICAgIGNvbnN0IHZlcnRpY2VzID0gZ2V0SGV4VmVydGljZXMoY2VudGVyWCwgY2VudGVyWSk7CiAgICAKICAgIGN0eC5iZWdpblBhdGgoKTsKICAgIGN0eC5tb3ZlVG8odmVydGljZXNbMF1bMF0sIHZlcnRpY2VzWzBdWzFdKTsKICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgY3R4LmxpbmVUbyh2ZXJ0aWNlc1tpXVswXSwgdmVydGljZXNbaV1bMV0pOwogICAgfQogICAgY3R4LmNsb3NlUGF0aCgpOwogICAgCiAgICAvLyBGaWxsIGhleAogICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yOwogICAgY3R4LmZpbGwoKTsKICAgIAogICAgLy8gRHJhdyBib3JkZXIKICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMzMzJzsKICAgIGN0eC5saW5lV2lkdGggPSAxOwogICAgY3R4LnN0cm9rZSgpOwogIH07CgogIC8vIFJlbmRlciB0aGUgbWFwCiAgY29uc3QgcmVuZGVyTWFwID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgIGlmICghY3R4KSByZXR1cm47CiAgICAKICAgIC8vIENsZWFyIGNhbnZhcwogICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgCiAgICAvLyBBcHBseSBwYW5uaW5nIHRyYW5zZm9ybQogICAgY3R4LnNhdmUoKTsKICAgIGN0eC50cmFuc2xhdGUocGFuLngsIHBhbi55KTsKICAgIAogICAgLy8gQ3JlYXRlIGEgbWFwIG9mIGdyaWQgcG9zaXRpb25zIHRvIE1hcFpvbmVzCiAgICBjb25zdCB6b25lTWFwID0gbmV3IE1hcDxzdHJpbmcsIE1hcFpvbmU+KCk7CiAgICBtYXBEYXRhLmZvckVhY2goem9uZSA9PiB7CiAgICAgIGlmICh6b25lLnN0YXRlPy5sb2NhdGlvbj8uZmlyc3QgIT09IHVuZGVmaW5lZCAmJiB6b25lLnN0YXRlPy5sb2NhdGlvbj8uc2Vjb25kICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zdCBrZXkgPSBgJHt6b25lLnN0YXRlLmxvY2F0aW9uLmZpcnN0fSwke3pvbmUuc3RhdGUubG9jYXRpb24uc2Vjb25kfWA7CiAgICAgICAgem9uZU1hcC5zZXQoa2V5LCB6b25lKTsKICAgICAgfQogICAgfSk7CiAgICAKICAgIC8vIFJlbmRlciBhbGwgZ3JpZCBwb3NpdGlvbnMgKDAtMTEgeCAwLTExKQogICAgZm9yIChsZXQgeSA9IDA7IHkgPCBHUklEX1NJWkU7IHkrKykgewogICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IEdSSURfU0laRTsgeCsrKSB7CiAgICAgICAgY29uc3QgW3BpeGVsWCwgcGl4ZWxZXSA9IGdyaWRUb1BpeGVsKHgsIHkpOwogICAgICAgIGNvbnN0IGtleSA9IGAke3h9LCR7eX1gOwogICAgICAgIGNvbnN0IHpvbmUgPSB6b25lTWFwLmdldChrZXkpOwogICAgICAgIAogICAgICAgIGxldCBjb2xvciA9IERFRkFVTFRfQ09MT1I7CiAgICAgICAgaWYgKHpvbmU/LnN0YXRlPy50ZXJyYWluVHlwZSkgewogICAgICAgICAgY29sb3IgPSBURVJSQUlOX0NPTE9SU1t6b25lLnN0YXRlLnRlcnJhaW5UeXBlXSB8fCBERUZBVUxUX0NPTE9SOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBkcmF3SGV4KGN0eCwgcGl4ZWxYLCBwaXhlbFksIGNvbG9yKTsKICAgICAgfQogICAgfQogICAgCiAgICBjdHgucmVzdG9yZSgpOwogIH0sIFttYXBEYXRhLCBwYW5dKTsKCiAgLy8gSGFuZGxlIGNhbnZhcyByZXNpemUKICBjb25zdCByZXNpemVDYW52YXMgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDsKICAgIGlmICghY2FudmFzKSByZXR1cm47CiAgICAKICAgIGNvbnN0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBjYW52YXMud2lkdGggPSByZWN0LndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICBjYW52YXMuaGVpZ2h0ID0gcmVjdC5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbzsKICAgIAogICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICBpZiAoY3R4KSB7CiAgICAgIGN0eC5zY2FsZSh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgd2luZG93LmRldmljZVBpeGVsUmF0aW8pOwogICAgfQogICAgCiAgICByZW5kZXJNYXAoKTsKICB9LCBbcmVuZGVyTWFwXSk7CgogIC8vIE1vdXNlIGV2ZW50IGhhbmRsZXJzIGZvciBwYW5uaW5nCiAgY29uc3QgaGFuZGxlTW91c2VEb3duID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIHNldElzRHJhZ2dpbmcodHJ1ZSk7CiAgICBzZXRMYXN0TW91c2VQb3MoeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KTsKICB9OwoKICBjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSAoZTogUmVhY3QuTW91c2VFdmVudCkgPT4gewogICAgaWYgKCFpc0RyYWdnaW5nKSByZXR1cm47CiAgICAKICAgIGNvbnN0IGRlbHRhWCA9IGUuY2xpZW50WCAtIGxhc3RNb3VzZVBvcy54OwogICAgY29uc3QgZGVsdGFZID0gZS5jbGllbnRZIC0gbGFzdE1vdXNlUG9zLnk7CiAgICAKICAgIHNldFBhbihwcmV2ID0+ICh7CiAgICAgIHg6IHByZXYueCArIGRlbHRhWCwKICAgICAgeTogcHJldi55ICsgZGVsdGFZCiAgICB9KSk7CiAgICAKICAgIHNldExhc3RNb3VzZVBvcyh7IHg6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZIH0pOwogIH07CgogIGNvbnN0IGhhbmRsZU1vdXNlVXAgPSAoKSA9PiB7CiAgICBzZXRJc0RyYWdnaW5nKGZhbHNlKTsKICB9OwoKICAvLyBLZXlib2FyZCBwYW5uaW5nCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4gewogICAgICBjb25zdCBwYW5TcGVlZCA9IDIwOwogICAgICAKICAgICAgc3dpdGNoIChlLmtleSkgewogICAgICAgIGNhc2UgJ0Fycm93VXAnOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeTogcHJldi55ICsgcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQXJyb3dEb3duJzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHk6IHByZXYueSAtIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB4OiBwcmV2LnggKyBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHg6IHByZXYueCAtIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9OwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7CiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTsKICB9LCBbXSk7CgogIC8vIFNldHVwIGNhbnZhcyBhbmQgcmVzaXplIGhhbmRsaW5nCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIHJlc2l6ZUNhbnZhcygpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUNhbnZhcyk7CiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUNhbnZhcyk7CiAgfSwgW3Jlc2l6ZUNhbnZhc10pOwoKICAvLyBSZS1yZW5kZXIgd2hlbiBtYXAgZGF0YSBvciBwYW4gY2hhbmdlcwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICByZW5kZXJNYXAoKTsKICB9LCBbcmVuZGVyTWFwXSk7CgogIHJldHVybiAoCiAgICA8ZGl2IGNsYXNzTmFtZT0idy1mdWxsIGgtZnVsbCByZWxhdGl2ZSI+CiAgICAgIDxjYW52YXMKICAgICAgICByZWY9e2NhbnZhc1JlZn0KICAgICAgICBjbGFzc05hbWU9InctZnVsbCBoLWZ1bGwgY3Vyc29yLWdyYWIgYWN0aXZlOmN1cnNvci1ncmFiYmluZyIKICAgICAgICBzdHlsZT17eyBjdXJzb3I6IGlzRHJhZ2dpbmcgPyAnZ3JhYmJpbmcnIDogJ2dyYWInIH19CiAgICAgICAgb25Nb3VzZURvd249e2hhbmRsZU1vdXNlRG93bn0KICAgICAgICBvbk1vdXNlTW92ZT17aGFuZGxlTW91c2VNb3ZlfQogICAgICAgIG9uTW91c2VVcD17aGFuZGxlTW91c2VVcH0KICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlVXB9CiAgICAgIC8+CiAgICAgIAogICAgICB7LyogRGVidWcgaW5mbyAqL30KICAgICAgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIHRvcC0yIHJpZ2h0LTIgYmctYmxhY2sgYmctb3BhY2l0eS01MCB0ZXh0LXdoaXRlIHRleHQteHMgcC0yIHJvdW5kZWQiPgogICAgICAgIDxkaXY+TWFwWm9uZXM6IHttYXBEYXRhLmxlbmd0aH08L2Rpdj4KICAgICAgICA8ZGl2PlBhbjoge3Bhbi54LnRvRml4ZWQoMCl9LCB7cGFuLnkudG9GaXhlZCgwKX08L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1ncmF5LTMwMCBtdC0xIj5BcnJvdyBrZXlzIG9yIGRyYWcgdG8gcGFuPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfTsKCmV4cG9ydCBkZWZhdWx0IEdhbWVNYXA7",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAFxoAAAAAAAAAAAAAAADwvw"
				],
				[
					21,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAXRoAAAAAAAAAAAAAXRoAAAAAAABdGgAAAAAAAF0aAABpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwoKaW50ZXJmYWNlIE1hcFpvbmUgewogIF9pZDogc3RyaW5nOwogIHR5cGU6IHN0cmluZzsKICBzdGF0ZT86IHsKICAgIGxvY2F0aW9uPzogewogICAgICBmaXJzdD86IG51bWJlcjsKICAgICAgc2Vjb25kPzogbnVtYmVyOwogICAgfTsKICAgIHRlcnJhaW5UeXBlPzogc3RyaW5nOwogICAgW2tleTogc3RyaW5nXTogYW55OwogIH07CiAgW2tleTogc3RyaW5nXTogYW55Owp9CgppbnRlcmZhY2UgR2FtZU1hcFByb3BzIHsKICBtYXBEYXRhOiBNYXBab25lW107Cn0KCmNvbnN0IFRFUlJBSU5fQ09MT1JTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0gewogIEdSQVNTTEFORDogJyM0Q0FGNTAnLAogIE1FQURPVzogJyM4QkMzNEEnLAogIFNDUlVCOiAnI0NEREMzOScsCiAgV09PRExBTkQ6ICcjMkU3RDMyJywKICBST0NLTEFORDogJyM3OTU1NDgnLAogIERSWUxBTkQ6ICcjRkZDMTA3JywKICAvLyBBZGQgbW9yZSB0ZXJyYWluIHR5cGVzIGFzIG5lZWRlZAp9OwoKY29uc3QgREVGQVVMVF9DT0xPUiA9ICcjOUU5RTlFJzsKCmNvbnN0IEdhbWVNYXA6IFJlYWN0LkZDPEdhbWVNYXBQcm9wcz4gPSAoeyBtYXBEYXRhIH0pID0+IHsKICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpOwogIGNvbnN0IFtwYW4sIHNldFBhbl0gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CiAgY29uc3QgW2lzRHJhZ2dpbmcsIHNldElzRHJhZ2dpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtsYXN0TW91c2VQb3MsIHNldExhc3RNb3VzZVBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CgogIC8vIEhleCBncmlkIGNvbnN0YW50cwogIGNvbnN0IEhFWF9XSURUSCA9IDk2OwogIGNvbnN0IEhFWF9IRUlHSFQgPSA5NjsKICBjb25zdCBIRVhfUkFESVVTID0gNDg7CiAgY29uc3QgQk9SREVSX1BBRERJTkcgPSA1MDsKCiAgLy8gQ2FsY3VsYXRlIGhleCB2ZXJ0aWNlcyBmb3IgZmxhdC10b3AgaGV4YWdvbgogIGNvbnN0IGdldEhleFZlcnRpY2VzID0gKGNlbnRlclg6IG51bWJlciwgY2VudGVyWTogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXVtdID0+IHsKICAgIGNvbnN0IHZlcnRpY2VzOiBbbnVtYmVyLCBudW1iZXJdW10gPSBbXTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7CiAgICAgIGNvbnN0IGFuZ2xlID0gKE1hdGguUEkgLyAzKSAqIGk7CiAgICAgIGNvbnN0IHggPSBjZW50ZXJYICsgSEVYX1JBRElVUyAqIE1hdGguY29zKGFuZ2xlKTsKICAgICAgY29uc3QgeSA9IGNlbnRlclkgKyBIRVhfUkFESVVTICogTWF0aC5zaW4oYW5nbGUpOwogICAgICB2ZXJ0aWNlcy5wdXNoKFt4LCB5XSk7CiAgICB9CiAgICByZXR1cm4gdmVydGljZXM7CiAgfTsKCiAgLy8gQ29udmVydCBncmlkIGNvb3JkaW5hdGVzIHRvIHBpeGVsIGNvb3JkaW5hdGVzCiAgY29uc3QgZ3JpZFRvUGl4ZWwgPSAoZ3JpZFg6IG51bWJlciwgZ3JpZFk6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0gPT4gewogICAgY29uc3QgaGV4V2lkdGggPSBIRVhfUkFESVVTICogMjsKICAgIGNvbnN0IGhleEhlaWdodCA9IEhFWF9SQURJVVMgKiBNYXRoLnNxcnQoMyk7CiAgICAKICAgIGxldCBwaXhlbFggPSBncmlkWCAqIGhleFdpZHRoICogMC43NTsKICAgIGxldCBwaXhlbFkgPSBncmlkWSAqIGhleEhlaWdodDsKICAgIAogICAgLy8gT2Zmc2V0IG9kZCBjb2x1bW5zICh2ZXJ0aWNhbCBvZmZzZXQpCiAgICBpZiAoZ3JpZFggJSAyID09PSAxKSB7CiAgICAgIHBpeGVsWSArPSBoZXhIZWlnaHQgKiAwLjU7CiAgICB9CiAgICAKICAgIC8vIEFkZCBib3JkZXIgcGFkZGluZwogICAgcGl4ZWxYICs9IEJPUkRFUl9QQURESU5HOwogICAgcGl4ZWxZICs9IEJPUkRFUl9QQURESU5HOwogICAgCiAgICByZXR1cm4gW3BpeGVsWCwgcGl4ZWxZXTsKICB9OwoKICAvLyBEcmF3IGEgc2luZ2xlIGhleGFnb24KICBjb25zdCBkcmF3SGV4ID0gKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjZW50ZXJYOiBudW1iZXIsIGNlbnRlclk6IG51bWJlciwgY29sb3I6IHN0cmluZykgPT4gewogICAgY29uc3QgdmVydGljZXMgPSBnZXRIZXhWZXJ0aWNlcyhjZW50ZXJYLCBjZW50ZXJZKTsKICAgIAogICAgY3R4LmJlZ2luUGF0aCgpOwogICAgY3R4Lm1vdmVUbyh2ZXJ0aWNlc1swXVswXSwgdmVydGljZXNbMF1bMV0pOwogICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykgewogICAgICBjdHgubGluZVRvKHZlcnRpY2VzW2ldWzBdLCB2ZXJ0aWNlc1tpXVsxXSk7CiAgICB9CiAgICBjdHguY2xvc2VQYXRoKCk7CiAgICAKICAgIC8vIEZpbGwgaGV4CiAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7CiAgICBjdHguZmlsbCgpOwogICAgCiAgICAvLyBEcmF3IGJvcmRlcgogICAgY3R4LnN0cm9rZVN0eWxlID0gJyMzMzMnOwogICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICBjdHguc3Ryb2tlKCk7CiAgfTsKCiAgLy8gUmVuZGVyIHRoZSBtYXAKICBjb25zdCByZW5kZXJNYXAgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDsKICAgIGlmICghY2FudmFzKSByZXR1cm47CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKCFjdHgpIHJldHVybjsKICAgIAogICAgLy8gQ2xlYXIgY2FudmFzCiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAKICAgIC8vIEFwcGx5IHBhbm5pbmcgdHJhbnNmb3JtCiAgICBjdHguc2F2ZSgpOwogICAgY3R4LnRyYW5zbGF0ZShwYW4ueCwgcGFuLnkpOwogICAgCiAgICAvLyBDYWxjdWxhdGUgZ3JpZCBkaW1lbnNpb25zIGZyb20gbWFwIGRhdGEKICAgIGNvbnN0IHsgbWF4WCwgbWF4WSB9ID0gZ2V0R3JpZERpbWVuc2lvbnMoKTsKICAgIAogICAgLy8gQ3JlYXRlIGEgbWFwIG9mIGdyaWQgcG9zaXRpb25zIHRvIE1hcFpvbmVzCiAgICBjb25zdCB6b25lTWFwID0gbmV3IE1hcDxzdHJpbmcsIE1hcFpvbmU+KCk7CiAgICBtYXBEYXRhLmZvckVhY2goem9uZSA9PiB7CiAgICAgIGlmICh6b25lLnN0YXRlPy5sb2NhdGlvbj8uZmlyc3QgIT09IHVuZGVmaW5lZCAmJiB6b25lLnN0YXRlPy5sb2NhdGlvbj8uc2Vjb25kICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zdCBrZXkgPSBgJHt6b25lLnN0YXRlLmxvY2F0aW9uLmZpcnN0fSwke3pvbmUuc3RhdGUubG9jYXRpb24uc2Vjb25kfWA7CiAgICAgICAgem9uZU1hcC5zZXQoa2V5LCB6b25lKTsKICAgICAgfQogICAgfSk7CiAgICAKICAgIC8vIFJlbmRlciBhbGwgZ3JpZCBwb3NpdGlvbnMgYmFzZWQgb24gYWN0dWFsIGRhdGEgZGltZW5zaW9ucwogICAgZm9yIChsZXQgeSA9IDA7IHkgPD0gbWF4WTsgeSsrKSB7CiAgICAgIGZvciAobGV0IHggPSAwOyB4IDw9IG1heFg7IHgrKykgewogICAgICAgIGNvbnN0IFtwaXhlbFgsIHBpeGVsWV0gPSBncmlkVG9QaXhlbCh4LCB5KTsKICAgICAgICBjb25zdCBrZXkgPSBgJHt4fSwke3l9YDsKICAgICAgICBjb25zdCB6b25lID0gem9uZU1hcC5nZXQoa2V5KTsKICAgICAgICAKICAgICAgICBsZXQgY29sb3IgPSBERUZBVUxUX0NPTE9SOwogICAgICAgIGlmICh6b25lPy5zdGF0ZT8udGVycmFpblR5cGUpIHsKICAgICAgICAgIGNvbG9yID0gVEVSUkFJTl9DT0xPUlNbem9uZS5zdGF0ZS50ZXJyYWluVHlwZV0gfHwgREVGQVVMVF9DT0xPUjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZHJhd0hleChjdHgsIHBpeGVsWCwgcGl4ZWxZLCBjb2xvcik7CiAgICAgIH0KICAgIH0KICAgIAogICAgY3R4LnJlc3RvcmUoKTsKICB9LCBbbWFwRGF0YSwgcGFuXSk7CgogIC8vIEhhbmRsZSBjYW52YXMgcmVzaXplCiAgY29uc3QgcmVzaXplQ2FudmFzID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgY2FudmFzLndpZHRoID0gcmVjdC53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvOwogICAgY2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKGN0eCkgewogICAgICBjdHguc2NhbGUod2luZG93LmRldmljZVBpeGVsUmF0aW8sIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTsKICAgIH0KICAgIAogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICAvLyBNb3VzZSBldmVudCBoYW5kbGVycyBmb3IgcGFubmluZwogIGNvbnN0IGhhbmRsZU1vdXNlRG93biA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7CiAgICBzZXRJc0RyYWdnaW5nKHRydWUpOwogICAgc2V0TGFzdE1vdXNlUG9zKHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfSk7CiAgfTsKCiAgY29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuOwogICAgCiAgICBjb25zdCBkZWx0YVggPSBlLmNsaWVudFggLSBsYXN0TW91c2VQb3MueDsKICAgIGNvbnN0IGRlbHRhWSA9IGUuY2xpZW50WSAtIGxhc3RNb3VzZVBvcy55OwogICAgCiAgICBzZXRQYW4ocHJldiA9PiAoewogICAgICB4OiBwcmV2LnggKyBkZWx0YVgsCiAgICAgIHk6IHByZXYueSArIGRlbHRhWQogICAgfSkpOwogICAgCiAgICBzZXRMYXN0TW91c2VQb3MoeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KTsKICB9OwoKICBjb25zdCBoYW5kbGVNb3VzZVVwID0gKCkgPT4gewogICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7CiAgfTsKCiAgLy8gS2V5Ym9hcmQgcGFubmluZwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHsKICAgICAgY29uc3QgcGFuU3BlZWQgPSAyMDsKICAgICAgCiAgICAgIHN3aXRjaCAoZS5rZXkpIHsKICAgICAgICBjYXNlICdBcnJvd1VwJzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHk6IHByZXYueSArIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93RG93bic6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB5OiBwcmV2LnkgLSBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBcnJvd0xlZnQnOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeDogcHJldi54ICsgcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB4OiBwcmV2LnggLSBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pOwogICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7CiAgfSwgW10pOwoKICAvLyBTZXR1cCBjYW52YXMgYW5kIHJlc2l6ZSBoYW5kbGluZwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICByZXNpemVDYW52YXMoKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMpOwogICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMpOwogIH0sIFtyZXNpemVDYW52YXNdKTsKCiAgLy8gUmUtcmVuZGVyIHdoZW4gbWFwIGRhdGEgb3IgcGFuIGNoYW5nZXMKICB1c2VFZmZlY3QoKCkgPT4gewogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICByZXR1cm4gKAogICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBoLWZ1bGwgcmVsYXRpdmUiPgogICAgICA8Y2FudmFzCiAgICAgICAgcmVmPXtjYW52YXNSZWZ9CiAgICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgaC1mdWxsIGN1cnNvci1ncmFiIGFjdGl2ZTpjdXJzb3ItZ3JhYmJpbmciCiAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiBpc0RyYWdnaW5nID8gJ2dyYWJiaW5nJyA6ICdncmFiJyB9fQogICAgICAgIG9uTW91c2VEb3duPXtoYW5kbGVNb3VzZURvd259CiAgICAgICAgb25Nb3VzZU1vdmU9e2hhbmRsZU1vdXNlTW92ZX0KICAgICAgICBvbk1vdXNlVXA9e2hhbmRsZU1vdXNlVXB9CiAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZVVwfQogICAgICAvPgogICAgICAKICAgICAgey8qIERlYnVnIGluZm8gKi99CiAgICAgIDxkaXYgY2xhc3NOYW1lPSJhYnNvbHV0ZSB0b3AtMiByaWdodC0yIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgdGV4dC13aGl0ZSB0ZXh0LXhzIHAtMiByb3VuZGVkIj4KICAgICAgICA8ZGl2Pk1hcFpvbmVzOiB7bWFwRGF0YS5sZW5ndGh9PC9kaXY+CiAgICAgICAgPGRpdj5QYW46IHtwYW4ueC50b0ZpeGVkKDApfSwge3Bhbi55LnRvRml4ZWQoMCl9PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtZ3JheS0zMDAgbXQtMSI+QXJyb3cga2V5cyBvciBkcmFnIHRvIHBhbjwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn07CgpleHBvcnQgZGVmYXVsdCBHYW1lTWFwOw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAXRoAAAAAAAAAAAAAAADwvw"
				],
				[
					25,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAXRoAAAAAAAAAAAAAXRoAAAAAAABdGgAAAAAAAF0aAABpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwoKaW50ZXJmYWNlIE1hcFpvbmUgewogIF9pZDogc3RyaW5nOwogIHR5cGU6IHN0cmluZzsKICBzdGF0ZT86IHsKICAgIGxvY2F0aW9uPzogewogICAgICBmaXJzdD86IG51bWJlcjsKICAgICAgc2Vjb25kPzogbnVtYmVyOwogICAgfTsKICAgIHRlcnJhaW5UeXBlPzogc3RyaW5nOwogICAgW2tleTogc3RyaW5nXTogYW55OwogIH07CiAgW2tleTogc3RyaW5nXTogYW55Owp9CgppbnRlcmZhY2UgR2FtZU1hcFByb3BzIHsKICBtYXBEYXRhOiBNYXBab25lW107Cn0KCmNvbnN0IFRFUlJBSU5fQ09MT1JTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0gewogIEdSQVNTTEFORDogJyM0Q0FGNTAnLAogIE1FQURPVzogJyM4QkMzNEEnLAogIFNDUlVCOiAnI0NEREMzOScsCiAgV09PRExBTkQ6ICcjMkU3RDMyJywKICBST0NLTEFORDogJyM3OTU1NDgnLAogIERSWUxBTkQ6ICcjRkZDMTA3JywKICAvLyBBZGQgbW9yZSB0ZXJyYWluIHR5cGVzIGFzIG5lZWRlZAp9OwoKY29uc3QgREVGQVVMVF9DT0xPUiA9ICcjOUU5RTlFJzsKCmNvbnN0IEdhbWVNYXA6IFJlYWN0LkZDPEdhbWVNYXBQcm9wcz4gPSAoeyBtYXBEYXRhIH0pID0+IHsKICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpOwogIGNvbnN0IFtwYW4sIHNldFBhbl0gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CiAgY29uc3QgW2lzRHJhZ2dpbmcsIHNldElzRHJhZ2dpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtsYXN0TW91c2VQb3MsIHNldExhc3RNb3VzZVBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CgogIC8vIEhleCBncmlkIGNvbnN0YW50cwogIGNvbnN0IEhFWF9XSURUSCA9IDk2OwogIGNvbnN0IEhFWF9IRUlHSFQgPSA5NjsKICBjb25zdCBIRVhfUkFESVVTID0gNDg7CiAgY29uc3QgQk9SREVSX1BBRERJTkcgPSA1MDsKCiAgLy8gQ2FsY3VsYXRlIGhleCB2ZXJ0aWNlcyBmb3IgZmxhdC10b3AgaGV4YWdvbgogIGNvbnN0IGdldEhleFZlcnRpY2VzID0gKGNlbnRlclg6IG51bWJlciwgY2VudGVyWTogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXVtdID0+IHsKICAgIGNvbnN0IHZlcnRpY2VzOiBbbnVtYmVyLCBudW1iZXJdW10gPSBbXTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7CiAgICAgIGNvbnN0IGFuZ2xlID0gKE1hdGguUEkgLyAzKSAqIGk7CiAgICAgIGNvbnN0IHggPSBjZW50ZXJYICsgSEVYX1JBRElVUyAqIE1hdGguY29zKGFuZ2xlKTsKICAgICAgY29uc3QgeSA9IGNlbnRlclkgKyBIRVhfUkFESVVTICogTWF0aC5zaW4oYW5nbGUpOwogICAgICB2ZXJ0aWNlcy5wdXNoKFt4LCB5XSk7CiAgICB9CiAgICByZXR1cm4gdmVydGljZXM7CiAgfTsKCiAgLy8gQ29udmVydCBncmlkIGNvb3JkaW5hdGVzIHRvIHBpeGVsIGNvb3JkaW5hdGVzCiAgY29uc3QgZ3JpZFRvUGl4ZWwgPSAoZ3JpZFg6IG51bWJlciwgZ3JpZFk6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0gPT4gewogICAgY29uc3QgaGV4V2lkdGggPSBIRVhfUkFESVVTICogMjsKICAgIGNvbnN0IGhleEhlaWdodCA9IEhFWF9SQURJVVMgKiBNYXRoLnNxcnQoMyk7CiAgICAKICAgIGxldCBwaXhlbFggPSBncmlkWCAqIGhleFdpZHRoICogMC43NTsKICAgIGxldCBwaXhlbFkgPSBncmlkWSAqIGhleEhlaWdodDsKICAgIAogICAgLy8gT2Zmc2V0IG9kZCBjb2x1bW5zICh2ZXJ0aWNhbCBvZmZzZXQpCiAgICBpZiAoZ3JpZFggJSAyID09PSAxKSB7CiAgICAgIHBpeGVsWSArPSBoZXhIZWlnaHQgKiAwLjU7CiAgICB9CiAgICAKICAgIC8vIEFkZCBib3JkZXIgcGFkZGluZwogICAgcGl4ZWxYICs9IEJPUkRFUl9QQURESU5HOwogICAgcGl4ZWxZICs9IEJPUkRFUl9QQURESU5HOwogICAgCiAgICByZXR1cm4gW3BpeGVsWCwgcGl4ZWxZXTsKICB9OwoKICAvLyBEcmF3IGEgc2luZ2xlIGhleGFnb24KICBjb25zdCBkcmF3SGV4ID0gKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjZW50ZXJYOiBudW1iZXIsIGNlbnRlclk6IG51bWJlciwgY29sb3I6IHN0cmluZykgPT4gewogICAgY29uc3QgdmVydGljZXMgPSBnZXRIZXhWZXJ0aWNlcyhjZW50ZXJYLCBjZW50ZXJZKTsKICAgIAogICAgY3R4LmJlZ2luUGF0aCgpOwogICAgY3R4Lm1vdmVUbyh2ZXJ0aWNlc1swXVswXSwgdmVydGljZXNbMF1bMV0pOwogICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykgewogICAgICBjdHgubGluZVRvKHZlcnRpY2VzW2ldWzBdLCB2ZXJ0aWNlc1tpXVsxXSk7CiAgICB9CiAgICBjdHguY2xvc2VQYXRoKCk7CiAgICAKICAgIC8vIEZpbGwgaGV4CiAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7CiAgICBjdHguZmlsbCgpOwogICAgCiAgICAvLyBEcmF3IGJvcmRlcgogICAgY3R4LnN0cm9rZVN0eWxlID0gJyMzMzMnOwogICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICBjdHguc3Ryb2tlKCk7CiAgfTsKCiAgLy8gUmVuZGVyIHRoZSBtYXAKICBjb25zdCByZW5kZXJNYXAgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDsKICAgIGlmICghY2FudmFzKSByZXR1cm47CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKCFjdHgpIHJldHVybjsKICAgIAogICAgLy8gQ2xlYXIgY2FudmFzCiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAKICAgIC8vIEFwcGx5IHBhbm5pbmcgdHJhbnNmb3JtCiAgICBjdHguc2F2ZSgpOwogICAgY3R4LnRyYW5zbGF0ZShwYW4ueCwgcGFuLnkpOwogICAgCiAgICAvLyBDYWxjdWxhdGUgZ3JpZCBkaW1lbnNpb25zIGZyb20gbWFwIGRhdGEKICAgIGNvbnN0IHsgbWF4WCwgbWF4WSB9ID0gZ2V0R3JpZERpbWVuc2lvbnMoKTsKICAgIAogICAgLy8gQ3JlYXRlIGEgbWFwIG9mIGdyaWQgcG9zaXRpb25zIHRvIE1hcFpvbmVzCiAgICBjb25zdCB6b25lTWFwID0gbmV3IE1hcDxzdHJpbmcsIE1hcFpvbmU+KCk7CiAgICBtYXBEYXRhLmZvckVhY2goem9uZSA9PiB7CiAgICAgIGlmICh6b25lLnN0YXRlPy5sb2NhdGlvbj8uZmlyc3QgIT09IHVuZGVmaW5lZCAmJiB6b25lLnN0YXRlPy5sb2NhdGlvbj8uc2Vjb25kICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zdCBrZXkgPSBgJHt6b25lLnN0YXRlLmxvY2F0aW9uLmZpcnN0fSwke3pvbmUuc3RhdGUubG9jYXRpb24uc2Vjb25kfWA7CiAgICAgICAgem9uZU1hcC5zZXQoa2V5LCB6b25lKTsKICAgICAgfQogICAgfSk7CiAgICAKICAgIC8vIFJlbmRlciBhbGwgZ3JpZCBwb3NpdGlvbnMgYmFzZWQgb24gYWN0dWFsIGRhdGEgZGltZW5zaW9ucwogICAgZm9yIChsZXQgeSA9IDA7IHkgPD0gbWF4WTsgeSsrKSB7CiAgICAgIGZvciAobGV0IHggPSAwOyB4IDw9IG1heFg7IHgrKykgewogICAgICAgIGNvbnN0IFtwaXhlbFgsIHBpeGVsWV0gPSBncmlkVG9QaXhlbCh4LCB5KTsKICAgICAgICBjb25zdCBrZXkgPSBgJHt4fSwke3l9YDsKICAgICAgICBjb25zdCB6b25lID0gem9uZU1hcC5nZXQoa2V5KTsKICAgICAgICAKICAgICAgICBsZXQgY29sb3IgPSBERUZBVUxUX0NPTE9SOwogICAgICAgIGlmICh6b25lPy5zdGF0ZT8udGVycmFpblR5cGUpIHsKICAgICAgICAgIGNvbG9yID0gVEVSUkFJTl9DT0xPUlNbem9uZS5zdGF0ZS50ZXJyYWluVHlwZV0gfHwgREVGQVVMVF9DT0xPUjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZHJhd0hleChjdHgsIHBpeGVsWCwgcGl4ZWxZLCBjb2xvcik7CiAgICAgIH0KICAgIH0KICAgIAogICAgY3R4LnJlc3RvcmUoKTsKICB9LCBbbWFwRGF0YSwgcGFuXSk7CgogIC8vIEhhbmRsZSBjYW52YXMgcmVzaXplCiAgY29uc3QgcmVzaXplQ2FudmFzID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgY2FudmFzLndpZHRoID0gcmVjdC53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvOwogICAgY2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKGN0eCkgewogICAgICBjdHguc2NhbGUod2luZG93LmRldmljZVBpeGVsUmF0aW8sIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTsKICAgIH0KICAgIAogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICAvLyBNb3VzZSBldmVudCBoYW5kbGVycyBmb3IgcGFubmluZwogIGNvbnN0IGhhbmRsZU1vdXNlRG93biA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7CiAgICBzZXRJc0RyYWdnaW5nKHRydWUpOwogICAgc2V0TGFzdE1vdXNlUG9zKHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfSk7CiAgfTsKCiAgY29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuOwogICAgCiAgICBjb25zdCBkZWx0YVggPSBlLmNsaWVudFggLSBsYXN0TW91c2VQb3MueDsKICAgIGNvbnN0IGRlbHRhWSA9IGUuY2xpZW50WSAtIGxhc3RNb3VzZVBvcy55OwogICAgCiAgICBzZXRQYW4ocHJldiA9PiAoewogICAgICB4OiBwcmV2LnggKyBkZWx0YVgsCiAgICAgIHk6IHByZXYueSArIGRlbHRhWQogICAgfSkpOwogICAgCiAgICBzZXRMYXN0TW91c2VQb3MoeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KTsKICB9OwoKICBjb25zdCBoYW5kbGVNb3VzZVVwID0gKCkgPT4gewogICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7CiAgfTsKCiAgLy8gS2V5Ym9hcmQgcGFubmluZwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHsKICAgICAgY29uc3QgcGFuU3BlZWQgPSAyMDsKICAgICAgCiAgICAgIHN3aXRjaCAoZS5rZXkpIHsKICAgICAgICBjYXNlICdBcnJvd1VwJzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHk6IHByZXYueSArIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93RG93bic6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB5OiBwcmV2LnkgLSBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBcnJvd0xlZnQnOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeDogcHJldi54ICsgcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB4OiBwcmV2LnggLSBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pOwogICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7CiAgfSwgW10pOwoKICAvLyBTZXR1cCBjYW52YXMgYW5kIHJlc2l6ZSBoYW5kbGluZwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICByZXNpemVDYW52YXMoKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMpOwogICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMpOwogIH0sIFtyZXNpemVDYW52YXNdKTsKCiAgLy8gUmUtcmVuZGVyIHdoZW4gbWFwIGRhdGEgb3IgcGFuIGNoYW5nZXMKICB1c2VFZmZlY3QoKCkgPT4gewogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICByZXR1cm4gKAogICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBoLWZ1bGwgcmVsYXRpdmUiPgogICAgICA8Y2FudmFzCiAgICAgICAgcmVmPXtjYW52YXNSZWZ9CiAgICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgaC1mdWxsIGN1cnNvci1ncmFiIGFjdGl2ZTpjdXJzb3ItZ3JhYmJpbmciCiAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiBpc0RyYWdnaW5nID8gJ2dyYWJiaW5nJyA6ICdncmFiJyB9fQogICAgICAgIG9uTW91c2VEb3duPXtoYW5kbGVNb3VzZURvd259CiAgICAgICAgb25Nb3VzZU1vdmU9e2hhbmRsZU1vdXNlTW92ZX0KICAgICAgICBvbk1vdXNlVXA9e2hhbmRsZU1vdXNlVXB9CiAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZVVwfQogICAgICAvPgogICAgICAKICAgICAgey8qIERlYnVnIGluZm8gKi99CiAgICAgIDxkaXYgY2xhc3NOYW1lPSJhYnNvbHV0ZSB0b3AtMiByaWdodC0yIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgdGV4dC13aGl0ZSB0ZXh0LXhzIHAtMiByb3VuZGVkIj4KICAgICAgICA8ZGl2Pk1hcFpvbmVzOiB7bWFwRGF0YS5sZW5ndGh9PC9kaXY+CiAgICAgICAgPGRpdj5QYW46IHtwYW4ueC50b0ZpeGVkKDApfSwge3Bhbi55LnRvRml4ZWQoMCl9PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtZ3JheS0zMDAgbXQtMSI+QXJyb3cga2V5cyBvciBkcmFnIHRvIHBhbjwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn07CgpleHBvcnQgZGVmYXVsdCBHYW1lTWFwOw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAXRoAAAAAAAAAAAAAAADwvw"
				],
				[
					29,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAjhsAAAAAAAAAAAAAjhsAAAAAAACOGwAAAAAAAF0aAABpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwoKaW50ZXJmYWNlIE1hcFpvbmUgewogIF9pZDogc3RyaW5nOwogIHR5cGU6IHN0cmluZzsKICBzdGF0ZT86IHsKICAgIGxvY2F0aW9uPzogewogICAgICBmaXJzdD86IG51bWJlcjsKICAgICAgc2Vjb25kPzogbnVtYmVyOwogICAgfTsKICAgIHRlcnJhaW5UeXBlPzogc3RyaW5nOwogICAgW2tleTogc3RyaW5nXTogYW55OwogIH07CiAgW2tleTogc3RyaW5nXTogYW55Owp9CgppbnRlcmZhY2UgR2FtZU1hcFByb3BzIHsKICBtYXBEYXRhOiBNYXBab25lW107Cn0KCmNvbnN0IFRFUlJBSU5fQ09MT1JTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0gewogIEdSQVNTTEFORDogJyM0Q0FGNTAnLAogIE1FQURPVzogJyM4QkMzNEEnLAogIFNDUlVCOiAnI0NEREMzOScsCiAgV09PRExBTkQ6ICcjMkU3RDMyJywKICBST0NLTEFORDogJyM3OTU1NDgnLAogIERSWUxBTkQ6ICcjRkZDMTA3JywKICAvLyBBZGQgbW9yZSB0ZXJyYWluIHR5cGVzIGFzIG5lZWRlZAp9OwoKY29uc3QgREVGQVVMVF9DT0xPUiA9ICcjOUU5RTlFJzsKCmNvbnN0IEdhbWVNYXA6IFJlYWN0LkZDPEdhbWVNYXBQcm9wcz4gPSAoeyBtYXBEYXRhIH0pID0+IHsKICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpOwogIGNvbnN0IFtwYW4sIHNldFBhbl0gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CiAgY29uc3QgW2lzRHJhZ2dpbmcsIHNldElzRHJhZ2dpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtsYXN0TW91c2VQb3MsIHNldExhc3RNb3VzZVBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CgogIC8vIEhleCBncmlkIGNvbnN0YW50cwogIGNvbnN0IEhFWF9XSURUSCA9IDk2OwogIGNvbnN0IEhFWF9IRUlHSFQgPSA5NjsKICBjb25zdCBIRVhfUkFESVVTID0gNDg7CiAgY29uc3QgQk9SREVSX1BBRERJTkcgPSA1MDsKCiAgLy8gQ2FsY3VsYXRlIGhleCB2ZXJ0aWNlcyBmb3IgZmxhdC10b3AgaGV4YWdvbgogIGNvbnN0IGdldEhleFZlcnRpY2VzID0gKGNlbnRlclg6IG51bWJlciwgY2VudGVyWTogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXVtdID0+IHsKICAgIGNvbnN0IHZlcnRpY2VzOiBbbnVtYmVyLCBudW1iZXJdW10gPSBbXTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7CiAgICAgIGNvbnN0IGFuZ2xlID0gKE1hdGguUEkgLyAzKSAqIGk7CiAgICAgIGNvbnN0IHggPSBjZW50ZXJYICsgSEVYX1JBRElVUyAqIE1hdGguY29zKGFuZ2xlKTsKICAgICAgY29uc3QgeSA9IGNlbnRlclkgKyBIRVhfUkFESVVTICogTWF0aC5zaW4oYW5nbGUpOwogICAgICB2ZXJ0aWNlcy5wdXNoKFt4LCB5XSk7CiAgICB9CiAgICByZXR1cm4gdmVydGljZXM7CiAgfTsKCiAgLy8gQ29udmVydCBncmlkIGNvb3JkaW5hdGVzIHRvIHBpeGVsIGNvb3JkaW5hdGVzCiAgY29uc3QgZ3JpZFRvUGl4ZWwgPSAoZ3JpZFg6IG51bWJlciwgZ3JpZFk6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0gPT4gewogICAgY29uc3QgaGV4V2lkdGggPSBIRVhfUkFESVVTICogMjsKICAgIGNvbnN0IGhleEhlaWdodCA9IEhFWF9SQURJVVMgKiBNYXRoLnNxcnQoMyk7CiAgICAKICAgIGxldCBwaXhlbFggPSBncmlkWCAqIGhleFdpZHRoICogMC43NTsKICAgIGxldCBwaXhlbFkgPSBncmlkWSAqIGhleEhlaWdodDsKICAgIAogICAgLy8gT2Zmc2V0IG9kZCBjb2x1bW5zICh2ZXJ0aWNhbCBvZmZzZXQpCiAgICBpZiAoZ3JpZFggJSAyID09PSAxKSB7CiAgICAgIHBpeGVsWSArPSBoZXhIZWlnaHQgKiAwLjU7CiAgICB9CiAgICAKICAgIC8vIEFkZCBib3JkZXIgcGFkZGluZwogICAgcGl4ZWxYICs9IEJPUkRFUl9QQURESU5HOwogICAgcGl4ZWxZICs9IEJPUkRFUl9QQURESU5HOwogICAgCiAgICByZXR1cm4gW3BpeGVsWCwgcGl4ZWxZXTsKICB9OwoKICAvLyBEcmF3IGEgc2luZ2xlIGhleGFnb24KICBjb25zdCBkcmF3SGV4ID0gKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjZW50ZXJYOiBudW1iZXIsIGNlbnRlclk6IG51bWJlciwgY29sb3I6IHN0cmluZykgPT4gewogICAgY29uc3QgdmVydGljZXMgPSBnZXRIZXhWZXJ0aWNlcyhjZW50ZXJYLCBjZW50ZXJZKTsKICAgIAogICAgY3R4LmJlZ2luUGF0aCgpOwogICAgY3R4Lm1vdmVUbyh2ZXJ0aWNlc1swXVswXSwgdmVydGljZXNbMF1bMV0pOwogICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykgewogICAgICBjdHgubGluZVRvKHZlcnRpY2VzW2ldWzBdLCB2ZXJ0aWNlc1tpXVsxXSk7CiAgICB9CiAgICBjdHguY2xvc2VQYXRoKCk7CiAgICAKICAgIC8vIEZpbGwgaGV4CiAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7CiAgICBjdHguZmlsbCgpOwogICAgCiAgICAvLyBEcmF3IGJvcmRlcgogICAgY3R4LnN0cm9rZVN0eWxlID0gJyMzMzMnOwogICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICBjdHguc3Ryb2tlKCk7CiAgfTsKCiAgLy8gUmVuZGVyIHRoZSBtYXAKICBjb25zdCByZW5kZXJNYXAgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDsKICAgIGlmICghY2FudmFzKSByZXR1cm47CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKCFjdHgpIHJldHVybjsKICAgIAogICAgLy8gQ2xlYXIgY2FudmFzCiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAKICAgIC8vIEFwcGx5IHBhbm5pbmcgdHJhbnNmb3JtCiAgICBjdHguc2F2ZSgpOwogICAgY3R4LnRyYW5zbGF0ZShwYW4ueCwgcGFuLnkpOwogICAgCiAgICAvLyBDYWxjdWxhdGUgZ3JpZCBkaW1lbnNpb25zIGZyb20gbWFwIGRhdGEKICAgIGNvbnN0IHsgbWF4WCwgbWF4WSB9ID0gZ2V0R3JpZERpbWVuc2lvbnMoKTsKICAgIAogICAgLy8gQ3JlYXRlIGEgbWFwIG9mIGdyaWQgcG9zaXRpb25zIHRvIE1hcFpvbmVzCiAgICBjb25zdCB6b25lTWFwID0gbmV3IE1hcDxzdHJpbmcsIE1hcFpvbmU+KCk7CiAgICBtYXBEYXRhLmZvckVhY2goem9uZSA9PiB7CiAgICAgIGlmICh6b25lLnN0YXRlPy5sb2NhdGlvbj8uZmlyc3QgIT09IHVuZGVmaW5lZCAmJiB6b25lLnN0YXRlPy5sb2NhdGlvbj8uc2Vjb25kICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zdCBrZXkgPSBgJHt6b25lLnN0YXRlLmxvY2F0aW9uLmZpcnN0fSwke3pvbmUuc3RhdGUubG9jYXRpb24uc2Vjb25kfWA7CiAgICAgICAgem9uZU1hcC5zZXQoa2V5LCB6b25lKTsKICAgICAgfQogICAgfSk7CiAgICAKICAgIC8vIFJlbmRlciBhbGwgZ3JpZCBwb3NpdGlvbnMgYmFzZWQgb24gYWN0dWFsIGRhdGEgZGltZW5zaW9ucwogICAgZm9yIChsZXQgeSA9IDA7IHkgPD0gbWF4WTsgeSsrKSB7CiAgICAgIGZvciAobGV0IHggPSAwOyB4IDw9IG1heFg7IHgrKykgewogICAgICAgIGNvbnN0IFtwaXhlbFgsIHBpeGVsWV0gPSBncmlkVG9QaXhlbCh4LCB5KTsKICAgICAgICBjb25zdCBrZXkgPSBgJHt4fSwke3l9YDsKICAgICAgICBjb25zdCB6b25lID0gem9uZU1hcC5nZXQoa2V5KTsKICAgICAgICAKICAgICAgICBsZXQgY29sb3IgPSBERUZBVUxUX0NPTE9SOwogICAgICAgIGlmICh6b25lPy5zdGF0ZT8udGVycmFpblR5cGUpIHsKICAgICAgICAgIGNvbG9yID0gVEVSUkFJTl9DT0xPUlNbem9uZS5zdGF0ZS50ZXJyYWluVHlwZV0gfHwgREVGQVVMVF9DT0xPUjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZHJhd0hleChjdHgsIHBpeGVsWCwgcGl4ZWxZLCBjb2xvcik7CiAgICAgIH0KICAgIH0KICAgIAogICAgY3R4LnJlc3RvcmUoKTsKICB9LCBbbWFwRGF0YSwgcGFuXSk7CgogIC8vIEhhbmRsZSBjYW52YXMgcmVzaXplCiAgY29uc3QgcmVzaXplQ2FudmFzID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgY2FudmFzLndpZHRoID0gcmVjdC53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvOwogICAgY2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKGN0eCkgewogICAgICBjdHguc2NhbGUod2luZG93LmRldmljZVBpeGVsUmF0aW8sIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTsKICAgIH0KICAgIAogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICAvLyBNb3VzZSBldmVudCBoYW5kbGVycyBmb3IgcGFubmluZwogIGNvbnN0IGhhbmRsZU1vdXNlRG93biA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7CiAgICBzZXRJc0RyYWdnaW5nKHRydWUpOwogICAgc2V0TGFzdE1vdXNlUG9zKHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfSk7CiAgfTsKCiAgY29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuOwogICAgCiAgICBjb25zdCBkZWx0YVggPSBlLmNsaWVudFggLSBsYXN0TW91c2VQb3MueDsKICAgIGNvbnN0IGRlbHRhWSA9IGUuY2xpZW50WSAtIGxhc3RNb3VzZVBvcy55OwogICAgCiAgICBzZXRQYW4ocHJldiA9PiAoewogICAgICB4OiBwcmV2LnggKyBkZWx0YVgsCiAgICAgIHk6IHByZXYueSArIGRlbHRhWQogICAgfSkpOwogICAgCiAgICBzZXRMYXN0TW91c2VQb3MoeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KTsKICB9OwoKICBjb25zdCBoYW5kbGVNb3VzZVVwID0gKCkgPT4gewogICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7CiAgfTsKCiAgLy8gS2V5Ym9hcmQgcGFubmluZwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHsKICAgICAgY29uc3QgcGFuU3BlZWQgPSAyMDsKICAgICAgCiAgICAgIHN3aXRjaCAoZS5rZXkpIHsKICAgICAgICBjYXNlICdBcnJvd1VwJzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHk6IHByZXYueSArIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93RG93bic6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB5OiBwcmV2LnkgLSBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBcnJvd0xlZnQnOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeDogcHJldi54ICsgcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB4OiBwcmV2LnggLSBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pOwogICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7CiAgfSwgW10pOwoKICAvLyBTZXR1cCBjYW52YXMgYW5kIHJlc2l6ZSBoYW5kbGluZwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICByZXNpemVDYW52YXMoKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMpOwogICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMpOwogIH0sIFtyZXNpemVDYW52YXNdKTsKCiAgLy8gUmUtcmVuZGVyIHdoZW4gbWFwIGRhdGEgb3IgcGFuIGNoYW5nZXMKICB1c2VFZmZlY3QoKCkgPT4gewogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICByZXR1cm4gKAogICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBoLWZ1bGwgcmVsYXRpdmUiPgogICAgICA8Y2FudmFzCiAgICAgICAgcmVmPXtjYW52YXNSZWZ9CiAgICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgaC1mdWxsIGN1cnNvci1ncmFiIGFjdGl2ZTpjdXJzb3ItZ3JhYmJpbmciCiAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiBpc0RyYWdnaW5nID8gJ2dyYWJiaW5nJyA6ICdncmFiJyB9fQogICAgICAgIG9uTW91c2VEb3duPXtoYW5kbGVNb3VzZURvd259CiAgICAgICAgb25Nb3VzZU1vdmU9e2hhbmRsZU1vdXNlTW92ZX0KICAgICAgICBvbk1vdXNlVXA9e2hhbmRsZU1vdXNlVXB9CiAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZVVwfQogICAgICAvPgogICAgICAKICAgICAgey8qIERlYnVnIGluZm8gKi99CiAgICAgIDxkaXYgY2xhc3NOYW1lPSJhYnNvbHV0ZSB0b3AtMiByaWdodC0yIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgdGV4dC13aGl0ZSB0ZXh0LXhzIHAtMiByb3VuZGVkIj4KICAgICAgICA8ZGl2Pk1hcFpvbmVzOiB7bWFwRGF0YS5sZW5ndGh9PC9kaXY+CiAgICAgICAgPGRpdj5QYW46IHtwYW4ueC50b0ZpeGVkKDApfSwge3Bhbi55LnRvRml4ZWQoMCl9PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtZ3JheS0zMDAgbXQtMSI+QXJyb3cga2V5cyBvciBkcmFnIHRvIHBhbjwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn07CgpleHBvcnQgZGVmYXVsdCBHYW1lTWFwOw",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAXRoAAAAAAAAAAAAAAADwvw"
				],
				[
					34,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAsywAAAAAAAAAAAAAsywAAAAAAACzLAAAAAAAAI4bAABpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwoKaW50ZXJmYWNlIE1hcFpvbmUgewogIF9pZDogc3RyaW5nOwogIHR5cGU6IHN0cmluZzsKICBzdGF0ZT86IHsKICAgIGxvY2F0aW9uPzogewogICAgICBmaXJzdD86IG51bWJlcjsKICAgICAgc2Vjb25kPzogbnVtYmVyOwogICAgfTsKICAgIHRlcnJhaW5UeXBlPzogc3RyaW5nOwogICAgW2tleTogc3RyaW5nXTogYW55OwogIH07CiAgW2tleTogc3RyaW5nXTogYW55Owp9CgppbnRlcmZhY2UgR2FtZU1hcFByb3BzIHsKICBtYXBEYXRhOiBNYXBab25lW107Cn0KCmNvbnN0IFRFUlJBSU5fQ09MT1JTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0gewogIEdSQVNTTEFORDogJyM0Q0FGNTAnLAogIE1FQURPVzogJyM4QkMzNEEnLAogIFNDUlVCOiAnI0NEREMzOScsCiAgV09PRExBTkQ6ICcjMkU3RDMyJywKICBST0NLTEFORDogJyM3OTU1NDgnLAogIERSWUxBTkQ6ICcjRkZDMTA3JywKICAvLyBBZGQgbW9yZSB0ZXJyYWluIHR5cGVzIGFzIG5lZWRlZAp9OwoKY29uc3QgREVGQVVMVF9DT0xPUiA9ICcjOUU5RTlFJzsKCmNvbnN0IEdhbWVNYXA6IFJlYWN0LkZDPEdhbWVNYXBQcm9wcz4gPSAoeyBtYXBEYXRhIH0pID0+IHsKICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpOwogIGNvbnN0IFtwYW4sIHNldFBhbl0gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CiAgY29uc3QgW2lzRHJhZ2dpbmcsIHNldElzRHJhZ2dpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtsYXN0TW91c2VQb3MsIHNldExhc3RNb3VzZVBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CgogIC8vIEhleCBncmlkIGNvbnN0YW50cwogIGNvbnN0IEhFWF9XSURUSCA9IDk2OwogIGNvbnN0IEhFWF9IRUlHSFQgPSA5NjsKICBjb25zdCBIRVhfUkFESVVTID0gNDg7CiAgY29uc3QgQk9SREVSX1BBRERJTkcgPSA1MDsKCiAgLy8gQ2FsY3VsYXRlIGhleCB2ZXJ0aWNlcyBmb3IgZmxhdC10b3AgaGV4YWdvbgogIGNvbnN0IGdldEhleFZlcnRpY2VzID0gKGNlbnRlclg6IG51bWJlciwgY2VudGVyWTogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXVtdID0+IHsKICAgIGNvbnN0IHZlcnRpY2VzOiBbbnVtYmVyLCBudW1iZXJdW10gPSBbXTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7CiAgICAgIGNvbnN0IGFuZ2xlID0gKE1hdGguUEkgLyAzKSAqIGk7CiAgICAgIGNvbnN0IHggPSBjZW50ZXJYICsgSEVYX1JBRElVUyAqIE1hdGguY29zKGFuZ2xlKTsKICAgICAgY29uc3QgeSA9IGNlbnRlclkgKyBIRVhfUkFESVVTICogTWF0aC5zaW4oYW5nbGUpOwogICAgICB2ZXJ0aWNlcy5wdXNoKFt4LCB5XSk7CiAgICB9CiAgICByZXR1cm4gdmVydGljZXM7CiAgfTsKCiAgLy8gQ29udmVydCBncmlkIGNvb3JkaW5hdGVzIHRvIHBpeGVsIGNvb3JkaW5hdGVzCiAgY29uc3QgZ3JpZFRvUGl4ZWwgPSAoZ3JpZFg6IG51bWJlciwgZ3JpZFk6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0gPT4gewogICAgY29uc3QgaGV4V2lkdGggPSBIRVhfUkFESVVTICogMjsKICAgIGNvbnN0IGhleEhlaWdodCA9IEhFWF9SQURJVVMgKiBNYXRoLnNxcnQoMyk7CiAgICAKICAgIGxldCBwaXhlbFggPSBncmlkWCAqIGhleFdpZHRoICogMC43NTsKICAgIGxldCBwaXhlbFkgPSBncmlkWSAqIGhleEhlaWdodDsKICAgIAogICAgLy8gT2Zmc2V0IG9kZCBjb2x1bW5zICh2ZXJ0aWNhbCBvZmZzZXQpCiAgICBpZiAoZ3JpZFggJSAyID09PSAxKSB7CiAgICAgIHBpeGVsWSArPSBoZXhIZWlnaHQgKiAwLjU7CiAgICB9CiAgICAKICAgIC8vIEFkZCBib3JkZXIgcGFkZGluZwogICAgcGl4ZWxYICs9IEJPUkRFUl9QQURESU5HOwogICAgcGl4ZWxZICs9IEJPUkRFUl9QQURESU5HOwogICAgCiAgICByZXR1cm4gW3BpeGVsWCwgcGl4ZWxZXTsKICB9OwoKICAvLyBEcmF3IGEgc2luZ2xlIGhleGFnb24KICBjb25zdCBkcmF3SGV4ID0gKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBjZW50ZXJYOiBudW1iZXIsIGNlbnRlclk6IG51bWJlciwgY29sb3I6IHN0cmluZykgPT4gewogICAgY29uc3QgdmVydGljZXMgPSBnZXRIZXhWZXJ0aWNlcyhjZW50ZXJYLCBjZW50ZXJZKTsKICAgIAogICAgY3R4LmJlZ2luUGF0aCgpOwogICAgY3R4Lm1vdmVUbyh2ZXJ0aWNlc1swXVswXSwgdmVydGljZXNbMF1bMV0pOwogICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykgewogICAgICBjdHgubGluZVRvKHZlcnRpY2VzW2ldWzBdLCB2ZXJ0aWNlc1tpXVsxXSk7CiAgICB9CiAgICBjdHguY2xvc2VQYXRoKCk7CiAgICAKICAgIC8vIEZpbGwgaGV4CiAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7CiAgICBjdHguZmlsbCgpOwogICAgCiAgICAvLyBEcmF3IGJvcmRlcgogICAgY3R4LnN0cm9rZVN0eWxlID0gJyMzMzMnOwogICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICBjdHguc3Ryb2tlKCk7CiAgfTsKCiAgLy8gUmVuZGVyIHRoZSBtYXAKICBjb25zdCByZW5kZXJNYXAgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDsKICAgIGlmICghY2FudmFzKSByZXR1cm47CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKCFjdHgpIHJldHVybjsKICAgIAogICAgLy8gQ2xlYXIgY2FudmFzCiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAKICAgIC8vIEFwcGx5IHBhbm5pbmcgdHJhbnNmb3JtCiAgICBjdHguc2F2ZSgpOwogICAgY3R4LnRyYW5zbGF0ZShwYW4ueCwgcGFuLnkpOwogICAgCiAgICAvLyBDYWxjdWxhdGUgZ3JpZCBkaW1lbnNpb25zIGZyb20gbWFwIGRhdGEKICAgIGxldCBtYXhYID0gMDsKICAgIGxldCBtYXhZID0gMDsKICAgIAogICAgaWYgKG1hcERhdGEubGVuZ3RoID4gMCkgewogICAgICBtYXBEYXRhLmZvckVhY2goem9uZSA9PiB7CiAgICAgICAgaWYgKHpvbmUuc3RhdGU/LmxvY2F0aW9uPy5maXJzdCAhPT0gdW5kZWZpbmVkICYmIHpvbmUuc3RhdGU/LmxvY2F0aW9uPy5zZWNvbmQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgbWF4WCA9IE1hdGgubWF4KG1heFgsIHpvbmUuc3RhdGUubG9jYXRpb24uZmlyc3QpOwogICAgICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIHpvbmUuc3RhdGUubG9jYXRpb24uc2Vjb25kKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgCiAgICAvLyBDcmVhdGUgYSBtYXAgb2YgZ3JpZCBwb3NpdGlvbnMgdG8gTWFwWm9uZXMKICAgIGNvbnN0IHpvbmVNYXAgPSBuZXcgTWFwPHN0cmluZywgTWFwWm9uZT4oKTsKICAgIG1hcERhdGEuZm9yRWFjaCh6b25lID0+IHsKICAgICAgaWYgKHpvbmUuc3RhdGU/LmxvY2F0aW9uPy5maXJzdCAhPT0gdW5kZWZpbmVkICYmIHpvbmUuc3RhdGU/LmxvY2F0aW9uPy5zZWNvbmQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGNvbnN0IGtleSA9IGAke3pvbmUuc3RhdGUubG9jYXRpb24uZmlyc3R9LCR7em9uZS5zdGF0ZS5sb2NhdGlvbi5zZWNvbmR9YDsKICAgICAgICB6b25lTWFwLnNldChrZXksIHpvbmUpOwogICAgICB9CiAgICB9KTsKICAgIAogICAgLy8gUmVuZGVyIGFsbCBncmlkIHBvc2l0aW9ucyBiYXNlZCBvbiBhY3R1YWwgZGF0YSBkaW1lbnNpb25zCiAgICBmb3IgKGxldCB5ID0gMDsgeSA8PSBtYXhZOyB5KyspIHsKICAgICAgZm9yIChsZXQgeCA9IDA7IHggPD0gbWF4WDsgeCsrKSB7CiAgICAgICAgY29uc3QgW3BpeGVsWCwgcGl4ZWxZXSA9IGdyaWRUb1BpeGVsKHgsIHkpOwogICAgICAgIGNvbnN0IGtleSA9IGAke3h9LCR7eX1gOwogICAgICAgIGNvbnN0IHpvbmUgPSB6b25lTWFwLmdldChrZXkpOwogICAgICAgIAogICAgICAgIGxldCBjb2xvciA9IERFRkFVTFRfQ09MT1I7CiAgICAgICAgaWYgKHpvbmU/LnN0YXRlPy50ZXJyYWluVHlwZSkgewogICAgICAgICAgY29sb3IgPSBURVJSQUlOX0NPTE9SU1t6b25lLnN0YXRlLnRlcnJhaW5UeXBlXSB8fCBERUZBVUxUX0NPTE9SOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBkcmF3SGV4KGN0eCwgcGl4ZWxYLCBwaXhlbFksIGNvbG9yKTsKICAgICAgfQogICAgfQogICAgCiAgICBjdHgucmVzdG9yZSgpOwogIH0sIFttYXBEYXRhLCBwYW5dKTsKCiAgLy8gSGFuZGxlIGNhbnZhcyByZXNpemUKICBjb25zdCByZXNpemVDYW52YXMgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDsKICAgIGlmICghY2FudmFzKSByZXR1cm47CiAgICAKICAgIGNvbnN0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBjYW52YXMud2lkdGggPSByZWN0LndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICBjYW52YXMuaGVpZ2h0ID0gcmVjdC5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbzsKICAgIAogICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICBpZiAoY3R4KSB7CiAgICAgIGN0eC5zY2FsZSh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgd2luZG93LmRldmljZVBpeGVsUmF0aW8pOwogICAgfQogICAgCiAgICByZW5kZXJNYXAoKTsKICB9LCBbcmVuZGVyTWFwXSk7CgogIC8vIE1vdXNlIGV2ZW50IGhhbmRsZXJzIGZvciBwYW5uaW5nCiAgY29uc3QgaGFuZGxlTW91c2VEb3duID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIHNldElzRHJhZ2dpbmcodHJ1ZSk7CiAgICBzZXRMYXN0TW91c2VQb3MoeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KTsKICB9OwoKICBjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSAoZTogUmVhY3QuTW91c2VFdmVudCkgPT4gewogICAgaWYgKCFpc0RyYWdnaW5nKSByZXR1cm47CiAgICAKICAgIGNvbnN0IGRlbHRhWCA9IGUuY2xpZW50WCAtIGxhc3RNb3VzZVBvcy54OwogICAgY29uc3QgZGVsdGFZID0gZS5jbGllbnRZIC0gbGFzdE1vdXNlUG9zLnk7CiAgICAKICAgIHNldFBhbihwcmV2ID0+ICh7CiAgICAgIHg6IHByZXYueCArIGRlbHRhWCwKICAgICAgeTogcHJldi55ICsgZGVsdGFZCiAgICB9KSk7CiAgICAKICAgIHNldExhc3RNb3VzZVBvcyh7IHg6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZIH0pOwogIH07CgogIGNvbnN0IGhhbmRsZU1vdXNlVXAgPSAoKSA9PiB7CiAgICBzZXRJc0RyYWdnaW5nKGZhbHNlKTsKICB9OwoKICAvLyBLZXlib2FyZCBwYW5uaW5nCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4gewogICAgICBjb25zdCBwYW5TcGVlZCA9IDIwOwogICAgICAKICAgICAgc3dpdGNoIChlLmtleSkgewogICAgICAgIGNhc2UgJ0Fycm93VXAnOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeTogcHJldi55ICsgcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQXJyb3dEb3duJzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHk6IHByZXYueSAtIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB4OiBwcmV2LnggKyBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHg6IHByZXYueCAtIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9OwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7CiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTsKICB9LCBbXSk7CgogIC8vIFNldHVwIGNhbnZhcyBhbmQgcmVzaXplIGhhbmRsaW5nCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIHJlc2l6ZUNhbnZhcygpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUNhbnZhcyk7CiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUNhbnZhcyk7CiAgfSwgW3Jlc2l6ZUNhbnZhc10pOwoKICAvLyBSZS1yZW5kZXIgd2hlbiBtYXAgZGF0YSBvciBwYW4gY2hhbmdlcwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICByZW5kZXJNYXAoKTsKICB9LCBbcmVuZGVyTWFwXSk7CgogIHJldHVybiAoCiAgICA8ZGl2IGNsYXNzTmFtZT0idy1mdWxsIGgtZnVsbCByZWxhdGl2ZSI+CiAgICAgIDxjYW52YXMKICAgICAgICByZWY9e2NhbnZhc1JlZn0KICAgICAgICBjbGFzc05hbWU9InctZnVsbCBoLWZ1bGwgY3Vyc29yLWdyYWIgYWN0aXZlOmN1cnNvci1ncmFiYmluZyIKICAgICAgICBzdHlsZT17eyBjdXJzb3I6IGlzRHJhZ2dpbmcgPyAnZ3JhYmJpbmcnIDogJ2dyYWInIH19CiAgICAgICAgb25Nb3VzZURvd249e2hhbmRsZU1vdXNlRG93bn0KICAgICAgICBvbk1vdXNlTW92ZT17aGFuZGxlTW91c2VNb3ZlfQogICAgICAgIG9uTW91c2VVcD17aGFuZGxlTW91c2VVcH0KICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlVXB9CiAgICAgIC8+CiAgICAgIAogICAgICB7LyogRGVidWcgaW5mbyAqL30KICAgICAgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIHRvcC0yIHJpZ2h0LTIgYmctYmxhY2sgYmctb3BhY2l0eS01MCB0ZXh0LXdoaXRlIHRleHQteHMgcC0yIHJvdW5kZWQiPgogICAgICAgIDxkaXY+TWFwWm9uZXM6IHttYXBEYXRhLmxlbmd0aH08L2Rpdj4KICAgICAgICA8ZGl2PlBhbjoge3Bhbi54LnRvRml4ZWQoMCl9LCB7cGFuLnkudG9GaXhlZCgwKX08L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1ncmF5LTMwMCBtdC0xIj5BcnJvdyBrZXlzIG9yIGRyYWcgdG8gcGFuPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfTsKCmV4cG9ydCBkZWZhdWx0IEdhbWVNYXA7",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAjhsAAAAAAAAAAAAAAADwvw"
				],
				[
					38,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAATCwAAAAAAAAAAAAATCwAAAAAAABMLAAAAAAAALMsAABpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwoKaW50ZXJmYWNlIE1hcFpvbmUgewogIF9pZDogc3RyaW5nOwogIHR5cGU6IHN0cmluZzsKICBzdGF0ZT86IHsKICAgIGxvY2F0aW9uPzogewogICAgICBmaXJzdD86IG51bWJlcjsKICAgICAgc2Vjb25kPzogbnVtYmVyOwogICAgfTsKICAgIHRlcnJhaW5UeXBlPzogc3RyaW5nOwogICAgW2tleTogc3RyaW5nXTogYW55OwogIH07CiAgW2tleTogc3RyaW5nXTogYW55Owp9CgppbnRlcmZhY2UgR2FtZU1hcFByb3BzIHsKICBtYXBEYXRhOiBNYXBab25lW107Cn0KCmNvbnN0IFRFUlJBSU5fQ09MT1JTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0gewogIEdSQVNTTEFORDogJyM0Q0FGNTAnLAogIE1FQURPVzogJyM4QkMzNEEnLAogIFNDUlVCOiAnI0NEREMzOScsCiAgV09PRExBTkQ6ICcjMkU3RDMyJywKICBST0NLTEFORDogJyM3OTU1NDgnLAogIERSWUxBTkQ6ICcjRkZDMTA3JywKICAvLyBBZGQgbW9yZSB0ZXJyYWluIHR5cGVzIGFzIG5lZWRlZAp9OwoKY29uc3QgREVGQVVMVF9DT0xPUiA9ICcjOUU5RTlFJzsKCmNvbnN0IEdhbWVNYXA6IFJlYWN0LkZDPEdhbWVNYXBQcm9wcz4gPSAoeyBtYXBEYXRhIH0pID0+IHsKICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpOwogIGNvbnN0IFtwYW4sIHNldFBhbl0gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CiAgY29uc3QgW2lzRHJhZ2dpbmcsIHNldElzRHJhZ2dpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtsYXN0TW91c2VQb3MsIHNldExhc3RNb3VzZVBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CiAgY29uc3QgW3NlbGVjdGVkSGV4LCBzZXRTZWxlY3RlZEhleF0gPSB1c2VTdGF0ZTx7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB6b25lPzogTWFwWm9uZSB9IHwgbnVsbD4obnVsbCk7CiAgY29uc3QgW3Nob3dJbmZvUGFuZWwsIHNldFNob3dJbmZvUGFuZWxdID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtpbmZvUGFuZWxQb3MsIHNldEluZm9QYW5lbFBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CgogIC8vIEhleCBncmlkIGNvbnN0YW50cwogIGNvbnN0IEhFWF9XSURUSCA9IDk2OwogIGNvbnN0IEhFWF9IRUlHSFQgPSA5NjsKICBjb25zdCBIRVhfUkFESVVTID0gNDg7CiAgY29uc3QgQk9SREVSX1BBRERJTkcgPSA1MDsKCiAgLy8gQ2FsY3VsYXRlIGhleCB2ZXJ0aWNlcyBmb3IgZmxhdC10b3AgaGV4YWdvbgogIGNvbnN0IGdldEhleFZlcnRpY2VzID0gKGNlbnRlclg6IG51bWJlciwgY2VudGVyWTogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXVtdID0+IHsKICAgIGNvbnN0IHZlcnRpY2VzOiBbbnVtYmVyLCBudW1iZXJdW10gPSBbXTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7CiAgICAgIGNvbnN0IGFuZ2xlID0gKE1hdGguUEkgLyAzKSAqIGk7CiAgICAgIGNvbnN0IHggPSBjZW50ZXJYICsgSEVYX1JBRElVUyAqIE1hdGguY29zKGFuZ2xlKTsKICAgICAgY29uc3QgeSA9IGNlbnRlclkgKyBIRVhfUkFESVVTICogTWF0aC5zaW4oYW5nbGUpOwogICAgICB2ZXJ0aWNlcy5wdXNoKFt4LCB5XSk7CiAgICB9CiAgICByZXR1cm4gdmVydGljZXM7CiAgfTsKCiAgLy8gQ29udmVydCBwaXhlbCBjb29yZGluYXRlcyBiYWNrIHRvIGhleCBncmlkIGNvb3JkaW5hdGVzCiAgY29uc3QgcGl4ZWxUb0dyaWQgPSAocGl4ZWxYOiBudW1iZXIsIHBpeGVsWTogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSA9PiB7CiAgICAvLyBSZW1vdmUgYm9yZGVyIHBhZGRpbmcgYW5kIHBhbiBvZmZzZXQKICAgIGNvbnN0IGFkanVzdGVkWCA9IHBpeGVsWCAtIEJPUkRFUl9QQURESU5HIC0gcGFuLng7CiAgICBjb25zdCBhZGp1c3RlZFkgPSBwaXhlbFkgLSBCT1JERVJfUEFERElORyAtIHBhbi55OwogICAgCiAgICBjb25zdCBoZXhXaWR0aCA9IEhFWF9SQURJVVMgKiAyOwogICAgY29uc3QgaGV4SGVpZ2h0ID0gSEVYX1JBRElVUyAqIE1hdGguc3FydCgzKTsKICAgIAogICAgLy8gUm91Z2ggZ3JpZCBjb29yZGluYXRlIGVzdGltYXRlCiAgICBjb25zdCBncmlkWCA9IE1hdGgucm91bmQoYWRqdXN0ZWRYIC8gKGhleFdpZHRoICogMC43NSkpOwogICAgY29uc3QgZ3JpZFkgPSBNYXRoLnJvdW5kKGFkanVzdGVkWSAvIGhleEhlaWdodCk7CiAgICAKICAgIC8vIENoZWNrIG5lYXJieSBoZXhlcyB0byBmaW5kIHRoZSBjbG9zZXN0IG9uZQogICAgY29uc3QgY2FuZGlkYXRlcyA9IFtdOwogICAgZm9yIChsZXQgZHggPSAtMTsgZHggPD0gMTsgZHgrKykgewogICAgICBmb3IgKGxldCBkeSA9IC0xOyBkeSA8PSAxOyBkeSsrKSB7CiAgICAgICAgY29uc3QgdGVzdFggPSBncmlkWCArIGR4OwogICAgICAgIGNvbnN0IHRlc3RZID0gZ3JpZFkgKyBkeTsKICAgICAgICBpZiAodGVzdFggPj0gMCAmJiB0ZXN0WSA+PSAwKSB7CiAgICAgICAgICBjb25zdCBbaGV4UGl4ZWxYLCBoZXhQaXhlbFldID0gZ3JpZFRvUGl4ZWwodGVzdFgsIHRlc3RZKTsKICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KAogICAgICAgICAgICBNYXRoLnBvdyhwaXhlbFggLSBoZXhQaXhlbFggLSBwYW4ueCwgMikgKyAKICAgICAgICAgICAgTWF0aC5wb3cocGl4ZWxZIC0gaGV4UGl4ZWxZIC0gcGFuLnksIDIpCiAgICAgICAgICApOwogICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHsgeDogdGVzdFgsIHk6IHRlc3RZLCBkaXN0YW5jZSB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIAogICAgLy8gUmV0dXJuIHRoZSBjbG9zZXN0IHZhbGlkIGhleAogICAgY2FuZGlkYXRlcy5zb3J0KChhLCBiKSA9PiBhLmRpc3RhbmNlIC0gYi5kaXN0YW5jZSk7CiAgICByZXR1cm4gY2FuZGlkYXRlcy5sZW5ndGggPiAwID8gW2NhbmRpZGF0ZXNbMF0ueCwgY2FuZGlkYXRlc1swXS55XSA6IFtncmlkWCwgZ3JpZFldOwogIH07CgogIC8vIENoZWNrIGlmIGEgcG9pbnQgaXMgaW5zaWRlIGEgaGV4YWdvbgogIGNvbnN0IGlzUG9pbnRJbkhleCA9IChwb2ludFg6IG51bWJlciwgcG9pbnRZOiBudW1iZXIsIGhleENlbnRlclg6IG51bWJlciwgaGV4Q2VudGVyWTogbnVtYmVyKTogYm9vbGVhbiA9PiB7CiAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguc3FydCgKICAgICAgTWF0aC5wb3cocG9pbnRYIC0gaGV4Q2VudGVyWCwgMikgKyAKICAgICAgTWF0aC5wb3cocG9pbnRZIC0gaGV4Q2VudGVyWSwgMikKICAgICk7CiAgICByZXR1cm4gZGlzdGFuY2UgPD0gSEVYX1JBRElVUzsKICB9OwogIGNvbnN0IGdyaWRUb1BpeGVsID0gKGdyaWRYOiBudW1iZXIsIGdyaWRZOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdID0+IHsKICAgIGNvbnN0IGhleFdpZHRoID0gSEVYX1JBRElVUyAqIDI7CiAgICBjb25zdCBoZXhIZWlnaHQgPSBIRVhfUkFESVVTICogTWF0aC5zcXJ0KDMpOwogICAgCiAgICBsZXQgcGl4ZWxYID0gZ3JpZFggKiBoZXhXaWR0aCAqIDAuNzU7CiAgICBsZXQgcGl4ZWxZID0gZ3JpZFkgKiBoZXhIZWlnaHQ7CiAgICAKICAgIC8vIE9mZnNldCBvZGQgY29sdW1ucyAodmVydGljYWwgb2Zmc2V0KQogICAgaWYgKGdyaWRYICUgMiA9PT0gMSkgewogICAgICBwaXhlbFkgKz0gaGV4SGVpZ2h0ICogMC41OwogICAgfQogICAgCiAgICAvLyBBZGQgYm9yZGVyIHBhZGRpbmcKICAgIHBpeGVsWCArPSBCT1JERVJfUEFERElORzsKICAgIHBpeGVsWSArPSBCT1JERVJfUEFERElORzsKICAgIAogICAgcmV0dXJuIFtwaXhlbFgsIHBpeGVsWV07CiAgfTsKCiAgLy8gRHJhdyBhIHNpbmdsZSBoZXhhZ29uCiAgY29uc3QgZHJhd0hleCA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY2VudGVyWDogbnVtYmVyLCBjZW50ZXJZOiBudW1iZXIsIGNvbG9yOiBzdHJpbmcpID0+IHsKICAgIGNvbnN0IHZlcnRpY2VzID0gZ2V0SGV4VmVydGljZXMoY2VudGVyWCwgY2VudGVyWSk7CiAgICAKICAgIGN0eC5iZWdpblBhdGgoKTsKICAgIGN0eC5tb3ZlVG8odmVydGljZXNbMF1bMF0sIHZlcnRpY2VzWzBdWzFdKTsKICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgY3R4LmxpbmVUbyh2ZXJ0aWNlc1tpXVswXSwgdmVydGljZXNbaV1bMV0pOwogICAgfQogICAgY3R4LmNsb3NlUGF0aCgpOwogICAgCiAgICAvLyBGaWxsIGhleAogICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yOwogICAgY3R4LmZpbGwoKTsKICAgIAogICAgLy8gRHJhdyBib3JkZXIKICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMzMzJzsKICAgIGN0eC5saW5lV2lkdGggPSAxOwogICAgY3R4LnN0cm9rZSgpOwogIH07CgogIC8vIFJlbmRlciB0aGUgbWFwCiAgY29uc3QgcmVuZGVyTWFwID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgIGlmICghY3R4KSByZXR1cm47CiAgICAKICAgIC8vIENsZWFyIGNhbnZhcwogICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgCiAgICAvLyBBcHBseSBwYW5uaW5nIHRyYW5zZm9ybQogICAgY3R4LnNhdmUoKTsKICAgIGN0eC50cmFuc2xhdGUocGFuLngsIHBhbi55KTsKICAgIAogICAgLy8gQ2FsY3VsYXRlIGdyaWQgZGltZW5zaW9ucyBmcm9tIG1hcCBkYXRhCiAgICBsZXQgbWF4WCA9IDA7CiAgICBsZXQgbWF4WSA9IDA7CiAgICAKICAgIGlmIChtYXBEYXRhLmxlbmd0aCA+IDApIHsKICAgICAgbWFwRGF0YS5mb3JFYWNoKHpvbmUgPT4gewogICAgICAgIGlmICh6b25lLnN0YXRlPy5sb2NhdGlvbj8uZmlyc3QgIT09IHVuZGVmaW5lZCAmJiB6b25lLnN0YXRlPy5sb2NhdGlvbj8uc2Vjb25kICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCB6b25lLnN0YXRlLmxvY2F0aW9uLmZpcnN0KTsKICAgICAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCB6b25lLnN0YXRlLmxvY2F0aW9uLnNlY29uZCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIAogICAgLy8gQ3JlYXRlIGEgbWFwIG9mIGdyaWQgcG9zaXRpb25zIHRvIE1hcFpvbmVzCiAgICBjb25zdCB6b25lTWFwID0gbmV3IE1hcDxzdHJpbmcsIE1hcFpvbmU+KCk7CiAgICBtYXBEYXRhLmZvckVhY2goem9uZSA9PiB7CiAgICAgIGlmICh6b25lLnN0YXRlPy5sb2NhdGlvbj8uZmlyc3QgIT09IHVuZGVmaW5lZCAmJiB6b25lLnN0YXRlPy5sb2NhdGlvbj8uc2Vjb25kICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zdCBrZXkgPSBgJHt6b25lLnN0YXRlLmxvY2F0aW9uLmZpcnN0fSwke3pvbmUuc3RhdGUubG9jYXRpb24uc2Vjb25kfWA7CiAgICAgICAgem9uZU1hcC5zZXQoa2V5LCB6b25lKTsKICAgICAgfQogICAgfSk7CiAgICAKICAgIC8vIFJlbmRlciBhbGwgZ3JpZCBwb3NpdGlvbnMgYmFzZWQgb24gYWN0dWFsIGRhdGEgZGltZW5zaW9ucwogICAgZm9yIChsZXQgeSA9IDA7IHkgPD0gbWF4WTsgeSsrKSB7CiAgICAgIGZvciAobGV0IHggPSAwOyB4IDw9IG1heFg7IHgrKykgewogICAgICAgIGNvbnN0IFtwaXhlbFgsIHBpeGVsWV0gPSBncmlkVG9QaXhlbCh4LCB5KTsKICAgICAgICBjb25zdCBrZXkgPSBgJHt4fSwke3l9YDsKICAgICAgICBjb25zdCB6b25lID0gem9uZU1hcC5nZXQoa2V5KTsKICAgICAgICAKICAgICAgICBsZXQgY29sb3IgPSBERUZBVUxUX0NPTE9SOwogICAgICAgIGlmICh6b25lPy5zdGF0ZT8udGVycmFpblR5cGUpIHsKICAgICAgICAgIGNvbG9yID0gVEVSUkFJTl9DT0xPUlNbem9uZS5zdGF0ZS50ZXJyYWluVHlwZV0gfHwgREVGQVVMVF9DT0xPUjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZHJhd0hleChjdHgsIHBpeGVsWCwgcGl4ZWxZLCBjb2xvcik7CiAgICAgIH0KICAgIH0KICAgIAogICAgY3R4LnJlc3RvcmUoKTsKICB9LCBbbWFwRGF0YSwgcGFuXSk7CgogIC8vIEhhbmRsZSBjYW52YXMgcmVzaXplCiAgY29uc3QgcmVzaXplQ2FudmFzID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgY2FudmFzLndpZHRoID0gcmVjdC53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvOwogICAgY2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKGN0eCkgewogICAgICBjdHguc2NhbGUod2luZG93LmRldmljZVBpeGVsUmF0aW8sIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTsKICAgIH0KICAgIAogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICAvLyBNb3VzZSBldmVudCBoYW5kbGVycyBmb3IgcGFubmluZyBhbmQgY2xpY2tpbmcKICBjb25zdCBoYW5kbGVNb3VzZURvd24gPSAoZTogUmVhY3QuTW91c2VFdmVudCkgPT4gewogICAgc2V0SXNEcmFnZ2luZyh0cnVlKTsKICAgIHNldExhc3RNb3VzZVBvcyh7IHg6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZIH0pOwogIH07CgogIGNvbnN0IGhhbmRsZU1vdXNlTW92ZSA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7CiAgICBpZiAoIWlzRHJhZ2dpbmcpIHJldHVybjsKICAgIAogICAgY29uc3QgZGVsdGFYID0gZS5jbGllbnRYIC0gbGFzdE1vdXNlUG9zLng7CiAgICBjb25zdCBkZWx0YVkgPSBlLmNsaWVudFkgLSBsYXN0TW91c2VQb3MueTsKICAgIAogICAgc2V0UGFuKHByZXYgPT4gKHsKICAgICAgeDogcHJldi54ICsgZGVsdGFYLAogICAgICB5OiBwcmV2LnkgKyBkZWx0YVkKICAgIH0pKTsKICAgIAogICAgc2V0TGFzdE1vdXNlUG9zKHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfSk7CiAgfTsKCiAgY29uc3QgaGFuZGxlTW91c2VVcCA9ICgpID0+IHsKICAgIHNldElzRHJhZ2dpbmcoZmFsc2UpOwogIH07CgogIGNvbnN0IGhhbmRsZUNsaWNrID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIGlmIChpc0RyYWdnaW5nKSByZXR1cm47IC8vIERvbid0IHByb2Nlc3MgY2xpY2tzIGlmIHdlIHdlcmUgZHJhZ2dpbmcKICAgIAogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgY29uc3QgeCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDsKICAgIGNvbnN0IHkgPSBlLmNsaWVudFkgLSByZWN0LnRvcDsKICAgIAogICAgY29uc3QgW2dyaWRYLCBncmlkWV0gPSBwaXhlbFRvR3JpZCh4LCB5KTsKICAgIAogICAgLy8gRmluZCB0aGUgem9uZSBhdCB0aGlzIGdyaWQgcG9zaXRpb24KICAgIGNvbnN0IHpvbmVLZXkgPSBgJHtncmlkWH0sJHtncmlkWX1gOwogICAgY29uc3Qgem9uZSA9IG1hcERhdGEuZmluZCh6ID0+IAogICAgICB6LnN0YXRlPy5sb2NhdGlvbj8uZmlyc3QgPT09IGdyaWRYICYmIHouc3RhdGU/LmxvY2F0aW9uPy5zZWNvbmQgPT09IGdyaWRZCiAgICApOwogICAgCiAgICBpZiAoZS5idXR0b24gPT09IDApIHsgLy8gTGVmdCBjbGljawogICAgICBzZXRTaG93SW5mb1BhbmVsKGZhbHNlKTsKICAgIH0KICB9OwoKICBjb25zdCBoYW5kbGVSaWdodENsaWNrID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIGlmIChpc0RyYWdnaW5nKSByZXR1cm47CiAgICAKICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50OwogICAgaWYgKCFjYW52YXMpIHJldHVybjsKICAgIAogICAgY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgIGNvbnN0IHggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7CiAgICBjb25zdCB5ID0gZS5jbGllbnRZIC0gcmVjdC50b3A7CiAgICAKICAgIGNvbnN0IFtncmlkWCwgZ3JpZFldID0gcGl4ZWxUb0dyaWQoeCwgeSk7CiAgICAKICAgIC8vIEZpbmQgdGhlIHpvbmUgYXQgdGhpcyBncmlkIHBvc2l0aW9uCiAgICBjb25zdCB6b25lID0gbWFwRGF0YS5maW5kKHogPT4gCiAgICAgIHouc3RhdGU/LmxvY2F0aW9uPy5maXJzdCA9PT0gZ3JpZFggJiYgei5zdGF0ZT8ubG9jYXRpb24/LnNlY29uZCA9PT0gZ3JpZFkKICAgICk7CiAgICAKICAgIHNldFNlbGVjdGVkSGV4KHsgeDogZ3JpZFgsIHk6IGdyaWRZLCB6b25lIH0pOwogICAgc2V0SW5mb1BhbmVsUG9zKHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfSk7CiAgICBzZXRTaG93SW5mb1BhbmVsKHRydWUpOwogIH07CgogIC8vIEtleWJvYXJkIHBhbm5pbmcKICB1c2VFZmZlY3QoKCkgPT4gewogICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHBhblNwZWVkID0gMjA7CiAgICAgIAogICAgICBzd2l0Y2ggKGUua2V5KSB7CiAgICAgICAgY2FzZSAnQXJyb3dVcCc6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB5OiBwcmV2LnkgKyBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBcnJvd0Rvd24nOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeTogcHJldi55IC0gcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHg6IHByZXYueCArIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeDogcHJldi54IC0gcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH07CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTsKICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pOwogIH0sIFtdKTsKCiAgLy8gU2V0dXAgY2FudmFzIGFuZCByZXNpemUgaGFuZGxpbmcKICB1c2VFZmZlY3QoKCkgPT4gewogICAgcmVzaXplQ2FudmFzKCk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplQ2FudmFzKTsKICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplQ2FudmFzKTsKICB9LCBbcmVzaXplQ2FudmFzXSk7CgogIC8vIFJlLXJlbmRlciB3aGVuIG1hcCBkYXRhIG9yIHBhbiBjaGFuZ2VzCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIHJlbmRlck1hcCgpOwogIH0sIFtyZW5kZXJNYXBdKTsKCiAgcmV0dXJuICgKICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgaC1mdWxsIHJlbGF0aXZlIj4KICAgICAgPGNhbnZhcwogICAgICAgIHJlZj17Y2FudmFzUmVmfQogICAgICAgIGNsYXNzTmFtZT0idy1mdWxsIGgtZnVsbCBjdXJzb3ItZ3JhYiBhY3RpdmU6Y3Vyc29yLWdyYWJiaW5nIgogICAgICAgIHN0eWxlPXt7IGN1cnNvcjogaXNEcmFnZ2luZyA/ICdncmFiYmluZycgOiAnZ3JhYicgfX0KICAgICAgICBvbk1vdXNlRG93bj17aGFuZGxlTW91c2VEb3dufQogICAgICAgIG9uTW91c2VNb3ZlPXtoYW5kbGVNb3VzZU1vdmV9CiAgICAgICAgb25Nb3VzZVVwPXtoYW5kbGVNb3VzZVVwfQogICAgICAgIG9uTW91c2VMZWF2ZT17aGFuZGxlTW91c2VVcH0KICAgICAgICBvbkNsaWNrPXtoYW5kbGVDbGlja30KICAgICAgICBvbkNvbnRleHRNZW51PXtoYW5kbGVSaWdodENsaWNrfQogICAgICAvPgogICAgICAKICAgICAgey8qIEluZm8gUGFuZWwgKi99CiAgICAgIHtzaG93SW5mb1BhbmVsICYmIHNlbGVjdGVkSGV4ICYmICgKICAgICAgICA8ZGl2IAogICAgICAgICAgY2xhc3NOYW1lPSJhYnNvbHV0ZSBiZy1ncmF5LTgwMCB0ZXh0LXdoaXRlIHAtMyByb3VuZGVkIHNoYWRvdy1sZyBib3JkZXIgYm9yZGVyLWdyYXktNjAwIHotNTAiCiAgICAgICAgICBzdHlsZT17eyAKICAgICAgICAgICAgbGVmdDogaW5mb1BhbmVsUG9zLnggKyAxMCwgCiAgICAgICAgICAgIHRvcDogaW5mb1BhbmVsUG9zLnkgKyAxMCwKICAgICAgICAgICAgbWF4V2lkdGg6ICcyMDBweCcKICAgICAgICAgIH19CiAgICAgICAgPgogICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtc20gZm9udC1zZW1pYm9sZCBtYi0yIj5IZXggSW5mb3JtYXRpb248L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXhzIHNwYWNlLXktMSI+CiAgICAgICAgICAgIDxkaXY+Q29vcmRpbmF0ZXM6ICh7c2VsZWN0ZWRIZXgueH0sIHtzZWxlY3RlZEhleC55fSk8L2Rpdj4KICAgICAgICAgICAge3NlbGVjdGVkSGV4LnpvbmUgPyAoCiAgICAgICAgICAgICAgPD4KICAgICAgICAgICAgICAgIDxkaXY+VGVycmFpbjoge3NlbGVjdGVkSGV4LnpvbmUuc3RhdGU/LnRlcnJhaW5UeXBlIHx8ICdVbmtub3duJ308L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+SUQ6IHtzZWxlY3RlZEhleC56b25lLl9pZH08L2Rpdj4KICAgICAgICAgICAgICA8Lz4KICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1ncmF5LTQwMCI+Tm8gem9uZSBkYXRhPC9kaXY+CiAgICAgICAgICAgICl9CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgbXQtMiI+TGVmdC1jbGljayB0byBkaXNtaXNzPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICl9CiAgICAgIAogICAgICB7LyogRGVidWcgaW5mbyAqL30KICAgICAgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIHRvcC0yIHJpZ2h0LTIgYmctYmxhY2sgYmctb3BhY2l0eS01MCB0ZXh0LXdoaXRlIHRleHQteHMgcC0yIHJvdW5kZWQiPgogICAgICAgIDxkaXY+TWFwWm9uZXM6IHttYXBEYXRhLmxlbmd0aH08L2Rpdj4KICAgICAgICA8ZGl2PlBhbjoge3Bhbi54LnRvRml4ZWQoMCl9LCB7cGFuLnkudG9GaXhlZCgwKX08L2Rpdj4KICAgICAgICB7c2VsZWN0ZWRIZXggJiYgKAogICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQteWVsbG93LTMwMCI+U2VsZWN0ZWQ6ICh7c2VsZWN0ZWRIZXgueH0sIHtzZWxlY3RlZEhleC55fSk8L2Rpdj4KICAgICAgICApfQogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWdyYXktMzAwIG10LTEiPkFycm93IGtleXMgb3IgZHJhZyB0byBwYW48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1ncmF5LTMwMCI+UmlnaHQtY2xpY2sgZm9yIGhleCBpbmZvPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgKTsKfTsKCmV4cG9ydCBkZWZhdWx0IEdhbWVNYXA7",
					"AwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8AAAAAAQAAAAAAAAAAAAAAsywAAAAAAAAAAAAAAADwvw"
				],
				[
					9,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAJiEAAAAAAAAAAAAAJiEAAAAAAAAmIQAAAAAAAEwsAABpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwoKaW50ZXJmYWNlIE1hcFpvbmUgewogIF9pZDogc3RyaW5nOwogIHR5cGU6IHN0cmluZzsKICBzdGF0ZT86IHsKICAgIGxvY2F0aW9uPzogewogICAgICBmaXJzdD86IG51bWJlcjsKICAgICAgc2Vjb25kPzogbnVtYmVyOwogICAgfTsKICAgIHRlcnJhaW5UeXBlPzogc3RyaW5nOwogICAgW2tleTogc3RyaW5nXTogYW55OwogIH07CiAgW2tleTogc3RyaW5nXTogYW55Owp9CgppbnRlcmZhY2UgR2FtZU1hcFByb3BzIHsKICBtYXBEYXRhOiBNYXBab25lW107Cn0KCmNvbnN0IFRFUlJBSU5fQ09MT1JTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0gewogIEdSQVNTTEFORDogJyM0Q0FGNTAnLAogIE1FQURPVzogJyM4QkMzNEEnLAogIFNDUlVCOiAnI0NEREMzOScsCiAgV09PRExBTkQ6ICcjMkU3RDMyJywKICBST0NLTEFORDogJyM3OTU1NDgnLAogIERSWUxBTkQ6ICcjRkZDMTA3JywKICAvLyBBZGQgbW9yZSB0ZXJyYWluIHR5cGVzIGFzIG5lZWRlZAp9OwoKY29uc3QgREVGQVVMVF9DT0xPUiA9ICcjOUU5RTlFJzsKCmNvbnN0IEdhbWVNYXA6IFJlYWN0LkZDPEdhbWVNYXBQcm9wcz4gPSAoeyBtYXBEYXRhIH0pID0+IHsKICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8SFRNTENhbnZhc0VsZW1lbnQ+KG51bGwpOwogIGNvbnN0IFtwYW4sIHNldFBhbl0gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CiAgY29uc3QgW2lzRHJhZ2dpbmcsIHNldElzRHJhZ2dpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtsYXN0TW91c2VQb3MsIHNldExhc3RNb3VzZVBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CiAgY29uc3QgW3NlbGVjdGVkSGV4LCBzZXRTZWxlY3RlZEhleF0gPSB1c2VTdGF0ZTx7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB6b25lPzogTWFwWm9uZSB9IHwgbnVsbD4obnVsbCk7CiAgY29uc3QgW3Nob3dJbmZvUGFuZWwsIHNldFNob3dJbmZvUGFuZWxdID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtpbmZvUGFuZWxQb3MsIHNldEluZm9QYW5lbFBvc10gPSB1c2VTdGF0ZSh7IHg6IDAsIHk6IDAgfSk7CgogIC8vIEhleCBncmlkIGNvbnN0YW50cwogIGNvbnN0IEhFWF9XSURUSCA9IDk2OwogIGNvbnN0IEhFWF9IRUlHSFQgPSA5NjsKICBjb25zdCBIRVhfUkFESVVTID0gNDg7CiAgY29uc3QgQk9SREVSX1BBRERJTkcgPSA1MDsKCiAgLy8gQ2FsY3VsYXRlIGhleCB2ZXJ0aWNlcyBmb3IgZmxhdC10b3AgaGV4YWdvbgogIGNvbnN0IGdldEhleFZlcnRpY2VzID0gKGNlbnRlclg6IG51bWJlciwgY2VudGVyWTogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXVtdID0+IHsKICAgIGNvbnN0IHZlcnRpY2VzOiBbbnVtYmVyLCBudW1iZXJdW10gPSBbXTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7CiAgICAgIGNvbnN0IGFuZ2xlID0gKE1hdGguUEkgLyAzKSAqIGk7CiAgICAgIGNvbnN0IHggPSBjZW50ZXJYICsgSEVYX1JBRElVUyAqIE1hdGguY29zKGFuZ2xlKTsKICAgICAgY29uc3QgeSA9IGNlbnRlclkgKyBIRVhfUkFESVVTICogTWF0aC5zaW4oYW5nbGUpOwogICAgICB2ZXJ0aWNlcy5wdXNoKFt4LCB5XSk7CiAgICB9CiAgICByZXR1cm4gdmVydGljZXM7CiAgfTsKCiAgLy8gQ29udmVydCBwaXhlbCBjb29yZGluYXRlcyBiYWNrIHRvIGhleCBncmlkIGNvb3JkaW5hdGVzCiAgY29uc3QgcGl4ZWxUb0dyaWQgPSAocGl4ZWxYOiBudW1iZXIsIHBpeGVsWTogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSA9PiB7CiAgICAvLyBSZW1vdmUgYm9yZGVyIHBhZGRpbmcgYW5kIHBhbiBvZmZzZXQKICAgIGNvbnN0IGFkanVzdGVkWCA9IHBpeGVsWCAtIEJPUkRFUl9QQURESU5HIC0gcGFuLng7CiAgICBjb25zdCBhZGp1c3RlZFkgPSBwaXhlbFkgLSBCT1JERVJfUEFERElORyAtIHBhbi55OwogICAgCiAgICBjb25zdCBoZXhXaWR0aCA9IEhFWF9SQURJVVMgKiAyOwogICAgY29uc3QgaGV4SGVpZ2h0ID0gSEVYX1JBRElVUyAqIE1hdGguc3FydCgzKTsKICAgIAogICAgLy8gUm91Z2ggZ3JpZCBjb29yZGluYXRlIGVzdGltYXRlCiAgICBjb25zdCBncmlkWCA9IE1hdGgucm91bmQoYWRqdXN0ZWRYIC8gKGhleFdpZHRoICogMC43NSkpOwogICAgY29uc3QgZ3JpZFkgPSBNYXRoLnJvdW5kKGFkanVzdGVkWSAvIGhleEhlaWdodCk7CiAgICAKICAgIC8vIENoZWNrIG5lYXJieSBoZXhlcyB0byBmaW5kIHRoZSBjbG9zZXN0IG9uZQogICAgY29uc3QgY2FuZGlkYXRlcyA9IFtdOwogICAgZm9yIChsZXQgZHggPSAtMTsgZHggPD0gMTsgZHgrKykgewogICAgICBmb3IgKGxldCBkeSA9IC0xOyBkeSA8PSAxOyBkeSsrKSB7CiAgICAgICAgY29uc3QgdGVzdFggPSBncmlkWCArIGR4OwogICAgICAgIGNvbnN0IHRlc3RZID0gZ3JpZFkgKyBkeTsKICAgICAgICBpZiAodGVzdFggPj0gMCAmJiB0ZXN0WSA+PSAwKSB7CiAgICAgICAgICBjb25zdCBbaGV4UGl4ZWxYLCBoZXhQaXhlbFldID0gZ3JpZFRvUGl4ZWwodGVzdFgsIHRlc3RZKTsKICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KAogICAgICAgICAgICBNYXRoLnBvdyhwaXhlbFggLSBoZXhQaXhlbFggLSBwYW4ueCwgMikgKyAKICAgICAgICAgICAgTWF0aC5wb3cocGl4ZWxZIC0gaGV4UGl4ZWxZIC0gcGFuLnksIDIpCiAgICAgICAgICApOwogICAgICAgICAgY2FuZGlkYXRlcy5wdXNoKHsgeDogdGVzdFgsIHk6IHRlc3RZLCBkaXN0YW5jZSB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIAogICAgLy8gUmV0dXJuIHRoZSBjbG9zZXN0IHZhbGlkIGhleAogICAgY2FuZGlkYXRlcy5zb3J0KChhLCBiKSA9PiBhLmRpc3RhbmNlIC0gYi5kaXN0YW5jZSk7CiAgICByZXR1cm4gY2FuZGlkYXRlcy5sZW5ndGggPiAwID8gW2NhbmRpZGF0ZXNbMF0ueCwgY2FuZGlkYXRlc1swXS55XSA6IFtncmlkWCwgZ3JpZFldOwogIH07CgogIC8vIENoZWNrIGlmIGEgcG9pbnQgaXMgaW5zaWRlIGEgaGV4YWdvbgogIGNvbnN0IGlzUG9pbnRJbkhleCA9IChwb2ludFg6IG51bWJlciwgcG9pbnRZOiBudW1iZXIsIGhleENlbnRlclg6IG51bWJlciwgaGV4Q2VudGVyWTogbnVtYmVyKTogYm9vbGVhbiA9PiB7CiAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguc3FydCgKICAgICAgTWF0aC5wb3cocG9pbnRYIC0gaGV4Q2VudGVyWCwgMikgKyAKICAgICAgTWF0aC5wb3cocG9pbnRZIC0gaGV4Q2VudGVyWSwgMikKICAgICk7CiAgICByZXR1cm4gZGlzdGFuY2UgPD0gSEVYX1JBRElVUzsKICB9OwogIGNvbnN0IGdyaWRUb1BpeGVsID0gKGdyaWRYOiBudW1iZXIsIGdyaWRZOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdID0+IHsKICAgIGNvbnN0IGhleFdpZHRoID0gSEVYX1JBRElVUyAqIDI7CiAgICBjb25zdCBoZXhIZWlnaHQgPSBIRVhfUkFESVVTICogTWF0aC5zcXJ0KDMpOwogICAgCiAgICBsZXQgcGl4ZWxYID0gZ3JpZFggKiBoZXhXaWR0aCAqIDAuNzU7CiAgICBsZXQgcGl4ZWxZID0gZ3JpZFkgKiBoZXhIZWlnaHQ7CiAgICAKICAgIC8vIE9mZnNldCBvZGQgY29sdW1ucyAodmVydGljYWwgb2Zmc2V0KQogICAgaWYgKGdyaWRYICUgMiA9PT0gMSkgewogICAgICBwaXhlbFkgKz0gaGV4SGVpZ2h0ICogMC41OwogICAgfQogICAgCiAgICAvLyBBZGQgYm9yZGVyIHBhZGRpbmcKICAgIHBpeGVsWCArPSBCT1JERVJfUEFERElORzsKICAgIHBpeGVsWSArPSBCT1JERVJfUEFERElORzsKICAgIAogICAgcmV0dXJuIFtwaXhlbFgsIHBpeGVsWV07CiAgfTsKCiAgLy8gRHJhdyBhIHNpbmdsZSBoZXhhZ29uCiAgY29uc3QgZHJhd0hleCA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY2VudGVyWDogbnVtYmVyLCBjZW50ZXJZOiBudW1iZXIsIGNvbG9yOiBzdHJpbmcpID0+IHsKICAgIGNvbnN0IHZlcnRpY2VzID0gZ2V0SGV4VmVydGljZXMoY2VudGVyWCwgY2VudGVyWSk7CiAgICAKICAgIGN0eC5iZWdpblBhdGgoKTsKICAgIGN0eC5tb3ZlVG8odmVydGljZXNbMF1bMF0sIHZlcnRpY2VzWzBdWzFdKTsKICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgY3R4LmxpbmVUbyh2ZXJ0aWNlc1tpXVswXSwgdmVydGljZXNbaV1bMV0pOwogICAgfQogICAgY3R4LmNsb3NlUGF0aCgpOwogICAgCiAgICAvLyBGaWxsIGhleAogICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yOwogICAgY3R4LmZpbGwoKTsKICAgIAogICAgLy8gRHJhdyBib3JkZXIKICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMzMzJzsKICAgIGN0eC5saW5lV2lkdGggPSAxOwogICAgY3R4LnN0cm9rZSgpOwogIH07CgogIC8vIFJlbmRlciB0aGUgbWFwCiAgY29uc3QgcmVuZGVyTWFwID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgIGlmICghY3R4KSByZXR1cm47CiAgICAKICAgIC8vIENsZWFyIGNhbnZhcwogICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgCiAgICAvLyBBcHBseSBwYW5uaW5nIHRyYW5zZm9ybQogICAgY3R4LnNhdmUoKTsKICAgIGN0eC50cmFuc2xhdGUocGFuLngsIHBhbi55KTsKICAgIAogICAgLy8gQ2FsY3VsYXRlIGdyaWQgZGltZW5zaW9ucyBmcm9tIG1hcCBkYXRhCiAgICBsZXQgbWF4WCA9IDA7CiAgICBsZXQgbWF4WSA9IDA7CiAgICAKICAgIGlmIChtYXBEYXRhLmxlbmd0aCA+IDApIHsKICAgICAgbWFwRGF0YS5mb3JFYWNoKHpvbmUgPT4gewogICAgICAgIGlmICh6b25lLnN0YXRlPy5sb2NhdGlvbj8uZmlyc3QgIT09IHVuZGVmaW5lZCAmJiB6b25lLnN0YXRlPy5sb2NhdGlvbj8uc2Vjb25kICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCB6b25lLnN0YXRlLmxvY2F0aW9uLmZpcnN0KTsKICAgICAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCB6b25lLnN0YXRlLmxvY2F0aW9uLnNlY29uZCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIAogICAgLy8gQ3JlYXRlIGEgbWFwIG9mIGdyaWQgcG9zaXRpb25zIHRvIE1hcFpvbmVzCiAgICBjb25zdCB6b25lTWFwID0gbmV3IE1hcDxzdHJpbmcsIE1hcFpvbmU+KCk7CiAgICBtYXBEYXRhLmZvckVhY2goem9uZSA9PiB7CiAgICAgIGlmICh6b25lLnN0YXRlPy5sb2NhdGlvbj8uZmlyc3QgIT09IHVuZGVmaW5lZCAmJiB6b25lLnN0YXRlPy5sb2NhdGlvbj8uc2Vjb25kICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zdCBrZXkgPSBgJHt6b25lLnN0YXRlLmxvY2F0aW9uLmZpcnN0fSwke3pvbmUuc3RhdGUubG9jYXRpb24uc2Vjb25kfWA7CiAgICAgICAgem9uZU1hcC5zZXQoa2V5LCB6b25lKTsKICAgICAgfQogICAgfSk7CiAgICAKICAgIC8vIFJlbmRlciBhbGwgZ3JpZCBwb3NpdGlvbnMgYmFzZWQgb24gYWN0dWFsIGRhdGEgZGltZW5zaW9ucwogICAgZm9yIChsZXQgeSA9IDA7IHkgPD0gbWF4WTsgeSsrKSB7CiAgICAgIGZvciAobGV0IHggPSAwOyB4IDw9IG1heFg7IHgrKykgewogICAgICAgIGNvbnN0IFtwaXhlbFgsIHBpeGVsWV0gPSBncmlkVG9QaXhlbCh4LCB5KTsKICAgICAgICBjb25zdCBrZXkgPSBgJHt4fSwke3l9YDsKICAgICAgICBjb25zdCB6b25lID0gem9uZU1hcC5nZXQoa2V5KTsKICAgICAgICAKICAgICAgICBsZXQgY29sb3IgPSBERUZBVUxUX0NPTE9SOwogICAgICAgIGlmICh6b25lPy5zdGF0ZT8udGVycmFpblR5cGUpIHsKICAgICAgICAgIGNvbG9yID0gVEVSUkFJTl9DT0xPUlNbem9uZS5zdGF0ZS50ZXJyYWluVHlwZV0gfHwgREVGQVVMVF9DT0xPUjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZHJhd0hleChjdHgsIHBpeGVsWCwgcGl4ZWxZLCBjb2xvcik7CiAgICAgICAgCiAgICAgICAgLy8gSGlnaGxpZ2h0IHNlbGVjdGVkIGhleAogICAgICAgIGlmIChzZWxlY3RlZEhleCAmJiBzZWxlY3RlZEhleC54ID09PSB4ICYmIHNlbGVjdGVkSGV4LnkgPT09IHkpIHsKICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjRkZENzAwJzsgLy8gR29sZCBjb2xvciBmb3Igc2VsZWN0aW9uCiAgICAgICAgICBjdHgubGluZVdpZHRoID0gMzsKICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIAogICAgY3R4LnJlc3RvcmUoKTsKICB9LCBbbWFwRGF0YSwgcGFuXSk7CgogIC8vIEhhbmRsZSBjYW52YXMgcmVzaXplCiAgY29uc3QgcmVzaXplQ2FudmFzID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgY2FudmFzLndpZHRoID0gcmVjdC53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvOwogICAgY2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICAKICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgaWYgKGN0eCkgewogICAgICBjdHguc2NhbGUod2luZG93LmRldmljZVBpeGVsUmF0aW8sIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTsKICAgIH0KICAgIAogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICAvLyBNb3VzZSBldmVudCBoYW5kbGVycyBmb3IgcGFubmluZyBhbmQgY2xpY2tpbmcKICBjb25zdCBoYW5kbGVNb3VzZURvd24gPSAoZTogUmVhY3QuTW91c2VFdmVudCkgPT4gewogICAgc2V0SXNEcmFnZ2luZyh0cnVlKTsKICAgIHNldExhc3RNb3VzZVBvcyh7IHg6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZIH0pOwogIH07CgogIGNvbnN0IGhhbmRsZU1vdXNlTW92ZSA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7CiAgICBpZiAoIWlzRHJhZ2dpbmcpIHJldHVybjsKICAgIAogICAgY29uc3QgZGVsdGFYID0gZS5jbGllbnRYIC0gbGFzdE1vdXNlUG9zLng7CiAgICBjb25zdCBkZWx0YVkgPSBlLmNsaWVudFkgLSBsYXN0TW91c2VQb3MueTsKICAgIAogICAgc2V0UGFuKHByZXYgPT4gKHsKICAgICAgeDogcHJldi54ICsgZGVsdGFYLAogICAgICB5OiBwcmV2LnkgKyBkZWx0YVkKICAgIH0pKTsKICAgIAogICAgc2V0TGFzdE1vdXNlUG9zKHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfSk7CiAgfTsKCiAgY29uc3QgaGFuZGxlTW91c2VVcCA9ICgpID0+IHsKICAgIHNldElzRHJhZ2dpbmcoZmFsc2UpOwogIH07CgogIGNvbnN0IGhhbmRsZUNsaWNrID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIGlmIChpc0RyYWdnaW5nKSByZXR1cm47IC8vIERvbid0IHByb2Nlc3MgY2xpY2tzIGlmIHdlIHdlcmUgZHJhZ2dpbmcKICAgIAogICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7CiAgICBpZiAoIWNhbnZhcykgcmV0dXJuOwogICAgCiAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgY29uc3QgeCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDsKICAgIGNvbnN0IHkgPSBlLmNsaWVudFkgLSByZWN0LnRvcDsKICAgIAogICAgY29uc3QgW2dyaWRYLCBncmlkWV0gPSBwaXhlbFRvR3JpZCh4LCB5KTsKICAgIAogICAgLy8gRmluZCB0aGUgem9uZSBhdCB0aGlzIGdyaWQgcG9zaXRpb24KICAgIGNvbnN0IHpvbmUgPSBtYXBEYXRhLmZpbmQoeiA9PiAKICAgICAgei5zdGF0ZT8ubG9jYXRpb24/LmZpcnN0ID09PSBncmlkWCAmJiB6LnN0YXRlPy5sb2NhdGlvbj8uc2Vjb25kID09PSBncmlkWQogICAgKTsKICAgIAogICAgaWYgKHpvbmUpIHsKICAgICAgLy8gQ2xpY2tlZCBvbiBhIHZhbGlkIGhleCB3aXRoIGRhdGEKICAgICAgc2V0U2VsZWN0ZWRIZXgoeyB4OiBncmlkWCwgeTogZ3JpZFksIHpvbmUgfSk7CiAgICAgIHNldEluZm9QYW5lbFBvcyh7IHg6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZIH0pOwogICAgICBzZXRTaG93SW5mb1BhbmVsKHRydWUpOwogICAgfSBlbHNlIHsKICAgICAgLy8gQ2xpY2tlZCBvdXRzaWRlIHZhbGlkIGhleCBhcmVhCiAgICAgIHNldFNob3dJbmZvUGFuZWwoZmFsc2UpOwogICAgICBzZXRTZWxlY3RlZEhleChudWxsKTsKICAgIH0KICB9OwoKICBjb25zdCBoYW5kbGVSaWdodENsaWNrID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gU3RpbGwgcHJldmVudCBjb250ZXh0IG1lbnUganVzdCBpbiBjYXNlCiAgfTsKCiAgLy8gS2V5Ym9hcmQgcGFubmluZwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHsKICAgICAgY29uc3QgcGFuU3BlZWQgPSAyMDsKICAgICAgCiAgICAgIHN3aXRjaCAoZS5rZXkpIHsKICAgICAgICBjYXNlICdBcnJvd1VwJzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHk6IHByZXYueSArIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93RG93bic6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB5OiBwcmV2LnkgLSBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBcnJvd0xlZnQnOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeDogcHJldi54ICsgcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB4OiBwcmV2LnggLSBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pOwogICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7CiAgfSwgW10pOwoKICAvLyBTZXR1cCBjYW52YXMgYW5kIHJlc2l6ZSBoYW5kbGluZwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICByZXNpemVDYW52YXMoKTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMpOwogICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMpOwogIH0sIFtyZXNpemVDYW52YXNdKTsKCiAgLy8gUmUtcmVuZGVyIHdoZW4gbWFwIGRhdGEgb3IgcGFuIGNoYW5nZXMKICB1c2VFZmZlY3QoKCkgPT4gewogICAgcmVuZGVyTWFwKCk7CiAgfSwgW3JlbmRlck1hcF0pOwoKICByZXR1cm4gKAogICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBoLWZ1bGwgcmVsYXRpdmUiPgogICAgICA8Y2FudmFzCiAgICAgICAgcmVmPXtjYW52YXNSZWZ9CiAgICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgaC1mdWxsIGN1cnNvci1ncmFiIGFjdGl2ZTpjdXJzb3ItZ3JhYmJpbmciCiAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiBpc0RyYWdnaW5nID8gJ2dyYWJiaW5nJyA6ICdncmFiJyB9fQogICAgICAgIG9uTW91c2VEb3duPXtoYW5kbGVNb3VzZURvd259CiAgICAgICAgb25Nb3VzZU1vdmU9e2hhbmRsZU1vdXNlTW92ZX0KICAgICAgICBvbk1vdXNlVXA9e2hhbmRsZU1vdXNlVXB9CiAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZVVwfQogICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsaWNrfQogICAgICAgIG9uQ29udGV4dE1lbnU9e2hhbmRsZVJpZ2h0Q2xpY2t9CiAgICAgIC8+CiAgICAgIAogICAgICB7LyogSW5mbyBQYW5lbCAqL30KICAgICAge3Nob3dJbmZvUGFuZWwgJiYgc2VsZWN0ZWRIZXggJiYgKAogICAgICAgIDxkaXYgCiAgICAgICAgICBjbGFzc05hbWU9ImFic29sdXRlIGJnLWdyYXktODAwIHRleHQtd2hpdGUgcC0zIHJvdW5kZWQgc2hhZG93LWxnIGJvcmRlciBib3JkZXItZ3JheS02MDAgei01MCIKICAgICAgICAgIHN0eWxlPXt7IAogICAgICAgICAgICBsZWZ0OiBpbmZvUGFuZWxQb3MueCArIDEwLCAKICAgICAgICAgICAgdG9wOiBpbmZvUGFuZWxQb3MueSArIDEwLAogICAgICAgICAgICBtYXhXaWR0aDogJzIwMHB4JwogICAgICAgICAgfX0KICAgICAgICA+CiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1zbSBmb250LXNlbWlib2xkIG1iLTIiPkhleCBJbmZvcm1hdGlvbjwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQteHMgc3BhY2UteS0xIj4KICAgICAgICAgICAgPGRpdj5Db29yZGluYXRlczogKHtzZWxlY3RlZEhleC54fSwge3NlbGVjdGVkSGV4Lnl9KTwvZGl2PgogICAgICAgICAgICB7c2VsZWN0ZWRIZXguem9uZSA/ICgKICAgICAgICAgICAgICA8PgogICAgICAgICAgICAgICAgPGRpdj5UZXJyYWluOiB7c2VsZWN0ZWRIZXguem9uZS5zdGF0ZT8udGVycmFpblR5cGUgfHwgJ1Vua25vd24nfTwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj5JRDoge3NlbGVjdGVkSGV4LnpvbmUuX2lkfTwvZGl2PgogICAgICAgICAgICAgIDwvPgogICAgICAgICAgICApIDogKAogICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWdyYXktNDAwIj5ObyB6b25lIGRhdGE8L2Rpdj4KICAgICAgICAgICAgKX0KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBtdC0yIj5MZWZ0LWNsaWNrIHRvIGRpc21pc3M8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgKX0KICAgICAgCiAgICAgIHsvKiBEZWJ1ZyBpbmZvICovfQogICAgICA8ZGl2IGNsYXNzTmFtZT0iYWJzb2x1dGUgdG9wLTIgcmlnaHQtMiBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIHRleHQtd2hpdGUgdGV4dC14cyBwLTIgcm91bmRlZCI+CiAgICAgICAgPGRpdj5NYXBab25lczoge21hcERhdGEubGVuZ3RofTwvZGl2PgogICAgICAgIDxkaXY+UGFuOiB7cGFuLngudG9GaXhlZCgwKX0sIHtwYW4ueS50b0ZpeGVkKDApfTwvZGl2PgogICAgICAgIHtzZWxlY3RlZEhleCAmJiAoCiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC15ZWxsb3ctMzAwIj5TZWxlY3RlZDogKHtzZWxlY3RlZEhleC54fSwge3NlbGVjdGVkSGV4Lnl9KTwvZGl2PgogICAgICAgICl9CiAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtZ3JheS0zMDAgbXQtMSI+QXJyb3cga2V5cyBvciBkcmFnIHRvIHBhbjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWdyYXktMzAwIj5DbGljayBoZXggZm9yIGluZm88L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9OwoKZXhwb3J0IGRlZmF1bHQgR2FtZU1hcDs",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAEwsAAAAAAAAAAAAAAAA8L8"
				],
				[
					11,
					1,
					"paste",
					null,
					"AgAAAAAAAAAAAAAAJiEAAAAAAAAAAAAAJiEAAAAAAAAmIQAAAAAAACYhAABpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgTWFwUmVuZGVyZXIgZnJvbSAnLi9NYXBSZW5kZXJlcic7CgppbnRlcmZhY2UgTWFwWm9uZSB7CiAgX2lkOiBzdHJpbmc7CiAgdHlwZTogc3RyaW5nOwogIHN0YXRlPzogewogICAgbG9jYXRpb24/OiB7CiAgICAgIGZpcnN0PzogbnVtYmVyOwogICAgICBzZWNvbmQ/OiBudW1iZXI7CiAgICB9OwogICAgdGVycmFpblR5cGU/OiBzdHJpbmc7CiAgICBba2V5OiBzdHJpbmddOiBhbnk7CiAgfTsKICBba2V5OiBzdHJpbmddOiBhbnk7Cn0KCmludGVyZmFjZSBHYW1lTWFwUHJvcHMgewogIG1hcERhdGE6IE1hcFpvbmVbXTsKfQoKY29uc3QgR2FtZU1hcDogUmVhY3QuRkM8R2FtZU1hcFByb3BzPiA9ICh7IG1hcERhdGEgfSkgPT4gewogIGNvbnN0IGNhbnZhc1JlZiA9IHVzZVJlZjxIVE1MQ2FudmFzRWxlbWVudD4obnVsbCk7CiAgY29uc3QgcmVuZGVyZXJSZWYgPSB1c2VSZWY8TWFwUmVuZGVyZXIgfCBudWxsPihudWxsKTsKICBjb25zdCBbcGFuLCBzZXRQYW5dID0gdXNlU3RhdGUoeyB4OiAwLCB5OiAwIH0pOwogIGNvbnN0IFtpc0RyYWdnaW5nLCBzZXRJc0RyYWdnaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTsKICBjb25zdCBbbGFzdE1vdXNlUG9zLCBzZXRMYXN0TW91c2VQb3NdID0gdXNlU3RhdGUoeyB4OiAwLCB5OiAwIH0pOwogIGNvbnN0IFtzZWxlY3RlZEhleCwgc2V0U2VsZWN0ZWRIZXhdID0gdXNlU3RhdGU8eyB4OiBudW1iZXI7IHk6IG51bWJlcjsgem9uZT86IE1hcFpvbmUgfSB8IG51bGw+KG51bGwpOwogIGNvbnN0IFtzaG93SW5mb1BhbmVsLCBzZXRTaG93SW5mb1BhbmVsXSA9IHVzZVN0YXRlKGZhbHNlKTsKICBjb25zdCBbaW5mb1BhbmVsUG9zLCBzZXRJbmZvUGFuZWxQb3NdID0gdXNlU3RhdGUoeyB4OiAwLCB5OiAwIH0pOwoKICAvLyBIZXggZ3JpZCBjb25zdGFudHMKICBjb25zdCBIRVhfUkFESVVTID0gNDg7CiAgY29uc3QgQk9SREVSX1BBRERJTkcgPSA1MDsKCiAgLy8gSW5pdGlhbGl6ZSByZW5kZXJlciB3aGVuIGNhbnZhcyBpcyByZWFkeQogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDsKICAgIGlmICghY2FudmFzKSByZXR1cm47CiAgICAKICAgIHRyeSB7CiAgICAgIHJlbmRlcmVyUmVmLmN1cnJlbnQgPSBuZXcgTWFwUmVuZGVyZXIoY2FudmFzKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIE1hcFJlbmRlcmVyOicsIGVycm9yKTsKICAgIH0KICB9LCBbXSk7CgogIC8vIENvbnZlcnQgcGl4ZWwgY29vcmRpbmF0ZXMgYmFjayB0byBoZXggZ3JpZCBjb29yZGluYXRlcwogIGNvbnN0IHBpeGVsVG9HcmlkID0gKHBpeGVsWDogbnVtYmVyLCBwaXhlbFk6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0gPT4gewogICAgLy8gUmVtb3ZlIGJvcmRlciBwYWRkaW5nIGFuZCBwYW4gb2Zmc2V0CiAgICBjb25zdCBhZGp1c3RlZFggPSBwaXhlbFggLSBCT1JERVJfUEFERElORyAtIHBhbi54OwogICAgY29uc3QgYWRqdXN0ZWRZID0gcGl4ZWxZIC0gQk9SREVSX1BBRERJTkcgLSBwYW4ueTsKICAgIAogICAgY29uc3QgaGV4V2lkdGggPSBIRVhfUkFESVVTICogMjsKICAgIGNvbnN0IGhleEhlaWdodCA9IEhFWF9SQURJVVMgKiBNYXRoLnNxcnQoMyk7CiAgICAKICAgIC8vIFJvdWdoIGdyaWQgY29vcmRpbmF0ZSBlc3RpbWF0ZQogICAgY29uc3QgZ3JpZFggPSBNYXRoLnJvdW5kKGFkanVzdGVkWCAvIChoZXhXaWR0aCAqIDAuNzUpKTsKICAgIGNvbnN0IGdyaWRZID0gTWF0aC5yb3VuZChhZGp1c3RlZFkgLyBoZXhIZWlnaHQpOwogICAgCiAgICAvLyBDaGVjayBuZWFyYnkgaGV4ZXMgdG8gZmluZCB0aGUgY2xvc2VzdCBvbmUKICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBbXTsKICAgIGZvciAobGV0IGR4ID0gLTE7IGR4IDw9IDE7IGR4KyspIHsKICAgICAgZm9yIChsZXQgZHkgPSAtMTsgZHkgPD0gMTsgZHkrKykgewogICAgICAgIGNvbnN0IHRlc3RYID0gZ3JpZFggKyBkeDsKICAgICAgICBjb25zdCB0ZXN0WSA9IGdyaWRZICsgZHk7CiAgICAgICAgaWYgKHRlc3RYID49IDAgJiYgdGVzdFkgPj0gMCkgewogICAgICAgICAgY29uc3QgW2hleFBpeGVsWCwgaGV4UGl4ZWxZXSA9IGdyaWRUb1BpeGVsKHRlc3RYLCB0ZXN0WSk7CiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguc3FydCgKICAgICAgICAgICAgTWF0aC5wb3cocGl4ZWxYIC0gaGV4UGl4ZWxYIC0gcGFuLngsIDIpICsgCiAgICAgICAgICAgIE1hdGgucG93KHBpeGVsWSAtIGhleFBpeGVsWSAtIHBhbi55LCAyKQogICAgICAgICAgKTsKICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7IHg6IHRlc3RYLCB5OiB0ZXN0WSwgZGlzdGFuY2UgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAKICAgIC8vIFJldHVybiB0aGUgY2xvc2VzdCB2YWxpZCBoZXgKICAgIGNhbmRpZGF0ZXMuc29ydCgoYSwgYikgPT4gYS5kaXN0YW5jZSAtIGIuZGlzdGFuY2UpOwogICAgcmV0dXJuIGNhbmRpZGF0ZXMubGVuZ3RoID4gMCA/IFtjYW5kaWRhdGVzWzBdLngsIGNhbmRpZGF0ZXNbMF0ueV0gOiBbZ3JpZFgsIGdyaWRZXTsKICB9OwoKICBjb25zdCBncmlkVG9QaXhlbCA9IChncmlkWDogbnVtYmVyLCBncmlkWTogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSA9PiB7CiAgICBjb25zdCBoZXhXaWR0aCA9IEhFWF9SQURJVVMgKiAyOwogICAgY29uc3QgaGV4SGVpZ2h0ID0gSEVYX1JBRElVUyAqIE1hdGguc3FydCgzKTsKICAgIAogICAgbGV0IHBpeGVsWCA9IGdyaWRYICogaGV4V2lkdGggKiAwLjc1OwogICAgbGV0IHBpeGVsWSA9IGdyaWRZICogaGV4SGVpZ2h0OwogICAgCiAgICAvLyBPZmZzZXQgb2RkIGNvbHVtbnMgKHZlcnRpY2FsIG9mZnNldCkKICAgIGlmIChncmlkWCAlIDIgPT09IDEpIHsKICAgICAgcGl4ZWxZICs9IGhleEhlaWdodCAqIDAuNTsKICAgIH0KICAgIAogICAgLy8gQWRkIGJvcmRlciBwYWRkaW5nCiAgICBwaXhlbFggKz0gQk9SREVSX1BBRERJTkc7CiAgICBwaXhlbFkgKz0gQk9SREVSX1BBRERJTkc7CiAgICAKICAgIHJldHVybiBbcGl4ZWxYLCBwaXhlbFldOwogIH07CgogIC8vIFJlbmRlciB0aGUgbWFwCiAgY29uc3QgcmVuZGVyTWFwID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgY29uc3QgcmVuZGVyZXIgPSByZW5kZXJlclJlZi5jdXJyZW50OwogICAgaWYgKCFyZW5kZXJlcikgcmV0dXJuOwogICAgCiAgICByZW5kZXJlci5yZW5kZXIobWFwRGF0YSwgcGFuLCB7CiAgICAgIHNob3dTZWxlY3Rpb246IHRydWUsCiAgICAgIHNlbGVjdGVkSGV4OiBzZWxlY3RlZEhleAogICAgfSk7CiAgfSwgW21hcERhdGEsIHBhbiwgc2VsZWN0ZWRIZXhdKTsKCiAgLy8gSGFuZGxlIGNhbnZhcyByZXNpemUKICBjb25zdCByZXNpemVDYW52YXMgPSB1c2VDYWxsYmFjaygoKSA9PiB7CiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDsKICAgIGlmICghY2FudmFzKSByZXR1cm47CiAgICAKICAgIGNvbnN0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBjYW52YXMud2lkdGggPSByZWN0LndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW87CiAgICBjYW52YXMuaGVpZ2h0ID0gcmVjdC5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbzsKICAgIAogICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICBpZiAoY3R4KSB7CiAgICAgIGN0eC5zY2FsZSh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgd2luZG93LmRldmljZVBpeGVsUmF0aW8pOwogICAgfQogICAgCiAgICByZW5kZXJNYXAoKTsKICB9LCBbcmVuZGVyTWFwXSk7CgogIC8vIE1vdXNlIGV2ZW50IGhhbmRsZXJzIGZvciBwYW5uaW5nIGFuZCBjbGlja2luZwogIGNvbnN0IGhhbmRsZU1vdXNlRG93biA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7CiAgICBzZXRJc0RyYWdnaW5nKHRydWUpOwogICAgc2V0TGFzdE1vdXNlUG9zKHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfSk7CiAgfTsKCiAgY29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHsKICAgIGlmICghaXNEcmFnZ2luZykgcmV0dXJuOwogICAgCiAgICBjb25zdCBkZWx0YVggPSBlLmNsaWVudFggLSBsYXN0TW91c2VQb3MueDsKICAgIGNvbnN0IGRlbHRhWSA9IGUuY2xpZW50WSAtIGxhc3RNb3VzZVBvcy55OwogICAgCiAgICBzZXRQYW4ocHJldiA9PiAoewogICAgICB4OiBwcmV2LnggKyBkZWx0YVgsCiAgICAgIHk6IHByZXYueSArIGRlbHRhWQogICAgfSkpOwogICAgCiAgICBzZXRMYXN0TW91c2VQb3MoeyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9KTsKICB9OwoKICBjb25zdCBoYW5kbGVNb3VzZVVwID0gKCkgPT4gewogICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7CiAgfTsKCiAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoZTogUmVhY3QuTW91c2VFdmVudCkgPT4gewogICAgaWYgKGlzRHJhZ2dpbmcpIHJldHVybjsgLy8gRG9uJ3QgcHJvY2VzcyBjbGlja3MgaWYgd2Ugd2VyZSBkcmFnZ2luZwogICAgCiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDsKICAgIGlmICghY2FudmFzKSByZXR1cm47CiAgICAKICAgIGNvbnN0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBjb25zdCB4ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0OwogICAgY29uc3QgeSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOwogICAgCiAgICBjb25zdCBbZ3JpZFgsIGdyaWRZXSA9IHBpeGVsVG9HcmlkKHgsIHkpOwogICAgCiAgICAvLyBGaW5kIHRoZSB6b25lIGF0IHRoaXMgZ3JpZCBwb3NpdGlvbgogICAgY29uc3Qgem9uZSA9IG1hcERhdGEuZmluZCh6ID0+IAogICAgICB6LnN0YXRlPy5sb2NhdGlvbj8uZmlyc3QgPT09IGdyaWRYICYmIHouc3RhdGU/LmxvY2F0aW9uPy5zZWNvbmQgPT09IGdyaWRZCiAgICApOwogICAgCiAgICBpZiAoem9uZSkgewogICAgICAvLyBDbGlja2VkIG9uIGEgdmFsaWQgaGV4IHdpdGggZGF0YQogICAgICBzZXRTZWxlY3RlZEhleCh7IHg6IGdyaWRYLCB5OiBncmlkWSwgem9uZSB9KTsKICAgICAgc2V0SW5mb1BhbmVsUG9zKHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfSk7CiAgICAgIHNldFNob3dJbmZvUGFuZWwodHJ1ZSk7CiAgICB9IGVsc2UgewogICAgICAvLyBDbGlja2VkIG91dHNpZGUgdmFsaWQgaGV4IGFyZWEKICAgICAgc2V0U2hvd0luZm9QYW5lbChmYWxzZSk7CiAgICAgIHNldFNlbGVjdGVkSGV4KG51bGwpOwogICAgfQogIH07CgogIGNvbnN0IGhhbmRsZVJpZ2h0Q2xpY2sgPSAoZTogUmVhY3QuTW91c2VFdmVudCkgPT4gewogICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBTdGlsbCBwcmV2ZW50IGNvbnRleHQgbWVudSBqdXN0IGluIGNhc2UKICB9OwoKICAvLyBLZXlib2FyZCBwYW5uaW5nCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4gewogICAgICBjb25zdCBwYW5TcGVlZCA9IDIwOwogICAgICAKICAgICAgc3dpdGNoIChlLmtleSkgewogICAgICAgIGNhc2UgJ0Fycm93VXAnOgogICAgICAgICAgc2V0UGFuKHByZXYgPT4gKHsgLi4ucHJldiwgeTogcHJldi55ICsgcGFuU3BlZWQgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQXJyb3dEb3duJzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHk6IHByZXYueSAtIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6CiAgICAgICAgICBzZXRQYW4ocHJldiA9PiAoeyAuLi5wcmV2LCB4OiBwcmV2LnggKyBwYW5TcGVlZCB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzoKICAgICAgICAgIHNldFBhbihwcmV2ID0+ICh7IC4uLnByZXYsIHg6IHByZXYueCAtIHBhblNwZWVkIH0pKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9OwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7CiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTsKICB9LCBbXSk7CgogIC8vIFNldHVwIGNhbnZhcyBhbmQgcmVzaXplIGhhbmRsaW5nCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIHJlc2l6ZUNhbnZhcygpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUNhbnZhcyk7CiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUNhbnZhcyk7CiAgfSwgW3Jlc2l6ZUNhbnZhc10pOwoKICAvLyBSZS1yZW5kZXIgd2hlbiBtYXAgZGF0YSBvciBwYW4gY2hhbmdlcwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICByZW5kZXJNYXAoKTsKICB9LCBbcmVuZGVyTWFwXSk7CgogIHJldHVybiAoCiAgICA8ZGl2IGNsYXNzTmFtZT0idy1mdWxsIGgtZnVsbCByZWxhdGl2ZSI+CiAgICAgIDxjYW52YXMKICAgICAgICByZWY9e2NhbnZhc1JlZn0KICAgICAgICBjbGFzc05hbWU9InctZnVsbCBoLWZ1bGwgY3Vyc29yLWdyYWIgYWN0aXZlOmN1cnNvci1ncmFiYmluZyIKICAgICAgICBzdHlsZT17eyBjdXJzb3I6IGlzRHJhZ2dpbmcgPyAnZ3JhYmJpbmcnIDogJ2dyYWInIH19CiAgICAgICAgb25Nb3VzZURvd249e2hhbmRsZU1vdXNlRG93bn0KICAgICAgICBvbk1vdXNlTW92ZT17aGFuZGxlTW91c2VNb3ZlfQogICAgICAgIG9uTW91c2VVcD17aGFuZGxlTW91c2VVcH0KICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlVXB9CiAgICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2t9CiAgICAgICAgb25Db250ZXh0TWVudT17aGFuZGxlUmlnaHRDbGlja30KICAgICAgLz4KICAgICAgCiAgICAgIHsvKiBJbmZvIFBhbmVsICovfQogICAgICB7c2hvd0luZm9QYW5lbCAmJiBzZWxlY3RlZEhleCAmJiAoCiAgICAgICAgPGRpdiAKICAgICAgICAgIGNsYXNzTmFtZT0iYWJzb2x1dGUgYmctZ3JheS04MDAgdGV4dC13aGl0ZSBwLTMgcm91bmRlZCBzaGFkb3ctbGcgYm9yZGVyIGJvcmRlci1ncmF5LTYwMCB6LTUwIgogICAgICAgICAgc3R5bGU9e3sgCiAgICAgICAgICAgIGxlZnQ6IGluZm9QYW5lbFBvcy54ICsgMTAsIAogICAgICAgICAgICB0b3A6IGluZm9QYW5lbFBvcy55ICsgMTAsCiAgICAgICAgICAgIG1heFdpZHRoOiAnMjAwcHgnCiAgICAgICAgICB9fQogICAgICAgID4KICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgbWItMiI+SGV4IEluZm9ybWF0aW9uPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC14cyBzcGFjZS15LTEiPgogICAgICAgICAgICA8ZGl2PkNvb3JkaW5hdGVzOiAoe3NlbGVjdGVkSGV4Lnh9LCB7c2VsZWN0ZWRIZXgueX0pPC9kaXY+CiAgICAgICAgICAgIHtzZWxlY3RlZEhleC56b25lID8gKAogICAgICAgICAgICAgIDw+CiAgICAgICAgICAgICAgICA8ZGl2PlRlcnJhaW46IHtzZWxlY3RlZEhleC56b25lLnN0YXRlPy50ZXJyYWluVHlwZSB8fCAnVW5rbm93bid9PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2PklEOiB7c2VsZWN0ZWRIZXguem9uZS5faWR9PC9kaXY+CiAgICAgICAgICAgICAgPC8+CiAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtZ3JheS00MDAiPk5vIHpvbmUgZGF0YTwvZGl2PgogICAgICAgICAgICApfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIG10LTIiPkxlZnQtY2xpY2sgdG8gZGlzbWlzczwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICApfQogICAgICAKICAgICAgey8qIERlYnVnIGluZm8gKi99CiAgICAgIDxkaXYgY2xhc3NOYW1lPSJhYnNvbHV0ZSB0b3AtMiByaWdodC0yIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgdGV4dC13aGl0ZSB0ZXh0LXhzIHAtMiByb3VuZGVkIj4KICAgICAgICA8ZGl2Pk1hcFpvbmVzOiB7bWFwRGF0YS5sZW5ndGh9PC9kaXY+CiAgICAgICAgPGRpdj5QYW46IHtwYW4ueC50b0ZpeGVkKDApfSwge3Bhbi55LnRvRml4ZWQoMCl9PC9kaXY+CiAgICAgICAge3NlbGVjdGVkSGV4ICYmICgKICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXllbGxvdy0zMDAiPlNlbGVjdGVkOiAoe3NlbGVjdGVkSGV4Lnh9LCB7c2VsZWN0ZWRIZXgueX0pPC9kaXY+CiAgICAgICAgKX0KICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1ncmF5LTMwMCBtdC0xIj5BcnJvdyBrZXlzIG9yIGRyYWcgdG8gcGFuPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtZ3JheS0zMDAiPkNsaWNrIGhleCBmb3IgaW5mbzwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn07CgpleHBvcnQgZGVmYXVsdCBHYW1lTWFwOw",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAACYhAAAAAAAAAAAAAAAA8L8"
				]
			]
		},
		{
			"contents": "Searching 37918 files for \"map_zone\" (regex)\n\n~/Documents/dev/chieftain/client/node_modules/.cache/babel-loader/fbd9561aa63ebb3c2c63bbad5b0451043a1d32fc52ef7dbdc99f5bdabe503ecb.json:\n    1: <skipped 2255 characters> ...       // Now connect down socket\\n            connectDownSocket(connId);\\n          } else if (message.type === 'sync' && message.data) {\\n            if (message.data.entities) {\\n              addMessage(`Received ${message.data.entities.length} entities from sync`);\\n              // Filter for map_zone entities\\n              const mapZones = message.data.entities.filter(e => e.type === 'map_zone');\\n              setMapData(mapZones);\\n              addMessage(`Found ${mapZones.length} map zones`);\\n            }\\n          }\\n        } catch (e) {\\n          addMessage(`Error parsing up socket message: ${e instanceof Error ? e.message : 'Unknown error'}`);\\n        }\\n      };\\n      ws.o... <skipped 1246 characters> ...ssage('Down socket confirmed');\\n          } else if (message.type === 'update_batch' && message.updates) {\\n            const updateCount = Object.keys(message.updates).length;\\n            addMessage(`Received batch update with ${updateCount} entities`);\\n\\n            // Update map data with any map_zone updates\\n            Object.values(message.updates).forEach(update => {\\n              if (update.type === 'map_zone') {\\n                setMapData(prev => {\\n                  const newData = [...prev];\\n                  const index = newData.findIndex(zone => zone._id === update._id);\\n                  if (index >= 0) {\\n                    newData[index] = update;\\n                  } else {\\n              ... <skipped 6621 characters> ...       // Now connect down socket\\n            connectDownSocket(connId);\\n          } else if (message.type === 'sync' && message.data) {\\n            if (message.data.entities) {\\n              addMessage(`Received ${message.data.entities.length} entities from sync`);\\n              // Filter for map_zone entities\\n              const mapZones = message.data.entities.filter((e: any) => e.type === 'map_zone');\\n              setMapData(mapZones);\\n              addMessage(`Found ${mapZones.length} map zones`);\\n            }\\n          }\\n        } catch (e) {\\n          addMessage(`Error parsing up socket message: ${e instanceof Error ? e.message : 'Unknown error'}`);\\n        }\\n      };\\n\\n      ws... <skipped 1290 characters> ...socket confirmed');\\n          } else if (message.type === 'update_batch' && message.updates) {\\n            const updateCount = Object.keys(message.updates).length;\\n            addMessage(`Received batch update with ${updateCount} entities`);\\n            \\n            // Update map data with any map_zone updates\\n            Object.values(message.updates).forEach((update: any) => {\\n              if (update.type === 'map_zone') {\\n                setMapData(prev => {\\n                  const newData = [...prev];\\n                  const index = newData.findIndex(zone => zone._id === update._id);\\n                  if (index >= 0) {\\n                    newData[index] = update;\\n                  } else {\\n              ... <skipped 8403 characters> ...\n\n~/Documents/dev/chieftain/client/node_modules/.cache/default-development/1.pack:\n    <binary>\n\n~/Documents/dev/chieftain/client/node_modules/.cache/default-development/13.pack:\n    <binary>\n\n~/Documents/dev/chieftain/client/node_modules/.cache/default-development/2.pack:\n    <binary>\n\n~/Documents/dev/chieftain/client/node_modules/.cache/default-development/5.pack:\n    <binary>\n\n~/Documents/dev/chieftain/client/src/components/GameArea.tsx:\n   77              if (message.data.entities) {\n   78                addMessage(`Received ${message.data.entities.length} entities from sync`);\n   79:               // Filter for map_zone entities\n   80:               const mapZones = message.data.entities.filter((e: any) => e.type === 'map_zone');\n   81                setMapData(mapZones);\n   82                addMessage(`Found ${mapZones.length} map zones`);\n   ..\n  131              addMessage(`Received batch update with ${updateCount} entities`);\n  132              \n  133:             // Update map data with any map_zone updates\n  134              Object.values(message.updates).forEach((update: any) => {\n  135:               if (update.type === 'map_zone') {\n  136                  setMapData(prev => {\n  137                    const newData = [...prev];\n\n228 matches across 6 files\n",
			"settings":
			{
				"buffer_size": 4513,
				"line_ending": "Unix",
				"name": "Find Results",
				"scratch": true
			},
			"undo_stack":
			[
			]
		},
		{
			"file": "src/components/MapRenderer.ts",
			"settings":
			{
				"buffer_size": 5333,
				"encoding": "UTF-8",
				"line_ending": "Unix",
				"name": "interface MapZone {"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAA1RQAAAAAAAAAAAAA",
					"AgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8L8"
				]
			]
		}
	],
	"build_system": "",
	"build_system_choices":
	[
		[
			[
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				]
			],
			[
				"Packages/Python/Python.sublime-build",
				""
			]
		]
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"json",
				"JSON Reindent: reindent file or selection"
			],
			[
				"python",
				"Start Python Live Coding"
			],
			[
				"install",
				"Package Control: Install Package"
			],
			[
				"package",
				"Install Package Control"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 0.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/Users/josephsachs/Documents/dev/chieftain/client",
		"/Users/josephsachs/Documents/dev/chieftain/client/public",
		"/Users/josephsachs/Documents/dev/chieftain/client/src",
		"/Users/josephsachs/Documents/dev/chieftain/client/src/components"
	],
	"file_history":
	[
		"/Users/josephsachs/Documents/dev/chieftain/client/src/App.tsx",
		"/Users/josephsachs/Documents/dev/chieftain/client/src/index.tsx",
		"/Users/josephsachs/Documents/dev/chieftain/client/public/index.html",
		"/Users/josephsachs/Documents/dev/clickedin/index.html",
		"/Users/josephsachs/Desktop/pseudo-linkedin.html",
		"/Users/josephsachs/Documents/dev/authservice-server-src/package.json",
		"/Users/josephsachs/Documents/curseforge/minecraft/Instances/Dark Continent/config/iceandfire-common.toml",
		"/Users/josephsachs/Documents/curseforge/minecraft/Instances/Dark Continent/config/incontrol/spawn.json",
		"/Users/josephsachs/Documents/curseforge/minecraft/Instances/Dark Continent/config/epicsiegemod-common.toml",
		"/Users/josephsachs/Documents/curseforge/minecraft/Instances/Dark Continent/config/grimoireofgaia-spawning.toml",
		"/Users/josephsachs/Documents/curseforge/minecraft/Instances/Dark Continent/config/grimoireofgaia-common.toml",
		"/Users/josephsachs/Documents/curseforge/minecraft/Instances/Dark Continent/config/twilightforest-common.toml",
		"/Users/josephsachs/Documents/curseforge/minecraft/Instances/Dark Continent/config/incontrol/summonaid.json",
		"/Users/josephsachs/Documents/curseforge/minecraft/Instances/Dark Continent/config/incontrol/spawner.json",
		"/Users/josephsachs/Documents/curseforge/minecraft/Instances/Dark Continent/epicsiegemod.toml",
		"/Users/josephsachs/IdleFantasyGPT/Assets/Utils/ChatGPTAPI.cs",
		"/Users/josephsachs/Documents/dev/minare/.gitignore",
		"/Users/josephsachs/Documents/dev/minare/start.sh",
		"/Users/josephsachs/Documents/dev/project-minare/vertx/src/main/java/com/minare/controller/WebSocketController.java",
		"/Users/josephsachs/Documents/dev/project-minare/start.sh",
		"/Users/josephsachs/Documents/dev/project-minare/vertx/src/main/java/com/minare/scenario/MapBuilder.java",
		"/Users/josephsachs/Documents/dev/project-minare/vertx/src/main/java/com/minare/world/RandomNumberHandler.java",
		"/Users/josephsachs/Documents/dev/project-minare/vertx/src/main/java/com/minare/controller/MapViewController.java",
		"/Users/josephsachs/Documents/dev/project-minare/vertx/src/main/java/com/minare/controller/HelloController.java",
		"/Users/josephsachs/Documents/dev/project-minare/vertx/src/main/java/com/minare/MainVerticle.java",
		"/Users/josephsachs/Documents/dev/project-minare/vertx/start-vertx.sh",
		"/Users/josephsachs/Documents/dev/project-minare/.gitignore",
		"/Users/josephsachs/Documents/dev/project-minare/vertx/pom.xml",
		"/Users/josephsachs/Downloads/generated-lorebook-v2.lorebook",
		"/Users/josephsachs/Downloads/Example.lorebook.json",
		"/Users/josephsachs/Downloads/generated-lorebook.json",
		"/Users/josephsachs/Documents/dev/setup_psyche.sh",
		"/Users/josephsachs/Documents/dev/psyche/psyche/src/index.js",
		"/Users/josephsachs/PsycheV1/Assets/Core/Mindlet.cs",
		"/Users/josephsachs/PsycheV1/Assets/Core/IController.cs",
		"/Users/josephsachs/PsycheV1/Assets/Core/CoreController.cs",
		"/Users/josephsachs/Documents/tokyopicnic-tropes.html",
		"/Users/josephsachs/IdleFantasyGPT/Assets/Configs/openai-api.json",
		"/Users/josephsachs/Documents/dev/muds/eclipse/typeclasses/characters.py",
		"/Users/josephsachs/Documents/dev/muds/eclipse/commands/cmd_skills.py",
		"/Users/josephsachs/Documents/dev/muds/eclipse/world/world_data.json",
		"/Users/josephsachs/Documents/dev/muds/eclipse/reset.sh",
		"/Users/josephsachs/Documents/dev/muds/nereids/typeclasses/npc_builder.py",
		"/Users/josephsachs/Documents/dev/muds/nereids/typeclasses/npc.py",
		"/Users/josephsachs/Documents/dev/langchain-tutorial/tutorial1.py",
		"/Users/josephsachs/Documents/dev/langchain-tutorial/tutorial2.py",
		"/Users/josephsachs/Documents/dev/langchain-tutorial/.env",
		"/Users/josephsachs/Documents/dev/langchain-tutorial/alphavantage_test.py",
		"/Users/josephsachs/Library/Application Support/Sublime Text 3/Packages/User/langchain-tutorial-python.sublime-build",
		"/Users/josephsachs/Documents/dev/gala-eclipse/src/typeclasses/Aamir,Aaron,Abbey,Abbie,Abbot,Abbott,Abby,Abdel,Ab",
		"/Users/josephsachs/Documents/dev/eclipse-wanderers/package.json",
		"/Users/josephsachs/Documents/Paradox Interactive/Crusader Kings III/mod/xaxia.mod",
		"/Users/josephsachs/Documents/Paradox Interactive/Crusader Kings III/mod/xaxia(1).mod",
		"/Users/josephsachs/Documents/dev/gala-eclipse/src/world/test.py",
		"/Users/josephsachs/Documents/dev/muds/station-to-station/world/test.py",
		"/Users/josephsachs/Documents/dev/muds/station-to-station/world/boilerplate.py",
		"/Users/josephsachs/Documents/dev/meathooks-js/params.json",
		"/Users/josephsachs/Documents/dev/meathooks-js/index.js",
		"/Users/josephsachs/Documents/dev/gala-eclipse/src/typeclasses/generators/language_models/language_model.py",
		"/Users/josephsachs/Documents/dev/gala-eclipse/src/world/scripts.py",
		"/Users/josephsachs/Documents/dev/gala-eclipse/codedeploy/copy_src.sh",
		"/Users/josephsachs/Documents/dev/gala-eclipse/src/typeclasses/generators.py",
		"/Users/josephsachs/Documents/dev/gala-eclipse/src/world/language_model.py",
		"/Users/josephsachs/Documents/dev/gala-eclipse/src/world/nai_api.py",
		"/Users/josephsachs/Documents/dev/gala-eclipse/src/typeclasses/dialog.py",
		"/Users/josephsachs/Documents/dev/gala-eclipse/src/typeclasses/NPC.py",
		"/Users/josephsachs/Documents/dev/gala-eclipse/codedeploy/reload_evennia.sh",
		"/Users/josephsachs/Documents/dev/gala-eclipse/appspec.yml",
		"/Users/josephsachs/Documents/dev/gala-eclipse/README.md",
		"/Users/josephsachs/Documents/dev/evennia-aws/appspec.yml",
		"/Users/josephsachs/Documents/dev/evennia-aws/codedeploy/reload_evennia.sh",
		"/Users/josephsachs/Documents/dev/evennia-aws/codedeploy/copy_src.sh",
		"/Users/josephsachs/Documents/dev/evennia-aws/cloudformation/main.yml",
		"/Users/josephsachs/Documents/dev/gala-eclipse/codedeploy/install.sh",
		"/Users/josephsachs/Documents/dev/gala-eclipse/launch-data/start_evennia.sh",
		"/Users/josephsachs/Documents/dev/gala-eclipse/codedeploy/restart_server.sh",
		"/Users/josephsachs/Documents/dev/evennia-aws/launch-data/start_evennia.sh",
		"/Users/josephsachs/Documents/dev/evennia-aws/codedeploy/install.sh",
		"/Users/josephsachs/Documents/dev/evennia-aws/README.md",
		"/Users/josephsachs/Documents/dev/gala-eclipse/launch-data/setup_extras.sh",
		"/Users/josephsachs/Documents/dev/evennia-aws/src/.gitignore",
		"/Users/josephsachs/Documents/dev/evennia-aws/.gitignore",
		"/Users/josephsachs/Documents/dev/evennia-aws/launch-data/install_evennia.sh",
		"/Users/josephsachs/Documents/dev/evennia-aws/launch-data/provision.sh",
		"/Users/josephsachs/Documents/dev/evennia-aws/launch-data/install_python3.sh",
		"/Users/josephsachs/Documents/dev/evennia-aws/launch-data/setup_extras.sh",
		"/Users/josephsachs/Documents/dev/evennia-aws/codedeploy-scripts/restart_server.sh",
		"/Users/josephsachs/Documents/dev/evennia-ai/cloudformation/create_venv.sh",
		"/Users/josephsachs/Documents/dev/evennia-ai/cloudformation/install_pip.sh",
		"/Users/josephsachs/Documents/dev/evennia-ai/cloudformation/master.yml",
		"/Users/josephsachs/Documents/dev/evennia-ai/cloudformation/pipeline.yml",
		"/Users/josephsachs/Documents/dev/evennia-ai/cloudformation/create_evennia_project.sh",
		"/Users/josephsachs/Documents/dev/evennia-ai/cloudformation/master2.yml",
		"/Users/josephsachs/Downloads/hazulog",
		"/Users/josephsachs/Documents/dev/meathooks/index2.js",
		"/Users/josephsachs/Documents/dev/novelai-api/.pre-commit-config.yaml",
		"/Users/josephsachs/Documents/dev/novelai-api/README.md",
		"/Users/josephsachs/Documents/dev/meathooks/package-lock.json",
		"/Users/josephsachs/Documents/Paradox Interactive/Crusader Kings III/mod/Grail.mod",
		"/Users/josephsachs/Documents/Paradox Interactive/Crusader Kings III/mod/ugc_2253278582.mod",
		"/Users/josephsachs/Documents/Paradox Interactive/Crusader Kings III/mod/ugc_2241203093.mod",
		"/Users/josephsachs/Documents/Paradox Interactive/Crusader Kings III/mod/ugc_2524797018.mod",
		"/Users/josephsachs/Documents/Paradox Interactive/Crusader Kings III/mod/Grail/descriptor.mod",
		"/Users/josephsachs/Desktop/rpgm-parsing-tool.html",
		"/Users/josephsachs/Desktop/Map001-JP.json",
		"/Users/josephsachs/Library/Application Support/Steam/steamapps/common/Europa Universalis IV/localisation/countries_l_english.yml",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/common/countries/Colombia.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/history/countries/COL - Colombia.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done.mod",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/common/country_tags/00_countries.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/customizable_localization/00_start_screen.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/customizable_localization/00_customizable_localization.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/common/scripted_triggers/00_scripted_triggers_FR.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/localisation/converted_heresies_l_english.yml",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/customizable_localization/ZZZ_added_converter_customizable_localization.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/Shirazid/common/country_tags/00_countries.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/Shirazid/localisation/replace/converter_l_english.yml",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/Shirazid/localisation/xyu_ideas_l_english.yml",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/Shirazid/common/ideas/01_extra_ideas_b.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/Shirazid/common/scripted_triggers/00_scripted_triggers_FR.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/Shirazid/history/countries/BRZ - Brazil.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/Shirazid/common/countries/x_x_2232.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/Shirazid/common/countries/x_x_2775.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/localisation/xyu_ideas_l_english.yml",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/common/ideas/01_extra_ideas_b.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/common/custom_ideas/00_adm_custom_ideas.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/common/religions/99_converted_dynamic_faith_107-from-shiite.txt",
		"/Users/josephsachs/Documents/Paradox Interactive/Europa Universalis IV/mod/1437_04_29_Done/common/ideas/00_basic_ideas.txt"
	],
	"find":
	{
		"height": 24.0
	},
	"find_in_files":
	{
		"height": 98.0,
		"where_history":
		[
			"/Users/josephsachs/Documents/dev/chieftain/client,<project filters>"
		]
	},
	"find_state":
	{
		"case_sensitive": false,
		"find_history":
		[
			"map_zone"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": true,
		"replace_history":
		[
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": false,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"file": "package.json",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1057,
						"regions":
						{
						},
						"selection":
						[
							[
								1057,
								1057
							]
						],
						"settings":
						{
							"syntax": "Packages/JSON/JSON.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "src/index.css",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 425,
						"regions":
						{
						},
						"selection":
						[
							[
								425,
								425
							]
						],
						"settings":
						{
							"syntax": "Packages/CSS/CSS.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "src/App.tsx",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 185,
						"regions":
						{
						},
						"selection":
						[
							[
								185,
								185
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/TSX.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "src/index.tsx",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 273,
						"regions":
						{
						},
						"selection":
						[
							[
								273,
								273
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/TSX.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "src/components/GameArea.tsx",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6830,
						"regions":
						{
						},
						"selection":
						[
							[
								2617,
								2617
							]
						],
						"settings":
						{
							"auto_name": "import { useState, useEffect, useRef } from 'react",
							"syntax": "Packages/JavaScript/TSX.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2401.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "src/components/GameMap.tsx",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 8486,
						"regions":
						{
						},
						"selection":
						[
							[
								6958,
								6958
							]
						],
						"settings":
						{
							"auto_name": "import { useRef, useEffect, useState, useCallback",
							"syntax": "Packages/JavaScript/TSX.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 6,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4513,
						"regions":
						{
							"match":
							{
								"flags": 112,
								"regions":
								[
									[
										519,
										527
									],
									[
										615,
										623
									],
									[
										1256,
										1264
									],
									[
										1373,
										1381
									],
									[
										2014,
										2022
									],
									[
										2117,
										2125
									],
									[
										2758,
										2766
									],
									[
										2882,
										2890
									],
									[
										3847,
										3855
									],
									[
										3956,
										3964
									],
									[
										4240,
										4248
									],
									[
										4376,
										4384
									]
								],
								"scope": ""
							}
						},
						"selection":
						[
							[
								3905,
								3905
							]
						],
						"settings":
						{
							"detect_indentation": false,
							"line_numbers": false,
							"output_tag": 1,
							"result_base_dir": "",
							"result_file_regex": "^([^ \t].*):$",
							"result_line_regex": "^ +([0-9]+):",
							"scroll_past_end": true,
							"syntax": "Packages/Default/Find Results.hidden-tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 202.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 7,
					"file": "src/components/MapRenderer.ts",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5333,
						"regions":
						{
						},
						"selection":
						[
							[
								4575,
								4575
							]
						],
						"settings":
						{
							"auto_name": "interface MapZone {",
							"syntax": "Packages/JavaScript/TSX.sublime-syntax",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 24.0
	},
	"input":
	{
		"height": 36.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.exec":
	{
		"height": 377.0
	},
	"output.find_results":
	{
		"height": 0.0
	},
	"pinned_build_system": "Packages/User/langchain-tutorial-python.sublime-build",
	"project": "chieftain-client.sublime-project",
	"replace":
	{
		"height": 44.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 501.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 380.0
	},
	"select_symbol":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 264.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
